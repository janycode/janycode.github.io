

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Jerry(姜源)">
  <meta name="keywords" content="Java,Html,CSS,JavaScript,Python,C,Linux,shell编程经验分享、技术总结、心得体会">
  
    <meta name="description" content="python学习笔记：小甲鱼python全套视频  +  python基础教程 第2版修订版（书附10个大型案例） python学习环境：python3, win10下python3.5.4的IDLE  +  ubuntu下python3辅助 python分享范围：适合有C&#x2F;C++&#x2F;JAVA任意语言之一为基础，不适合纯新手入门 python语言优势：至今还没有一门编程语言，开发">
<meta property="og:type" content="article">
<meta property="og:title" content="01-Python基础语法大全">
<meta property="og:url" content="https://janycode.github.io/2017/09/09/02_%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02_Python/01-Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E5%A4%A7%E5%85%A8/index.html">
<meta property="og:site_name" content="姜源の云笔记">
<meta property="og:description" content="python学习笔记：小甲鱼python全套视频  +  python基础教程 第2版修订版（书附10个大型案例） python学习环境：python3, win10下python3.5.4的IDLE  +  ubuntu下python3辅助 python分享范围：适合有C&#x2F;C++&#x2F;JAVA任意语言之一为基础，不适合纯新手入门 python语言优势：至今还没有一门编程语言，开发">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-09-09T14:20:17.000Z">
<meta property="article:modified_time" content="2026-01-22T12:15:35.459Z">
<meta property="article:author" content="Jerry(姜源)">
<meta property="article:tag" content="语法">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>01-Python基础语法大全 - 姜源の云笔记</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"janycode.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":50,"cursorChar":"|","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"bfff735c897eb60ea49b735096b20e47","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 50vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>姜源の云笔记</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tools/">
                <i class="iconfont icon-slack-fill"></i>
                工具
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" target="_blank" rel="noopener" href="https://yuancodes.github.io/">
                <i class="iconfont icon-notebook"></i>
                Docsify
              </a>
            </li>
          
        
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="01-Python基础语法大全"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Jerry(姜源)
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2017-09-09 22:20" pubdate>
          星期六, 2017/09/09 22:20:17
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          116k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          970 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">01-Python基础语法大全</h1>
            
            <div class="markdown-body">
              
              <p><strong>python学习笔记</strong>：小甲鱼python全套视频  +  python基础教程 第2版修订版（书附10个大型案例）</p>
<p><strong>python学习环境</strong>：python3, win10下python3.5.4的IDLE  +  ubuntu下python3辅助</p>
<p><strong>python分享范围</strong>：适合有C&#x2F;C++&#x2F;JAVA任意语言之一为基础，不适合纯新手入门</p>
<p><strong>python语言优势</strong>：至今还没有一门编程语言，开发速度比Python快，运行速度比C快</p>
<p>python常用工具手册：</p>
<p><a target="_blank" rel="noopener" href="http://bbs.fishc.com/forum.php?mod=collection&amp;action=view&amp;ctid=198">http://bbs.fishc.com/forum.php?mod=collection&amp;action=view&amp;ctid=198</a></p>
<h3 id="00-python背景与特点"><a href="#00-python背景与特点" class="headerlink" title="00. python背景与特点"></a>00. python背景与特点</h3><p>Python语言起源<br>在1989年末，Guido van Rossum为了打发圣诞节的无聊，创造了python(大蟒蛇)。 1991年，第一个 Python 版本诞生。最新版本是Python3 3.6.2 。Guido van Rossum 是蒙提·派森的飞行马戏团（Monty Python‘s Flying Circus）的爱好者。logo是由两只蟒蛇的图形组成。</p>
<p>官网下载地址：<br><a target="_blank" rel="noopener" href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></p>
<p>Python 3 与 Python 2 不完全兼容<br>官方表示对 Python2 支持到2020年， Python2 2.7.13。Python 2 的生态库远远大于 Python 3。</p>
<p>简单：<br>学习曲线平滑， 45分钟学会基本使用，使用简单。<br>跨平台：<br>一次编写、到处运行。 Windows， Linux， Mac， Android<br>功能强大：<br>  动态类型、自动内存管理<br>  非常实用的内置对象类型<br>  强大的内置工具和标准库<br>  易于扩展，很多成熟易用第三方库<br>  大型程序支持<br>应用广泛：<br>  数据库、网络、图形图像、科学计算、机器学习、web开发、操作系统扩展等<br>缺点：<br>运行速度不够快(硬件的发展可以为此弥补不足)<br>开发速度与运行速度之间的矛盾：<br>至今还没有一门编程语言，开发速度比Python快，运行速度比C快<br>知名软件包：Django&#x2F;Numpy&#x2F;Pandas&#x2F;Matplotlib&#x2F;PIL (Pillow)&#x2F;PyQt5&#x2F;Tensorflow&#x2F;Scipy&#x2F;Theano&#x2F;NLTK<br>知名项目：(网站)豆瓣&#x2F;知乎&#x2F;美团&#x2F;Gmail&#x2F;Youtube&#x2F;Instagram&#x2F;Calibre&#x2F;……</p>
<h3 id="01-第一次亲密接触-first-love"><a href="#01-第一次亲密接触-first-love" class="headerlink" title="01. 第一次亲密接触 first love"></a>01. 第一次亲密接触 first love</h3><p>(1) win下的python IDLE集成开发环境自动缩进，table键补齐变量名<br>(2) linux下使用vi编辑.py的python文件，需要声明 #!&#x2F;usr&#x2F;bin&#x2F;python3<br>(3) python使用等量(1个tab)的缩进来严格对齐表示作用域</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python3</span><br><span class="hljs-comment">#guess game</span><br><br><br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;   -游戏开始  -- - &quot;</span>)<br>temp = <span class="hljs-built_in">input</span> (<span class="hljs-string">&quot;输入一个我现在想的数字：&quot;</span>)<br>guess = <span class="hljs-built_in">int</span> (temp)<br><span class="hljs-keyword">if</span> guess == <span class="hljs-number">8</span>:<br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;猜对了！！！&quot;</span>)<br><span class="hljs-keyword">else</span>:<br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;哈哈，猜错了。。&quot;</span>)<br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;游戏结束喽~&quot;</span>)<br><span class="hljs-comment">#-- -end-- -</span><br><br><br>BIF == Built-<span class="hljs-keyword">in</span> functions(内置函数)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dir</span>(__builtins__)<br>..., <span class="hljs-string">&#x27;input&#x27;</span>, ...<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">help</span>(<span class="hljs-built_in">input</span>)<br><span class="hljs-comment">#可以查询内置函数的说明和用法，类似于C语言的man手册</span><br></code></pre></td></tr></table></figure>


<h3 id="02-变量-variable"><a href="#02-变量-variable" class="headerlink" title="02. 变量 variable"></a>02. 变量 variable</h3><p>(1) python没有”变量”只有”名字”<br>(2) 变量使用之前，需要对其先赋值<br>(3) 变量名命名同C的规则，不能以数字开头，保证可读性命名即可<br>(4) 大小写敏感，区分<br>(5) &#x3D;左右依次为左值和右值<br>(6) 十六进制，以0x 或 0X 开头 ，数字由”0”到”9” 或者 “a”到”f” 或者 “A”到”F”组成<br>八进制，0o或0O 开头，数字由”0” 到 “7”组成<br>二进制，0b或0B 开头表示，数字由”0” 或者”1”组成<br>十进制由数字”0”到”9”组成，并且不能以0开头</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>teacher = <span class="hljs-string">&#x27;jiangyuan&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (teacher)<br>jiangyuan<br><span class="hljs-meta">&gt;&gt;&gt; </span>teacher = <span class="hljs-string">&#x27;somebody&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (teacher)<br>somebody<br><span class="hljs-meta">&gt;&gt;&gt; </span>first = <span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>second = <span class="hljs-number">8</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>third = first + second<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (third)<br><span class="hljs-number">11</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>myteacher = <span class="hljs-string">&#x27;jiangyuan&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>yourteacher = <span class="hljs-string">&#x27;somebody&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>ourteacher = myteacher + yourteacher<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (ourteacher)<br>jiangyuansomebody<br></code></pre></td></tr></table></figure>


<h3 id="03-运算符及优先级-precedence-of-operator"><a href="#03-运算符及优先级-precedence-of-operator" class="headerlink" title="03. 运算符及优先级 precedence of operator"></a>03. 运算符及优先级 precedence of operator</h3><p>#符合数学运算优先原则，括号最优先，最安全。<br>lambda lambda表达式<br>or 布尔或<br>and 布尔与<br>not 布尔非<br>in 和 not in 成员是否属于测试<br>is 和 is not 对象是否是同一个</p>
<blockquote>
<blockquote>
<p>&#x3D;  &lt;  &lt;&#x3D;  &#x3D;&#x3D;  !&#x3D; 比较操作符<br>| 按位或<br>^ 按位异或<br>&amp; 按位与<br>&lt;&lt; 和 &gt;&gt; 移位</p>
</blockquote>
</blockquote>
<ul>
<li>和 - 加法和减法</li>
</ul>
<ul>
<li>和 &#x2F; 和 % 乘法、除法、取余<br>+x 和 -x 正负号<br>~x 按位翻转<br>** 指数(幂运算)<br>&#x2F;&#x2F; 地板除法，舍弃小数部分<br>– -python运算符优先级(图)– -</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#=连续赋值，自右向左，同C语言</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = b = c = d = <span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (a, b, c, d)<br><span class="hljs-number">10</span> <span class="hljs-number">10</span> <span class="hljs-number">10</span> <span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a += <span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b -= <span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c *= <span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>d /= <span class="hljs-number">8</span> <span class="hljs-comment">#真除法，精确值</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (a, b, c, d)<br><span class="hljs-number">11</span> <span class="hljs-number">9</span> <span class="hljs-number">100</span> <span class="hljs-number">1.25</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>d = <span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>d // <span class="hljs-number">3</span>  <span class="hljs-comment">#地板除法(Floor)舍弃小数部分</span><br><span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">3</span> &lt; <span class="hljs-number">4</span> &lt; <span class="hljs-number">5</span>  <span class="hljs-comment">#支持连续判断，不建议这样用，可读性不高</span><br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">3</span> &lt; <span class="hljs-number">4</span> <span class="hljs-keyword">and</span> <span class="hljs-number">4</span> &lt; <span class="hljs-number">5</span><br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure>


<h3 id="04-类型-type"><a href="#04-类型-type" class="headerlink" title="04. 类型 type"></a>04. 类型 type</h3><p>数值类型：整型(int)、浮点型(float)、布尔类型(bool)、e记法(科学计数法,属于float)<br>(1) 整型与浮点型的区别就是是否含有小数点’.’<br>(2) bool类型的值是以大写开头的两个单词: True &#x2F; False<br>(3) 纯数字的字符串可以使用int转为数字，进而参与计算，相当于C的atoi，非纯数字的不能使用int转换为数字<br>(4) float类型转换为int类型时，会丢弃小数部分<br>(5) str类型均可被其他类型转换，即变成字符串无障碍<br>(6) type (value) 返回变量类型，isinstance(value, type)类型判断返回bool值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#float→int，丢弃小数部分</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = <span class="hljs-number">5.99</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b = <span class="hljs-built_in">int</span> (a)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (b)<br><span class="hljs-number">5</span><br><br><br><span class="hljs-comment">#e记法示例</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">0.00000000000000111</span><br><span class="hljs-number">1.11e-15</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">150000000000</span><br><span class="hljs-number">150000000000</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">15e10</span><br><span class="hljs-number">150000000000.0</span><br><br><br><span class="hljs-comment">#isinstance类型判断</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span> (<span class="hljs-string">&#x27;hello&#x27;</span>, <span class="hljs-built_in">str</span>)<br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span> (<span class="hljs-number">520</span>, <span class="hljs-built_in">str</span>)<br><span class="hljs-literal">False</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span> (<span class="hljs-number">520</span>, <span class="hljs-built_in">int</span>)<br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure>

<h3 id="05-条件分支与循环-condition-and-loop"><a href="#05-条件分支与循环-condition-and-loop" class="headerlink" title="05. 条件分支与循环 condition and loop"></a>05. 条件分支与循环 condition and loop</h3><p>条件bool值： True  False<br>False 的值： False  None  0  “”  ()  []  {}</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span>-<span class="hljs-keyword">else</span><br><span class="hljs-keyword">if</span> condition:<br><span class="hljs-comment">#condition == True, 执行的操作，可多层嵌套</span><br><span class="hljs-keyword">else</span>:<br><span class="hljs-comment">#condition == False, 执行的操作，可多层嵌套</span><br><br><br><span class="hljs-keyword">if</span>-<span class="hljs-keyword">elif</span>-<span class="hljs-keyword">else</span><br><span class="hljs-keyword">if</span> condition:<br><span class="hljs-comment">#condition == True, 执行的操作，可多层嵌套</span><br><span class="hljs-keyword">elif</span> condition:<br><span class="hljs-comment">#condition == True, 执行的操作，可多层嵌套</span><br><span class="hljs-keyword">else</span>:<br><span class="hljs-comment">#condition == False, 执行的操作，可多层嵌套</span><br><br><br>x <span class="hljs-keyword">if</span> condition <span class="hljs-keyword">else</span> y  <span class="hljs-comment">#三元操作符</span><br>举例：<br><span class="hljs-meta">&gt;&gt;&gt; </span>x, y = <span class="hljs-number">4</span>, <span class="hljs-number">5</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>small = x <span class="hljs-keyword">if</span> x &lt; y <span class="hljs-keyword">else</span> y<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span> (small)<br><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>

<p>assert 断言<br>当assert关键字后面的条件为假的时候，程序自动崩溃并抛出AssertionError异常。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">assert</span> <span class="hljs-number">3</span> &gt; <span class="hljs-number">4</span><br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#160&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  <span class="hljs-keyword">assert</span> <span class="hljs-number">3</span> &gt; <span class="hljs-number">4</span><br>AssertionError<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">assert</span> <span class="hljs-number">3</span> &lt; <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>


<p>while 循环<br>while condition:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#condition == true, 执行的循环体操作</span><br><span class="hljs-comment">#condition == false, 循环体外的操作</span><br></code></pre></td></tr></table></figure>


<p>for 循环<br>for target in expression:<br>循环体<br>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>favourite = <span class="hljs-string">&#x27;string&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> favourite:<br><span class="hljs-built_in">print</span> (i, end=<span class="hljs-string">&#x27; &#x27;</span>)  <span class="hljs-comment">#end以空格隔开</span><br>s t r i n g<br></code></pre></td></tr></table></figure>


<p>range()函数<br>range ([start], [stop], [step])  #step默认每次递增1，且range的取值范围到stop-1<br>常与for循环一起使用。<br>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">2</span>, <span class="hljs-number">5</span>):<br><span class="hljs-built_in">print</span> (i, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>):<br><span class="hljs-built_in">print</span> (i, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-number">1</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span><br></code></pre></td></tr></table></figure>


<p>break 和 continue<br>同C语言的break和continue，依次为跳出循环和跳过当前循环。</p>
<p>pass 和 del 和 exec<br>pass 什么也不敢，暂时预留<br>del 删除不再使用的对象<br>exec 执行python语句<br>exal 计算python表达式，并返回结果值</p>
<h3 id="06-列表-list"><a href="#06-列表-list" class="headerlink" title="06. 列表 list"></a>06. 列表 list</h3><p>普通列表：member &#x3D; [‘name’, ‘id’, ‘age’, ‘weight’]<br>混合列表：mix &#x3D; [1, ‘name’, 3.14, [1, 2, 3]]<br>空列表：empty &#x3D; []<br>列表常用方法: len()&#x2F;max()&#x2F;min()&#x2F;append()&#x2F;extend()&#x2F;insert()&#x2F;remove()&#x2F;pop()&#x2F;count()&#x2F;index()&#x2F;reverse()&#x2F;sort()</p>
<p>len()<br>功能：列表长度(元素个数)<br>len(listname)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">len</span>(member)<br><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>


<p>append()<br>功能：向列表添加单个元素<br>listname.append(element)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>member.append(<span class="hljs-string">&#x27;class&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>member<br>[<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;weight&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>]<br></code></pre></td></tr></table></figure>

<p>extend()<br>功能：使用子列表扩展列表<br>listname.extend([element1, element2, …])</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>member.extend ([<span class="hljs-string">&#x27;str1&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>])<br><span class="hljs-meta">&gt;&gt;&gt; </span>member<br>[<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;weight&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;str1&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>]<br></code></pre></td></tr></table></figure>

<p>insert()<br>功能：向列表指定位置插入元素<br>listname.insert(position, element)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#list和数组一样，下标/索引均从0开始</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>member.insert (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;new_elem&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>member<br>[<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;new_elem&#x27;</span>, <span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;weight&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;str1&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>]<br></code></pre></td></tr></table></figure>

<p>列表元素访问<br>listname[index]</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#index从0开始，到index-1位置的索引访问</span><br></code></pre></td></tr></table></figure>

<p>列表元素删除<br>listname.remove(element) #删除元素element</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">del</span> listname[index] <span class="hljs-comment">#删除index位置的元素</span><br>listname.pop() <span class="hljs-comment">#删除最后一个元素，相当于C语言的弹栈</span><br>listname.pop(index) <span class="hljs-comment">#删除index位置指定的元素</span><br></code></pre></td></tr></table></figure>

<p>列表元素分片<br>listname[start_index:stop_index]<br>(1) 分片不会修改原列表的值，输出的是一份拷贝<br>(2) 分片输出的是从 start_index 到 stop_index-1 位置的值<br>(3) 分片的start和stop位置均可省略，start省略表示从头取值，stop省略表示取值到结尾，都省略表示取列表所有的值<br>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>member = [<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;weight&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;str1&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>, <span class="hljs-string">&#x27;str3&#x27;</span>]<br>        <span class="hljs-number">0</span>    <span class="hljs-number">1</span>   <span class="hljs-number">2</span>    <span class="hljs-number">3</span>     <span class="hljs-number">4</span>     <span class="hljs-number">5</span>    <span class="hljs-number">6</span>    <span class="hljs-number">7</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>member[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>]<br>[<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>member[<span class="hljs-number">1</span>:]<br>[<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;weight&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;str1&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>, <span class="hljs-string">&#x27;str3&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>member[:<span class="hljs-number">3</span>]<br>[<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>member[:]<br>[<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;weight&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;str1&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>, <span class="hljs-string">&#x27;str3&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>member[<span class="hljs-number">5</span>:<span class="hljs-built_in">len</span>(member)] <span class="hljs-comment">#访问最后3个元素</span><br>[<span class="hljs-string">&#x27;str1&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>, <span class="hljs-string">&#x27;str3&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>member[<span class="hljs-number">0</span>:<span class="hljs-built_in">len</span>(member):<span class="hljs-number">2</span>] <span class="hljs-comment">#最后的2代表步长</span><br>[<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>, <span class="hljs-string">&#x27;class&#x27;</span>, <span class="hljs-string">&#x27;str2&#x27;</span>]<br></code></pre></td></tr></table></figure>


<p>列表常用操作符<br>(1) list元素的判断只会判断第一个元素，然后理解返回bool结果<br>(2) list支持比较、逻辑、连接(+)、重复(* )、成员关系(in)操作符<br>(3) list赋值list时需要注意加上[:]，左值会表现为一份拷贝<br>示例：<br>list2 &#x3D; list1[:]#list2是list1的一份拷贝<br>list3 &#x3D; list1 #list3是list1的一个引用(list1被修改,list3也会跟着被修改)<br>(4) dir(list) 查看list支持的所有方法：<br>listname.count(element)#element元素出现的次数<br>listname.index(element, [range_s], [rang_t])#查找元素在起止范围里第一次出现的下标位置<br>listname.reverse()#将list中的元素原地翻转<br>listname.sort()#将list中的元素进行排序，默认从小到大(修改原list内容)<br>listname.sort(reverse&#x3D;True)#排序元素，实现从大到小(修改原list内容)</p>
<h3 id="07-元组-tuple"><a href="#07-元组-tuple" class="headerlink" title="07. 元组 tuple"></a>07. 元组 tuple</h3><p>元组和列表使用上相似：<br>(1) 最大区别：列表可以任意修改和插入等操作，元组是不可改变的<br>(2) 创建：列表使用[]，元组使用()<br>元组只有1个元素时使用(element,)注意逗号<br>()可以省略，但是,逗号不能省略<br>(3) 访问：都使用name[index]来访问<br>(4) 元组在映射中当做键使用，而列表不行<br>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>temp = <span class="hljs-number">1</span>,<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">type</span> (temp)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;tuple&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">8</span> * (<span class="hljs-number">8</span>)<br><span class="hljs-number">64</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">8</span> * (<span class="hljs-number">8</span>,)<br>(<span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>)  <span class="hljs-comment">#重复元组</span><br><span class="hljs-comment">#元组元素插入</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>temp = (<span class="hljs-string">&#x27;name1&#x27;</span>,<span class="hljs-string">&#x27;name2&#x27;</span>,<span class="hljs-string">&#x27;name3&#x27;</span>,<span class="hljs-string">&#x27;name4&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>temp = temp[:<span class="hljs-number">2</span>] + (<span class="hljs-string">&#x27;new_name&#x27;</span>,) + temp[<span class="hljs-number">2</span>:]<br><span class="hljs-meta">&gt;&gt;&gt; </span>temp<br>(<span class="hljs-string">&#x27;name1&#x27;</span>, <span class="hljs-string">&#x27;name2&#x27;</span>, <span class="hljs-string">&#x27;new_name&#x27;</span>, <span class="hljs-string">&#x27;name3&#x27;</span>, <span class="hljs-string">&#x27;name4&#x27;</span>)<br></code></pre></td></tr></table></figure>


<h3 id="08-字符串-string"><a href="#08-字符串-string" class="headerlink" title="08. 字符串  string"></a>08. 字符串  string</h3><p>(1) 可以进行符号转义<br>(2) 单引号等同于双引号<br>(3) 定义字符串时使用r写在右值前面声明为原始字符串<br>(4) 使用三引号(‘’’或”””)可以指定多行字符串。并且字符串里可以包含单引号和双引号’’’<br>(5) +号运算符可以连接字符串为1个字符串<br>(6) * 号运算符可以复制多个相同字符串<br>列表和元组应用于字符串，所有标准的序列操作均适用于字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>str1 = <span class="hljs-string">&#x27;hello, python!&#x27;</span>  <span class="hljs-comment">#字符串相当于元素是字符的元组</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>str1 = str1[:<span class="hljs-number">5</span>] + <span class="hljs-string">&#x27;;&#x27;</span> + str1[<span class="hljs-number">5</span>:]<br><span class="hljs-meta">&gt;&gt;&gt; </span>str1<br><span class="hljs-string">&#x27;hello;, python!&#x27;</span><br></code></pre></td></tr></table></figure>


<p>字符串常用方法: find()&#x2F;join()&#x2F;lower()&#x2F;replace()&#x2F;split()&#x2F;strip()&#x2F;translate()&#x2F;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dir</span>(<span class="hljs-built_in">str</span>)<br>...<span class="hljs-string">&#x27;capitalize&#x27;</span>, <span class="hljs-string">&#x27;casefold&#x27;</span>, <span class="hljs-string">&#x27;center&#x27;</span>, <span class="hljs-string">&#x27;count&#x27;</span>, <span class="hljs-string">&#x27;encode&#x27;</span>, <span class="hljs-string">&#x27;endswith&#x27;</span>, <span class="hljs-string">&#x27;expandtabs&#x27;</span>, <span class="hljs-string">&#x27;find&#x27;</span>, <span class="hljs-string">&#x27;format&#x27;</span>, <span class="hljs-string">&#x27;format_map&#x27;</span>, <span class="hljs-string">&#x27;index&#x27;</span>, <span class="hljs-string">&#x27;isalnum&#x27;</span>, <span class="hljs-string">&#x27;isalpha&#x27;</span>, <span class="hljs-string">&#x27;isdecimal&#x27;</span>, <span class="hljs-string">&#x27;isdigit&#x27;</span>, <span class="hljs-string">&#x27;isidentifier&#x27;</span>, <span class="hljs-string">&#x27;islower&#x27;</span>, <span class="hljs-string">&#x27;isnumeric&#x27;</span>, <span class="hljs-string">&#x27;isprintable&#x27;</span>, <span class="hljs-string">&#x27;isspace&#x27;</span>, <span class="hljs-string">&#x27;istitle&#x27;</span>, <span class="hljs-string">&#x27;isupper&#x27;</span>, <span class="hljs-string">&#x27;join&#x27;</span>, <span class="hljs-string">&#x27;ljust&#x27;</span>, <span class="hljs-string">&#x27;lower&#x27;</span>, <span class="hljs-string">&#x27;lstrip&#x27;</span>, <span class="hljs-string">&#x27;maketrans&#x27;</span>, <span class="hljs-string">&#x27;partition&#x27;</span>, <span class="hljs-string">&#x27;replace&#x27;</span>, <span class="hljs-string">&#x27;rfind&#x27;</span>, <span class="hljs-string">&#x27;rindex&#x27;</span>, <span class="hljs-string">&#x27;rjust&#x27;</span>, <span class="hljs-string">&#x27;rpartition&#x27;</span>, <span class="hljs-string">&#x27;rsplit&#x27;</span>, <span class="hljs-string">&#x27;rstrip&#x27;</span>, <span class="hljs-string">&#x27;split&#x27;</span>, <span class="hljs-string">&#x27;splitlines&#x27;</span>, <span class="hljs-string">&#x27;startswith&#x27;</span>, <span class="hljs-string">&#x27;strip&#x27;</span>, <span class="hljs-string">&#x27;swapcase&#x27;</span>, <span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;translate&#x27;</span>, <span class="hljs-string">&#x27;upper&#x27;</span>, <span class="hljs-string">&#x27;zfill&#x27;</span>...<br></code></pre></td></tr></table></figure>

<p>【F1】可以从python的帮助文档中【索引】查找操作方法的介绍内容及举例。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">capitalize() 返回新字符串，把字符串的第一个字符改为大写<br>casefold() 返回新字符串，把整个字符串的所有字符改为小写<br>center(width) 将字符串居中，并使用空格填充至长度 width 的新字符串<br>count(sub[, start[, end]]) 返回 sub 在字符串里边出现的次数，start 和 end 参数表示范围，可选。<br>encode(encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>, errors=<span class="hljs-string">&#x27;strict&#x27;</span>) 以 encoding 指定的编码格式对字符串进行编码。<br>endswith(sub[, start[, end]]) 检查字符串是否以 sub 子字符串结束，如果是返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。start 和 end 参数表示范围，可选。<br>expandtabs([tabsize=<span class="hljs-number">8</span>]) 把字符串中的 tab 符号（t）转换为空格，如不指定参数，默认的空格数是 tabsize=<span class="hljs-number">8</span>。<br>find(sub[, start[, end]]) 检测 sub 是否包含在字符串中，如果有则返回索引值，否则返回 -<span class="hljs-number">1</span>，start 和 end 参数表示范围，可选。<br>index(sub[, start[, end]]) 跟 find 方法一样，不过如果 sub 不在 string 中会产生一个异常。<br>isalnum() 如果字符串至少有一个字符并且所有字符都是字母或数字则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>isalpha() 如果字符串至少有一个字符并且所有字符都是字母则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>isdecimal() 如果字符串只包含十进制数字则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>isdigit() 如果字符串只包含数字则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>islower() 如果字符串中至少包含一个区分大小写的字符，并且这些字符都是小写，则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>isnumeric() 如果字符串中只包含数字字符，则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>isspace() 如果字符串中只包含空格，则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>istitle() 如果字符串是标题化（所有的单词都是以大写开始，其余字母均小写），则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>isupper() 如果字符串中至少包含一个区分大小写的字符，并且这些字符都是大写，则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。<br>join(sub) 以字符串作为分隔符，插入到 sub 中所有的字符之间。<br>ljust(width) 返回一个左对齐的字符串，并使用空格填充至长度为 width 的新字符串。<br>lower() 转换字符串中所有大写字符为小写。<br>lstrip() 去掉字符串左边的所有空格<br>partition(sub) 找到子字符串 sub，把字符串分成一个 <span class="hljs-number">3</span> 元组 (pre_sub, sub, fol_sub)，如果字符串中不包含 sub 则返回 (<span class="hljs-string">&#x27;原字符串&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>replace(old, new[, count]) 把字符串中的 old 子字符串替换成 new 子字符串，如果 count 指定，则替换不超过 count 次。<br>rfind(sub[, start[, end]]) 类似于 find() 方法，不过是从右边开始查找。<br>rindex(sub[, start[, end]]) 类似于 index() 方法，不过是从右边开始。<br>rjust(width) 返回一个右对齐的字符串，并使用空格填充至长度为 width 的新字符串。<br>rpartition(sub) 类似于 partition() 方法，不过是从右边开始查找。<br>rstrip() 删除字符串末尾的空格。<br>split(sep=<span class="hljs-literal">None</span>, maxsplit=-<span class="hljs-number">1</span>) 不带参数默认是以空格为分隔符切片字符串，如果 maxsplit 参数有设置，则仅分隔 maxsplit 个子字符串，返回切片后的子字符串拼接的列表。<br>splitlines(([keepends])) 按照 <span class="hljs-string">&#x27;n&#x27;</span> 分隔，返回一个包含各行作为元素的列表，如果 keepends 参数指定，则返回前 keepends 行。<br>startswith(prefix[, start[, end]]) 检查字符串是否以 prefix 开头，是则返回 <span class="hljs-literal">True</span>，否则返回 <span class="hljs-literal">False</span>。start 和 end 参数可以指定范围检查，可选。<br>strip([chars]) 删除字符串前边和后边所有的空格，chars 参数可以定制删除的字符，可选。<br>swapcase() 翻转字符串中的大小写。<br>title() 返回标题化（所有的单词都是以大写开始，其余字母均小写）的字符串。<br>translate(table) 根据 table 的规则（可以由 <span class="hljs-built_in">str</span>.maketrans(<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>) 定制）转换字符串中的字符。<br>upper() 转换字符串中的所有小写字符为大写。<br>zfill(width) 返回长度为 width 的字符串，原字符串右对齐，前边用 <span class="hljs-number">0</span> 填充。<br></code></pre></td></tr></table></figure>

<p>字符串操作：格式化<br>(1) 通过format方法将位置参数传递给对应字段<br>(2) : 冒号表示格式化符号的开始</p>
<p>位置参数：{0~n}</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&quot;&#123;0&#125; love &#123;1&#125;,&#123;2&#125;.&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-string">&quot;I&quot;</span>, <span class="hljs-string">&quot;you&quot;</span>, <span class="hljs-string">&quot;too&quot;</span>)<br><span class="hljs-string">&#x27;I love you,too.&#x27;</span><br></code></pre></td></tr></table></figure>


<p>关键字参数：{自定义}</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&quot;&#123;a&#125; love &#123;b&#125;, &#123;c&#125;.&quot;</span>.<span class="hljs-built_in">format</span>(a=<span class="hljs-string">&quot;I&quot;</span>, b=<span class="hljs-string">&quot;you&quot;</span>, c=<span class="hljs-string">&quot;too&quot;</span>)<br><span class="hljs-string">&#x27;I love you, too.&#x27;</span><br>注意：位置参数和关键字参数可以同时使用，但位置参数必须在关键字参数的前面。<br></code></pre></td></tr></table></figure>

<p>字符串格式化符号含义<br>%c 格式化字符及其 ASCII 码<br>%s 格式化字符串<br>%d 格式化整数<br>%o 格式化无符号八进制数<br>%x 格式化无符号十六进制数<br>%X 格式化无符号十六进制数（大写）<br>%f 格式化浮点数字，可指定小数点后的精度，默认精确到小数点后6位<br>%e 用科学计数法格式化浮点数<br>%E 作用同 %e，用科学计数法格式化浮点数<br>%g 根据值的大小决定使用 %f 或 %e<br>%G 作用同 %g，根据值的大小决定使用 %f 或者 %E<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;%c&#x27;</span> % <span class="hljs-number">97</span> <span class="hljs-comment"># 此处 % 为占位符，同C语言中printf函数中的%</span><br><span class="hljs-string">&#x27;a&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;%c %c %c&#x27;</span> % (<span class="hljs-number">97</span>, <span class="hljs-number">98</span>, <span class="hljs-number">99</span>) <span class="hljs-comment">#此处的元组()小括号不能省略</span><br><span class="hljs-string">&#x27;a b c&#x27;</span><br></code></pre></td></tr></table></figure>


<p>格式化操作符辅助命令<br>m.n m 是显示的最小总宽度，n 是小数点后的位数</p>
<ul>
<li>用于左对齐</li>
</ul>
<ul>
<li>在正数前面显示加号（+）<h1 id="在八进制数前面显示-‘0o’，在十六进制数前面显示-‘0x’-或-‘0X’"><a href="#在八进制数前面显示-‘0o’，在十六进制数前面显示-‘0x’-或-‘0X’" class="headerlink" title="在八进制数前面显示 ‘0o’，在十六进制数前面显示 ‘0x’ 或 ‘0X’"></a>在八进制数前面显示 ‘0o’，在十六进制数前面显示 ‘0x’ 或 ‘0X’</h1>0 显示的数字前面填充 ‘0’ 取代空格<br>举例：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;%5.1f&#x27;</span> % <span class="hljs-number">27.658</span> <span class="hljs-comment">#m.n</span><br><span class="hljs-string">&#x27; 27.7&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;%-10d&#x27;</span> % <span class="hljs-number">5</span> <span class="hljs-comment">#填充的位数都是空格</span><br><span class="hljs-string">&#x27;5      &#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;%#x&#x27;</span> % <span class="hljs-number">160</span> <span class="hljs-comment">#对应进制显示方式</span><br><span class="hljs-string">&#x27;0xa0&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;%010d&#x27;</span> % <span class="hljs-number">5</span> <span class="hljs-comment">#用0填充。&#x27;%-010d&#x27; % 5 负号的时候填充的只会是空格</span><br><span class="hljs-string">&#x27;0000000005&#x27;</span><br></code></pre></td></tr></table></figure>


<p>Python 的转义字符及其含义<br>‘ 单引号<br>“ 双引号<br>a 发出系统响铃声<br>b 退格符<br>n 换行符<br>t 横向制表符（TAB）<br>v 纵向制表符<br>r 回车符<br>f 换页符<br>o 八进制数代表的字符<br>x 十六进制数代表的字符<br>0 表示一个空字符<br> 反斜杠</p>
<h3 id="09-序列方法-sequence-method"><a href="#09-序列方法-sequence-method" class="headerlink" title="09. 序列方法 sequence method"></a>09. 序列方法 sequence method</h3><p>列表、元组、字符串的共同点：<br>(1) 都可以通过索引得到每一个元素<br>(2) 默认索引值总是从0开始<br>(3) 可以通过分片的方法得到一个范围内的元素的集合<br>(4) 有很多共同的操作符(重复*、拼接+、成员关系in&#x2F;not in等)<br>(5) 统称为序列，以下(成员函数)为序列方法</p>
<p>list()<br>list(iterable) 把一个可迭代对象转换为列表<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>b = <span class="hljs-string">&#x27;I love you.&#x27;</span> <span class="hljs-comment"># b也可以是元组 b = (1, 2, 3, 4, 5)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b = <span class="hljs-built_in">list</span>(b)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b<br>[<span class="hljs-string">&#x27;I&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>, <span class="hljs-string">&#x27;v&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>, <span class="hljs-string">&#x27;u&#x27;</span>, <span class="hljs-string">&#x27;.&#x27;</span>]<br></code></pre></td></tr></table></figure>

<p>tuple()<br>tuple(iterable) 把一个可迭代对象转换为元组<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>b = <span class="hljs-string">&#x27;I love you.&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b = <span class="hljs-built_in">tuple</span>(b)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b<br>(<span class="hljs-string">&#x27;I&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>, <span class="hljs-string">&#x27;v&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>, <span class="hljs-string">&#x27;u&#x27;</span>, <span class="hljs-string">&#x27;.&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>max(…) 返回集合或者序列中的最大值(要求类型一致)<br>min(…) 返回集合或者序列中的最小值(要求类型一致)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">max</span>(iterable, * [, default=obj, key=func]) -&gt; value<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">max</span>(arg1, arg2, * args, * [, key=func]) -&gt; value<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">18</span>, <span class="hljs-number">13</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">98</span>, <span class="hljs-number">34</span>, <span class="hljs-number">53</span>, <span class="hljs-number">76</span>, <span class="hljs-number">32</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">max</span>(numbers)<br><span class="hljs-number">76</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">min</span>(numbers)<br>-<span class="hljs-number">98</span><br></code></pre></td></tr></table></figure>


<p>sum(…) 返回序列iterable和可选参数的总和(要求类型一致)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">sum</span>(iterable, start=<span class="hljs-number">0</span>, /)<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>tuple1 = (<span class="hljs-number">3.1</span>, <span class="hljs-number">2.3</span>, <span class="hljs-number">3.4</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">sum</span>(tuple1)<br><span class="hljs-number">8.8</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">sum</span>(tuple1, <span class="hljs-number">0.2</span>) <span class="hljs-comment">#0.2为可选参数，会加在一起</span><br><span class="hljs-number">9.0</span><br></code></pre></td></tr></table></figure>


<p>sorted(…) 返回序列的排序结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">sorted</span>(iterable, /, * , key=<span class="hljs-literal">None</span>, reverse=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>tuple1 = (<span class="hljs-number">3.1</span>, <span class="hljs-number">2.3</span>, <span class="hljs-number">3.4</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">sorted</span>(tuple1)<br>[<span class="hljs-number">2.3</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">3.4</span>]<br></code></pre></td></tr></table></figure>


<p>reversed(…) 翻转一个序列的内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">reversed</span>(sequence)<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">24</span>, <span class="hljs-number">5</span>, -<span class="hljs-number">98</span>, <span class="hljs-number">54</span>, <span class="hljs-number">32</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">reversed</span>(numbers)<br>&lt;list_reverseiterator <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002C3EE5046A0</span>&gt;<span class="hljs-comment">#这种格式都是：迭代器对象</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">reversed</span>(numbers)) <span class="hljs-comment"># 将迭代器对象转换为list列表</span><br>[<span class="hljs-number">32</span>, <span class="hljs-number">54</span>, -<span class="hljs-number">98</span>, <span class="hljs-number">5</span>, <span class="hljs-number">24</span>, <span class="hljs-number">1</span>]<br></code></pre></td></tr></table></figure>


<p>enumerate(…) 生成由序列组成的元组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">enumerate</span>(iterable[, start])<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">24</span>, <span class="hljs-number">5</span>, -<span class="hljs-number">98</span>, <span class="hljs-number">54</span>, <span class="hljs-number">32</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">enumerate</span>(numbers))<br>[(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">24</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">5</span>), (<span class="hljs-number">3</span>, -<span class="hljs-number">98</span>), (<span class="hljs-number">4</span>, <span class="hljs-number">54</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">32</span>)]<br></code></pre></td></tr></table></figure>


<p>zip(…) 返回由各个参数的序列组成的元组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">zip</span>(iter1 [,iter2 [...]])<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">zip</span>(a, b)<br>&lt;<span class="hljs-built_in">zip</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002C3EE562948</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(a, b))<br>[(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>), (<span class="hljs-number">2</span>, <span class="hljs-number">5</span>), (<span class="hljs-number">3</span>, <span class="hljs-number">6</span>), (<span class="hljs-number">4</span>, <span class="hljs-number">7</span>), (<span class="hljs-number">5</span>, <span class="hljs-number">8</span>)]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> i,j <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(a, b):  <span class="hljs-comment">#并行迭代，同时迭代两个变量</span><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>(i) + <span class="hljs-string">&#x27; is &#x27;</span> + <span class="hljs-built_in">str</span>(j))<br><span class="hljs-number">1</span> <span class="hljs-keyword">is</span> <span class="hljs-number">4</span><br><span class="hljs-number">2</span> <span class="hljs-keyword">is</span> <span class="hljs-number">5</span><br><span class="hljs-number">3</span> <span class="hljs-keyword">is</span> <span class="hljs-number">6</span><br><span class="hljs-number">4</span> <span class="hljs-keyword">is</span> <span class="hljs-number">7</span><br><span class="hljs-number">5</span> <span class="hljs-keyword">is</span> <span class="hljs-number">8</span><br></code></pre></td></tr></table></figure>


<h3 id="10-函数-function"><a href="#10-函数-function" class="headerlink" title="10. 函数 function"></a>10. 函数 function</h3><p>(1) python只有函数(return)没有过程(no return)<br>(2) 函数返回多个值的时候，使用list列表或tuple元组进行返回<br>(3) 局部变量和全局变量的规则同C语言<br>(4) 在函数内部使用 global 修饰变量，使函数可以修改同名的全局变量<br>(5) 函数嵌套时，内部函数的作用域都在外部函数之内，出了外部函数就不能被调用</p>
<p>函数定义和调用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">function_name</span>():<br><span class="hljs-comment">#函数体内容</span><br>function_name() <span class="hljs-comment">#函数调用，执行函数体的内容</span><br></code></pre></td></tr></table></figure>


<p>函数返回值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">function_name</span>():<br><span class="hljs-comment">#函数体中返回</span><br><span class="hljs-keyword">return</span> value<br><span class="hljs-built_in">print</span>(function_name()) <span class="hljs-comment">#调用函数并打印其返回值</span><br></code></pre></td></tr></table></figure>


<p>函数参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">function_name</span>(<span class="hljs-params">param</span>): <span class="hljs-comment">#形参：多个参数使用,逗号隔开</span><br><span class="hljs-comment">#函数体使用参数param</span><br>function_name(parameter) <span class="hljs-comment">#实参：传递实际参数</span><br></code></pre></td></tr></table></figure>


<p>函数文档<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_sec_func</span>(<span class="hljs-params">name</span>):<br><span class="hljs-string">&#x27;function document.&#x27;</span><span class="hljs-comment">#函数文档部分，单引号引起来即可</span><br><span class="hljs-built_in">print</span>(name)<br><span class="hljs-meta">&gt;&gt;&gt; </span>my_sec_func(<span class="hljs-string">&#x27;myname&#x27;</span>)<br>myname<br><span class="hljs-meta">&gt;&gt;&gt; </span>my_sec_func.__doc__  <span class="hljs-comment">#打印输出函数文档部分</span><br><span class="hljs-string">&#x27;function document.&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">help</span>(my_sec_func)<br>Help on function my_sec_func <span class="hljs-keyword">in</span> module __main__:<br>my_sec_func(name)<br>  function document.<br></code></pre></td></tr></table></figure>


<p>关键字参数与默认参数<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">say_some</span>(<span class="hljs-params">name, words</span>):<br><span class="hljs-comment">#&gt;&gt; def say_some(name=&#x27;abc&#x27;, words=&#x27;string&#x27;): #形参可设置默认值</span><br><span class="hljs-built_in">print</span>(name + <span class="hljs-string">&#x27; -&gt; &#x27;</span> + words)<br><span class="hljs-meta">&gt;&gt;&gt; </span>say_some(<span class="hljs-string">&#x27;Jan&#x27;</span>, <span class="hljs-string">&#x27;learning python.&#x27;</span>)<br>Jan -&gt; learning python.<br><span class="hljs-meta">&gt;&gt;&gt; </span>say_some(words=<span class="hljs-string">&#x27;learning python.&#x27;</span>, name=<span class="hljs-string">&#x27;Jan&#x27;</span>) <span class="hljs-comment">#指定形参对应实参</span><br>Jan -&gt; learning python.<br><span class="hljs-comment">#&gt;&gt;&gt; say_some()</span><br><span class="hljs-comment">#abc -&gt; string</span><br></code></pre></td></tr></table></figure>


<p><code>*params</code>搜集其余的位置参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">*params</span>): <span class="hljs-comment"># *params把实参打包为元组</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;len = &#x27;</span>, <span class="hljs-built_in">len</span>(params))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;second params = &#x27;</span>, params[<span class="hljs-number">1</span>])<br><span class="hljs-meta">&gt;&gt;&gt; </span>test(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Jan&#x27;</span>, <span class="hljs-number">3.14</span>)<br><span class="hljs-built_in">len</span> =  <span class="hljs-number">3</span><br>second params =  Jan<br><span class="hljs-comment">#搜集参数param加上普通形参</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">*params, tmp</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;len = &#x27;</span>, <span class="hljs-built_in">len</span>(params))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;second params = &#x27;</span>, params[<span class="hljs-number">1</span>])<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;tmp = &#x27;</span>, tmp)<br><span class="hljs-meta">&gt;&gt;&gt; </span>test(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;Jan&#x27;</span>, <span class="hljs-number">3.14</span>, tmp = <span class="hljs-number">520</span>) <span class="hljs-comment">#注意传参需要单独指定</span><br><span class="hljs-built_in">len</span> =  <span class="hljs-number">3</span><br>second params =  Jan<br>tmp =  <span class="hljs-number">520</span><br></code></pre></td></tr></table></figure>


<p>global 关键字<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>cnt = <span class="hljs-number">5</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">my_func</span>():<br><span class="hljs-keyword">global</span> cnt<br>cnt= <span class="hljs-number">10</span><br><span class="hljs-built_in">print</span>(cnt)<br><span class="hljs-meta">&gt;&gt;&gt; </span>my_func()<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(cnt)<br><span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>


<p>函数嵌套<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">func1</span>():<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;func1 called...&#x27;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func2</span>():<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;func2 called...&#x27;</span>)<br>func2()<br><span class="hljs-meta">&gt;&gt;&gt; </span>func1() <span class="hljs-comment">#调用func1</span><br>func1 called...<br>func2 called...<br></code></pre></td></tr></table></figure>


<p>闭包closure<br>举例1：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">funX</span>(<span class="hljs-params">x</span>):<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">funY</span>(<span class="hljs-params">y</span>):<br><span class="hljs-keyword">return</span> x * y<br><span class="hljs-keyword">return</span> funY<br><span class="hljs-meta">&gt;&gt;&gt; </span>i = funX(<span class="hljs-number">8</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>i<br>&lt;function funX.&lt;<span class="hljs-built_in">locals</span>&gt;.funY at <span class="hljs-number">0x000001EFE75E87B8</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">type</span>(i)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;function&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>i(<span class="hljs-number">5</span>)<br><span class="hljs-number">40</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>funX(<span class="hljs-number">8</span>)(<span class="hljs-number">5</span>)<br><span class="hljs-number">40</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>funY(<span class="hljs-number">5</span>) <span class="hljs-comment">#不可被调用，解决办法有2：list或者nonlocal</span><br>举例<span class="hljs-number">2</span> - <span class="hljs-built_in">list</span>：<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>x = [<span class="hljs-number">5</span>] <span class="hljs-comment">#对func2函数来说x是全局变量，在func2中没有定义x，是用list即可安全</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun2</span>():<br>x[<span class="hljs-number">0</span>] *= x[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">return</span> x[<span class="hljs-number">0</span>]<br><span class="hljs-keyword">return</span> fun2()<br><span class="hljs-meta">&gt;&gt;&gt; </span>fun1()<br><span class="hljs-number">25</span><br>举例<span class="hljs-number">2</span> - <span class="hljs-keyword">nonlocal</span>：<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun1</span>():<br>x = <span class="hljs-number">5</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun2</span>():<br><span class="hljs-keyword">nonlocal</span> x <span class="hljs-comment">#在内部函数中声明x为非局部变量，再调用func1()也是安全的</span><br>x *= x<br><span class="hljs-keyword">return</span> x<br><span class="hljs-keyword">return</span> fun2()<br><span class="hljs-meta">&gt;&gt;&gt; </span>fun1()<br><span class="hljs-number">25</span><br></code></pre></td></tr></table></figure>


<p>lambda 表达式(匿名函数)<br>(1) 不需要考虑函数名的命名问题<br>(2) 极大简化函数编写的步骤<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">ds</span>(<span class="hljs-params">x</span>):<br><span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*x + <span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>ds(<span class="hljs-number">5</span>)<br><span class="hljs-number">11</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">lambda</span> x : <span class="hljs-number">2</span>*x + <span class="hljs-number">1</span><br>&lt;function &lt;<span class="hljs-keyword">lambda</span>&gt; at <span class="hljs-number">0x000002170B3D87B8</span>&gt; <span class="hljs-comment">#可以理解为返回的是C语言的函数指针</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>g = <span class="hljs-keyword">lambda</span> x : <span class="hljs-number">2</span>*x + <span class="hljs-number">1</span> <span class="hljs-comment">#赋值后，传参即可，g相当于接收了匿名函数</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>g(<span class="hljs-number">5</span>)<br><span class="hljs-number">11</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>g = <span class="hljs-keyword">lambda</span> x, y : x+y <span class="hljs-comment">#lambda匿名函数多个参数</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>g(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>


<p>两个牛逼的BIF：filter和map<br>(1) filter 过滤：返回其函数为真的元素的列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">filter</span>(function <span class="hljs-keyword">or</span> <span class="hljs-literal">None</span>, iterable)<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">filter</span>(<span class="hljs-literal">None</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>])<br>&lt;<span class="hljs-built_in">filter</span> <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000001CE5BCB0710</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-literal">None</span>, [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">False</span>, <span class="hljs-literal">True</span>]))<br>[<span class="hljs-number">1</span>, <span class="hljs-literal">True</span>] <span class="hljs-comment">#验证filter过滤的是非true的内容</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">odd</span>(<span class="hljs-params">x</span>):<br><span class="hljs-keyword">return</span> x % <span class="hljs-number">2</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>temp = <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>show = <span class="hljs-built_in">filter</span>(odd, temp)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(show)<br>[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(<span class="hljs-keyword">lambda</span> x : x % <span class="hljs-number">2</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)))  <span class="hljs-comment">#简化一行实现求奇数</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>]<br></code></pre></td></tr></table></figure>

<p>(2) map 映射：对序列中每个元素都应用函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(<span class="hljs-keyword">lambda</span> x : x + <span class="hljs-number">2</span>, <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)))<br>[<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]<br></code></pre></td></tr></table></figure>



<pre><code class="hljs">    -2017.08.28         -- 
</code></pre>
<h3 id="11-递归-recursion"><a href="#11-递归-recursion" class="headerlink" title="11. 递归 recursion"></a>11. 递归 recursion</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#递归求阶乘：</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">factorial</span>(<span class="hljs-params">n</span>):<br>  <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> <span class="hljs-comment">#(1)必须包含退出条件，同C语言</span><br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">return</span> n * factorial(n-<span class="hljs-number">1</span>) <span class="hljs-comment">#(2)必须调用函数自身，同C语言</span><br>number = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入一个正整数：&quot;</span>))<br>result = factorial(number)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%d 的阶乘为：%d&quot;</span> % (number, result))<br><span class="hljs-comment">#运行：</span><br>请输入一个正整数：<span class="hljs-number">10</span><br><span class="hljs-number">10</span> 的阶乘为：<span class="hljs-number">3628800</span><br></code></pre></td></tr></table></figure>


<p>斐波那契数列(递归)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fab</span>(<span class="hljs-params">n</span>):<br>  <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">1</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;input error!&quot;</span>)<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>  <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span> <span class="hljs-keyword">or</span> n == <span class="hljs-number">2</span>:<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-keyword">return</span> fab(n-<span class="hljs-number">1</span>) + fab(n-<span class="hljs-number">2</span>)<br>num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;请输入一个数字：&quot;</span>))<br>result = fab(num)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;斐波那契数列结果为：%d&quot;</span> % result)<br></code></pre></td></tr></table></figure>


<p>汉诺塔游戏(递归)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">hanoi</span>(<span class="hljs-params">n, x, y, z</span>):<br>  <span class="hljs-keyword">if</span> n == <span class="hljs-number">1</span>:<br>    <span class="hljs-built_in">print</span>(x, <span class="hljs-string">&#x27;-- &gt;&#x27;</span>, z)<br>  <span class="hljs-keyword">else</span>:<br>    hanoi(n-<span class="hljs-number">1</span>, x, y, z)   <span class="hljs-comment">#将前n-1个盘子从x移动到y上</span><br>    <span class="hljs-built_in">print</span>(x, <span class="hljs-string">&#x27;-- &gt;&#x27;</span>, z)    <span class="hljs-comment">#将最底下的最后一个盘子从x移动到z上</span><br>    hanoi(n-<span class="hljs-number">1</span>, y, x, z)   <span class="hljs-comment">#将y上的n-1个盘子移动到z上</span><br><br><br>n = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入汉诺塔的层数：&#x27;</span>))<br>hanoi(n, <span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-string">&#x27;z&#x27;</span>)<br></code></pre></td></tr></table></figure>




<pre><code class="hljs">    -2017.08.29         -- 
</code></pre>
<h3 id="12-字典-dict"><a href="#12-字典-dict" class="headerlink" title="12. 字典 dict"></a>12. 字典 dict</h3><p>(1) 字典是一种映射类型（key:value 键值映射项），类型名为 dict<br>(2) 字典的表示使用{}大括号，元素映射之间使用:冒号，使用dictname[]访问字典映射的值<br>(3) 新建字典有两种方法：三层小括号，一层小括号中key&#x3D;value<br>(4) 字典中的键值映射项是无序的，popitem时是随机弹出<br>(5) 字典基本操作：<br>len(d) 返回d中项的数量<br>d[k] 返回映射到键k上的值<br>d[k]&#x3D;v 将值v映射到键k上<br>del d[k] 删除键为k的项<br>k in d 检查d中是否含有键为k的项<br>(6) 字典常用方法: clear()&#x2F;copy()&#x2F;fromkeys()&#x2F;get()&#x2F;has_key()&#x2F;items()&#x2F;iteritems()&#x2F;keys()&#x2F;iterkeys()&#x2F;pop()&#x2F;popitem()&#x2F;setdefault()&#x2F;update()&#x2F;values()&#x2F;itervalues()</p>
<p>映射关系示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>brand = [<span class="hljs-string">&#x27;李宁&#x27;</span>, <span class="hljs-string">&#x27;耐克&#x27;</span>, <span class="hljs-string">&#x27;阿迪达斯&#x27;</span>, <span class="hljs-string">&#x27;xx工作室&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>slogan = [<span class="hljs-string">&#x27;一切皆有可能&#x27;</span>, <span class="hljs-string">&#x27;Just do it&#x27;</span>, <span class="hljs-string">&#x27;Impossible is nothing&#x27;</span>, <span class="hljs-string">&#x27;让编程改变世界&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;鱼c工作室的口号是: &#x27;</span>, slogan[brand.index(<span class="hljs-string">&#x27;xx工作室&#x27;</span>)])<br>xx工作室的口号是:  让编程改变世界<br><span class="hljs-comment">#使用字典来完成映射工作</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1 = &#123;<span class="hljs-string">&#x27;李宁&#x27;</span>:<span class="hljs-string">&#x27;一切皆有可能&#x27;</span>, <span class="hljs-string">&#x27;耐克&#x27;</span>:<span class="hljs-string">&#x27;Just do it&#x27;</span>, <span class="hljs-string">&#x27;阿迪达斯&#x27;</span>:<span class="hljs-string">&#x27;Impossible is nothing&#x27;</span>, <span class="hljs-string">&#x27;xx工作室&#x27;</span>:<span class="hljs-string">&#x27;让编程改变世界&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;xx工作室的口号是: &#x27;</span>, dict1[<span class="hljs-string">&#x27;xx工作室&#x27;</span>])<br>xx工作室的口号是:  让编程改变世界<br><span class="hljs-comment">#新建一个字典方法1：dict(((key1, value1), (key2, value2), ...))</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dictname = <span class="hljs-built_in">dict</span>(((<span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-number">1</span>), (<span class="hljs-string">&#x27;u&#x27;</span>, <span class="hljs-number">2</span>), (<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">3</span>), (<span class="hljs-string">&#x27;n&#x27;</span>, <span class="hljs-number">4</span>)))<br><span class="hljs-meta">&gt;&gt;&gt; </span>dictname<br>&#123;<span class="hljs-string">&#x27;u&#x27;</span>: <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;y&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;n&#x27;</span>: <span class="hljs-number">4</span>&#125;<br><span class="hljs-comment">#新建一个字典方法2：(key1=value1, key2=value2, ...)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dictname = <span class="hljs-built_in">dict</span>(苍井空=<span class="hljs-string">&#x27;让AV改变宅男&#x27;</span>, 工作室=<span class="hljs-string">&#x27;让编程改变世界&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>dictname<br>&#123;<span class="hljs-string">&#x27;工作室&#x27;</span>: <span class="hljs-string">&#x27;让编程改变世界&#x27;</span>, <span class="hljs-string">&#x27;苍井空&#x27;</span>: <span class="hljs-string">&#x27;让AV改变宅男&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>dictname[<span class="hljs-string">&#x27;苍井空&#x27;</span>]<br><span class="hljs-string">&#x27;让AV改变宅男&#x27;</span><br><span class="hljs-comment">#字典中新增映射元素</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dictname[<span class="hljs-string">&#x27;爱迪生&#x27;</span>] = <span class="hljs-string">&#x27;天才是99%的汗水+1%的灵感，但这1%的灵感比99%的汗水更重要。&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dictname<br>&#123;<span class="hljs-string">&#x27;工作室&#x27;</span>: <span class="hljs-string">&#x27;让编程改变世界&#x27;</span>, <span class="hljs-string">&#x27;爱迪生&#x27;</span>: <span class="hljs-string">&#x27;天才是99%的汗水+1%的灵感，但这1%的灵感比99%的汗水更重要。&#x27;</span>, <span class="hljs-string">&#x27;苍井空&#x27;</span>: <span class="hljs-string">&#x27;让AV改变宅男&#x27;</span>&#125;<br></code></pre></td></tr></table></figure>


<p>字典中键、值、键值映射项的访问</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dict1 = dict1.fromkeys(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>), <span class="hljs-string">&#x27;赞&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1<br>&#123;<span class="hljs-number">0</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">1</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">6</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">8</span>: <span class="hljs-string">&#x27;赞&#x27;</span>, <span class="hljs-number">9</span>: <span class="hljs-string">&#x27;赞&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> eachKey <span class="hljs-keyword">in</span> dict1.keys():<br><span class="hljs-built_in">print</span>(eachKey, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-number">0</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> eachValue <span class="hljs-keyword">in</span> dict1.values():<br><span class="hljs-built_in">print</span>(eachValue, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>赞 赞 赞 赞 赞 赞 赞 赞 赞<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> eachItems <span class="hljs-keyword">in</span> dict1.items():<br><span class="hljs-built_in">print</span>(eachItems, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">4</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">7</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">8</span>, <span class="hljs-string">&#x27;赞&#x27;</span>) (<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;赞&#x27;</span>)<br></code></pre></td></tr></table></figure>


<p>fromkeys(…)  创建并返回一个新的字典<br>dictname.fromkeys(S[, V])<br>@S key；@V value 可选参数<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dict1 = &#123;&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.fromkeys((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>))<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-literal">None</span>, <span class="hljs-number">2</span>: <span class="hljs-literal">None</span>, <span class="hljs-number">3</span>: <span class="hljs-literal">None</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.fromkeys((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), <span class="hljs-string">&#x27;number&#x27;</span>)<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;number&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;number&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;number&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.fromkeys((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>))<br>&#123;<span class="hljs-number">1</span>: (<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>), <span class="hljs-number">2</span>: (<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>), <span class="hljs-number">3</span>: (<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>)&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.fromkeys((<span class="hljs-number">1</span>, <span class="hljs-number">3</span>), <span class="hljs-string">&#x27;num&#x27;</span>)<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;num&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;num&#x27;</span>&#125;  <span class="hljs-comment">#还是返回新的字典，并不会修改dict1</span><br></code></pre></td></tr></table></figure>


<p>get(…)  从字典中找到key的映射值value<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dict1 = <span class="hljs-built_in">dict</span>.fromkeys(<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>), <span class="hljs-string">&#x27;Yes!&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1<br>&#123;<span class="hljs-number">0</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">1</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">6</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">7</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">8</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>, <span class="hljs-number">9</span>: <span class="hljs-string">&#x27;Yes!&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.get(<span class="hljs-number">10</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(dict1.get(<span class="hljs-number">10</span>))<br><span class="hljs-literal">None</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.get(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;木有&#x27;</span>)<br><span class="hljs-string">&#x27;木有&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.get(<span class="hljs-number">9</span>, <span class="hljs-string">&#x27;木有&#x27;</span>)<br><span class="hljs-string">&#x27;Yes!&#x27;</span><br></code></pre></td></tr></table></figure>

<p>setdefault(…)  类似于get但在字典里如果找不到的话会将映射项添加到字典中<br>dictname.setdefault(key, value)<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>a.setdefault(<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;小白&#x27;</span>)<br><span class="hljs-string">&#x27;小白&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>, <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;小白&#x27;</span>&#125;<br></code></pre></td></tr></table></figure>


<p>clear()  清空一个字典(包括使用当前字典赋值的其他字典)<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>dict1.clear()<br><span class="hljs-meta">&gt;&gt;&gt; </span>dict1<br>&#123;&#125;<br></code></pre></td></tr></table></figure>


<p>copy()  拷贝一个字典(浅拷贝，不受字典修改影响)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = &#123;<span class="hljs-number">1</span>:<span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>:<span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>:<span class="hljs-string">&#x27;three&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = a.copy()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = a <span class="hljs-comment">#相当于C的指针，C++的引用，修改字典c的值会同时影响字典a</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>b<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>c<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(a), <span class="hljs-built_in">id</span>(b), <span class="hljs-built_in">id</span>(c))<br><span class="hljs-number">2334673012680</span> <span class="hljs-number">2334672609672</span> <span class="hljs-number">2334673012680</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c[<span class="hljs-number">4</span>] = <span class="hljs-string">&#x27;four&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>b<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>&#125;<br></code></pre></td></tr></table></figure>


<p>pop(…)  给定一个键弹出一个值<br>popitem()  随机弹出一个项(映射关系的键和值)<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>a.pop(<span class="hljs-number">2</span>)<br><span class="hljs-string">&#x27;two&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">1</span>: <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>a.popitem()<br>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;one&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>&#125;<br></code></pre></td></tr></table></figure>


<p>update(…)  使用一个子字典去更新原字典<br>dictname1.update(dictname2)<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>, <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;小白&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = &#123;<span class="hljs-string">&#x27;小白&#x27;</span>:<span class="hljs-string">&#x27;狗&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>a.update(b)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>&#123;<span class="hljs-string">&#x27;小白&#x27;</span>: <span class="hljs-string">&#x27;狗&#x27;</span>, <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;four&#x27;</span>, <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;小白&#x27;</span>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="13-集合-set"><a href="#13-集合-set" class="headerlink" title="13. 集合 set"></a>13. 集合 set</h3><p>(1) 使用{}创建的没有映射关系的字典，成为集合类型，如num &#x3D; {1, 2, 3, 4, 5}<br>(2) 集合中元素唯一，重复的数据会被自动清理掉<br>(3) 集合中元素无序，不能索引取到其元素的值<br>(4) 集合使用关键字 set([]) 来创建<br>(5) 集合支持 in 和 not in 来判断是否属于集合</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>num = &#123;&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">type</span>(num)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;<br><span class="hljs-comment">#set没有体现字典的映射</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>num1 = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">type</span>(num1)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;set&#x27;</span>&gt;<br><span class="hljs-comment">#set唯一性</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>num2 = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>num2<br>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br><span class="hljs-comment">#set无序性</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>num2[<span class="hljs-number">2</span>]<br>TypeError: <span class="hljs-string">&#x27;set&#x27;</span> <span class="hljs-built_in">object</span> does <span class="hljs-keyword">not</span> support indexing<br><span class="hljs-comment">#set关键字创建集合</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>set1 = <span class="hljs-built_in">set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>])<br><span class="hljs-meta">&gt;&gt;&gt; </span>set1<br>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br><span class="hljs-comment">#list实现set的唯一性</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>num1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>temp = []<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> num1:<br><span class="hljs-keyword">if</span> each <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> temp:<br>temp.append(each)<br><span class="hljs-meta">&gt;&gt;&gt; </span>temp<br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>]<br><span class="hljs-comment">#简化: 实现set的唯一性，并且会把set的无序性变为有序</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>num1<br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>num1 = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(num1))<br><span class="hljs-meta">&gt;&gt;&gt; </span>num1<br>[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br></code></pre></td></tr></table></figure>


<p>add(…)  往集合中加入元素<br>remove(…)  从集合中删除指定元素<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>num2<br>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>num2.add(<span class="hljs-number">6</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>num2<br>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>num2.remove(<span class="hljs-number">4</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>num2<br>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>&#125;<br></code></pre></td></tr></table></figure>


<p>frozenset(…)  将集合设置为不可变集合，frozen:冰冻的，冻结的<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>num3 = <span class="hljs-built_in">frozenset</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br><span class="hljs-meta">&gt;&gt;&gt; </span>num3<br><span class="hljs-built_in">frozenset</span>(&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;)<br><span class="hljs-meta">&gt;&gt;&gt; </span>num3.add(<span class="hljs-number">6</span>)<br>AttributeError: <span class="hljs-string">&#x27;frozenset&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;add&#x27;</span><br></code></pre></td></tr></table></figure>


<p>集合内建方法(整理出来)：<br><a target="_blank" rel="noopener" href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=45276&amp;extra=page=1&filter=typeid&typeid=403">http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=45276&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403</a></p>
<h3 id="14-文件操作-file-operation"><a href="#14-文件操作-file-operation" class="headerlink" title="14. 文件操作 file operation"></a>14. 文件操作 file operation</h3><p>open(…)  打开一个文件返回一个流对象<br>open(file, mode&#x3D;’r’, buffering&#x3D;-1, encoding&#x3D;None, errors&#x3D;None, newline&#x3D;None, closefd&#x3D;True, opener&#x3D;None)  #除了file参数，其他参数均有默认值<br>‘r’ 只读模式<br>‘w’ 写入(会覆盖已存在的文件)模式<br>‘x’ 文件存在，报异常的模式<br>‘a’ 写入(文件存在则追加)模式<br>‘b’ 二进制模式<br>‘t’ 文本模式<br>‘+’ 可读写模式(可添加到其他模式)<br>‘U’ 通用换行符支持</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#打开一个文件，注意路径的中反斜杠的转义(或用/斜杠一根即可)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;C:UsersJanDesktopIP.txt&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>f<br>&lt;_io.TextIOWrapper name=<span class="hljs-string">&#x27;C:UsersJanDesktopIP.txt&#x27;</span> mode=<span class="hljs-string">&#x27;r&#x27;</span> encoding=<span class="hljs-string">&#x27;cp936&#x27;</span>&gt;<br></code></pre></td></tr></table></figure>


<p>文件对象方法<br>(整理)<br><a target="_blank" rel="noopener" href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=45279&amp;extra=page=1&filter=typeid&typeid=403">http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=45279&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403</a><br>(1) 文件对象支持直接使用list转换读出<br>(2) 文件对象支持 for…in 的迭代方式读取</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;C:UsersJanDesktopIP.txt&#x27;</span>) <span class="hljs-comment">#f,打开的文件流对象</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f.read()<br><span class="hljs-string">&#x27;【本机】nIP：192.168.31.217n[ Ctrl + r ]ncmdnping 192.168.31.207nmstscnnn【虚拟机】 - 虚拟网络编辑器（自动） - 桥接模式nIP：192.168.31.207nlinux账户：jiangyuannlinux密码：123456n&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f.read()<br><span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f.close()<br><span class="hljs-meta">&gt;&gt;&gt; </span>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;C:UsersJanDesktopIP.txt&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>f.read(<span class="hljs-number">5</span>)<br><span class="hljs-string">&#x27;【本机】n&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f.tell()<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f.seek(<span class="hljs-number">45</span>, <span class="hljs-number">0</span>) <span class="hljs-comment">#0,文件起始位置；45,偏移字节数。从文件起始位置偏移一定量字节</span><br><span class="hljs-number">45</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f.readline()<br><span class="hljs-string">&#x27;mdn&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">list</span>(f)<br>[<span class="hljs-string">&#x27;ping 192.168.31.207n&#x27;</span>, <span class="hljs-string">&#x27;mstscn&#x27;</span>, <span class="hljs-string">&#x27;n&#x27;</span>, <span class="hljs-string">&#x27;n&#x27;</span>, <span class="hljs-string">&#x27;【虚拟机】 - 虚拟网络编辑器（自动） - 桥接模式n&#x27;</span>, <span class="hljs-string">&#x27;IP：192.168.31.207n&#x27;</span>, <span class="hljs-string">&#x27;linux账户：jiangyuann&#x27;</span>, <span class="hljs-string">&#x27;linux密码：123456n&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> each_line <span class="hljs-keyword">in</span> f:<br><span class="hljs-built_in">print</span>(each_line)<span class="hljs-comment">#逐行读取文件内容的高效方法</span><br>【本机】<br>IP：<span class="hljs-number">192.168</span><span class="hljs-number">.31</span><span class="hljs-number">.217</span><br>[ Ctrl + r ]<br>cmd<br>ping <span class="hljs-number">192.168</span><span class="hljs-number">.31</span><span class="hljs-number">.207</span><br>mstsc<br>...<br><span class="hljs-comment">#创建一个新的可写入的文件，写入内容，然后关闭文件流对象</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;C:UsersJanDesktoptest.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>f.write(<span class="hljs-string">&#x27;some lines&#x27;</span>)<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>f.close()<br></code></pre></td></tr></table></figure>

<p>任务：将文件record.txt中的数据进行分割并且按照规律保存起来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#最终代码如下：</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">save_file</span>(<span class="hljs-params">boy, girl, count</span>):<br>  <span class="hljs-comment"># 文件的分别保存操作</span><br>  file_name_boy = <span class="hljs-string">&#x27;boy_&#x27;</span> + <span class="hljs-built_in">str</span>(count) + <span class="hljs-string">&#x27;.txt&#x27;</span><br>  file_name_girl = <span class="hljs-string">&#x27;girl_&#x27;</span> + <span class="hljs-built_in">str</span>(count) + <span class="hljs-string">&#x27;.txt&#x27;</span><br><br><br>  boy_f = <span class="hljs-built_in">open</span>(file_name_boy, <span class="hljs-string">&#x27;w&#x27;</span>)<br>  girl_f = <span class="hljs-built_in">open</span>(file_name_girl, <span class="hljs-string">&#x27;w&#x27;</span>)<br><br><br>  boy_f.writelines(boy)<br>  girl_f.writelines(girl)<br><br><br>  boy_f.close()<br>  girl_f.close()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">split_file</span>(<span class="hljs-params">filename</span>):<br>  f = <span class="hljs-built_in">open</span>(filename)<br><br><br>  boy = []<br>  girl = []<br>  count = <span class="hljs-number">1</span><br><br><br>  <span class="hljs-keyword">for</span> each_line <span class="hljs-keyword">in</span> f:<br>    <span class="hljs-keyword">if</span> each_line[:<span class="hljs-number">6</span>] != <span class="hljs-string">&#x27;======&#x27;</span>:<br>      <span class="hljs-comment"># 我们再这里进行字符串分割操作</span><br>      (role, line_spoken) = each_line.split(<span class="hljs-string">&#x27;：&#x27;</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment">#中文冒号：否则会报错</span><br>      <span class="hljs-keyword">if</span> role == <span class="hljs-string">&#x27;小甲鱼&#x27;</span>:<br>        boy.append(line_spoken)<br>      <span class="hljs-keyword">if</span> role == <span class="hljs-string">&#x27;小客服&#x27;</span>:<br>        girl.append(line_spoken)<br>    <span class="hljs-keyword">else</span>:<br>      save_file(boy, girl, count)<br><br><br>      boy = []<br>      girl = []<br>      count += <span class="hljs-number">1</span><br><br><br>  save_file(boy, girl, count)<br>  f.close()<br><br><br>split_file(<span class="hljs-string">&#x27;C:UsersJanDesktoppython_studyrecord.txt&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>文件操作练习题及答案(伪代码可以保存一下)：<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/junwei0206/article/details/44988195">http://blog.csdn.net/junwei0206/article/details/44988195</a></p>
<pre><code class="hljs">    -2017.08.30         -- 
</code></pre>
<h3 id="15-模块-modules"><a href="#15-模块-modules" class="headerlink" title="15. 模块 modules"></a>15. 模块 modules</h3><p>(1) 模块是.py的python文件<br>(2) 使用模块是需要进行导入，使用关键字 import</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> random<br><span class="hljs-meta">&gt;&gt;&gt; </span>secret = random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>secret<br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>


<p>os 模块(系统模块)</p>
<p>os模块方法表格：<a target="_blank" rel="noopener" href="http://bbs.fishc.com/thread-45512-1-2.html">http://bbs.fishc.com/thread-45512-1-2.html</a></p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os<br><span class="hljs-meta">&gt;&gt;&gt; </span>os.getcwd()  <span class="hljs-comment">#输出当前工作目录</span><br><span class="hljs-string">&#x27;C:UsersJanAppDataLocalProgramsPythonPython35&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.chdir(<span class="hljs-string">&#x27;E:&#x27;</span>)  <span class="hljs-comment">#改变工作目录</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.getcwd()<br><span class="hljs-string">&#x27;E:&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.listdir(<span class="hljs-string">&#x27;E:&#x27;</span>)  <span class="hljs-comment">#列举指定目录中的文件名</span><br>[<span class="hljs-string">&#x27;$RECYCLE.BIN&#x27;</span>, <span class="hljs-string">&#x27;.cache&#x27;</span>, <span class="hljs-string">&#x27;360Downloads&#x27;</span>, <span class="hljs-string">&#x27;Jan_mi&#x27;</span>, <span class="hljs-string">&#x27;Jan个人总资料&#x27;</span>, <span class="hljs-string">&#x27;Qiyi&#x27;</span>, <span class="hljs-string">&#x27;QQMusicCache&#x27;</span>, <span class="hljs-string">&#x27;qycache&#x27;</span>, <span class="hljs-string">&#x27;System Volume Information&#x27;</span>, <span class="hljs-string">&#x27;Youku Files&#x27;</span>, <span class="hljs-string">&#x27;Youxun&#x27;</span>, <span class="hljs-string">&#x27;博客&#x27;</span>]  <span class="hljs-comment">#RECYCLE.BIN是个回收站</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.mkdir(<span class="hljs-string">&#x27;E:A&#x27;</span>)  <span class="hljs-comment">#创建单层目录，如该目录已存在抛出异常</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.mkdir(<span class="hljs-string">&#x27;E:AB&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>os.mkdir(<span class="hljs-string">&#x27;E:CD&#x27;</span>)<br>FileNotFoundError: [WinError <span class="hljs-number">3</span>] 系统找不到指定的路径。: <span class="hljs-string">&#x27;E:CD&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.remove(<span class="hljs-string">&#x27;E:ABtest.txt&#x27;</span>)  <span class="hljs-comment">#删除文件</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.rmdir(<span class="hljs-string">&#x27;E:AB&#x27;</span>)  <span class="hljs-comment">#删除单层目录，如该目录非空则抛出异常</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.system(<span class="hljs-string">&#x27;cmd&#x27;</span>)  <span class="hljs-comment">#运行系统的shell命令：windows shell窗口</span><br>-<span class="hljs-number">1073741510</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.system(<span class="hljs-string">&#x27;calc&#x27;</span>)  <span class="hljs-comment">#运行系统的shell命令：calc计算器</span><br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.curdir  <span class="hljs-comment">#当前目录（&#x27;.&#x27;）</span><br><span class="hljs-string">&#x27;.&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.listdir(os.curdir)  <span class="hljs-comment"># 等同于 os.listdir(&#x27;.&#x27;)</span><br>[<span class="hljs-string">&#x27;$RECYCLE.BIN&#x27;</span>, <span class="hljs-string">&#x27;.cache&#x27;</span>, <span class="hljs-string">&#x27;360Downloads&#x27;</span>, <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;Jan_mi&#x27;</span>, <span class="hljs-string">&#x27;Jan个人总资料&#x27;</span>, <span class="hljs-string">&#x27;Qiyi&#x27;</span>, <span class="hljs-string">&#x27;QQMusicCache&#x27;</span>, <span class="hljs-string">&#x27;qycache&#x27;</span>, <span class="hljs-string">&#x27;System Volume Information&#x27;</span>, <span class="hljs-string">&#x27;Youku Files&#x27;</span>, <span class="hljs-string">&#x27;Youxun&#x27;</span>, <span class="hljs-string">&#x27;博客&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>os.sep  <span class="hljs-comment">#输出操作系统特定的路径分隔符（Win下为&#x27;&#x27;，Linux下为&#x27;/&#x27;）</span><br><span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.linesep  <span class="hljs-comment">#当前平台使用的行终止符（Win下为&#x27;rn&#x27;，Linux下为&#x27;n&#x27;）</span><br><span class="hljs-string">&#x27;rn&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.name  <span class="hljs-comment">#指代当前使用的操作系统（包括：&#x27;posix&#x27;,  &#x27;nt&#x27;, &#x27;mac&#x27;, &#x27;os2&#x27;, &#x27;ce&#x27;, &#x27;java&#x27;）</span><br><span class="hljs-string">&#x27;nt&#x27;</span>  <span class="hljs-comment">#nt是windows系统平台</span><br></code></pre></td></tr></table></figure>


<p>os.path 模块(系统路径模块属于os的子模块)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.basename(<span class="hljs-string">&#x27;E:ABCsexy.avi&#x27;</span>)  <span class="hljs-comment">#去掉目录路径，单独返回文件名</span><br><span class="hljs-string">&#x27;sexy.avi&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.dirname(<span class="hljs-string">&#x27;E:ABCsexy.avi&#x27;</span>)  <span class="hljs-comment">#去掉文件名，单独返回目录路径</span><br><span class="hljs-string">&#x27;E:ABC&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.join(<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>)  <span class="hljs-comment">#将path1, path2...各部分组合成一个路径名</span><br><span class="hljs-string">&#x27;ABC&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.join(<span class="hljs-string">&#x27;D:&#x27;</span>, <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>)<br><span class="hljs-string">&#x27;D:ABC&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.join(<span class="hljs-string">&#x27;D:&#x27;</span>, <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>)  <span class="hljs-comment">#注意盘符需要带上斜杠</span><br><span class="hljs-string">&#x27;D:ABC&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.split(<span class="hljs-string">&#x27;E:ASEXY.AVI&#x27;</span>)  <span class="hljs-comment">#分割文件名与路径，返回(f_path, f_name)元组。</span><br>(<span class="hljs-string">&#x27;E:A&#x27;</span>, <span class="hljs-string">&#x27;SEXY.AVI&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.split(<span class="hljs-string">&#x27;E:ABC&#x27;</span>)<br>(<span class="hljs-string">&#x27;E:AB&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.splitext(<span class="hljs-string">&#x27;E:ASEXY.AVI&#x27;</span>)  <span class="hljs-comment">#分离文件名与扩展名，返回(f_name, f_extension)元组</span><br>(<span class="hljs-string">&#x27;E:ASEXY&#x27;</span>, <span class="hljs-string">&#x27;.AVI&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.getatime(<span class="hljs-string">&#x27;E:Atest.txt&#x27;</span>)  <span class="hljs-comment">#返回指定文件最近的访问时间</span><br><span class="hljs-number">1504103243.229383</span>  <span class="hljs-comment">#浮点型秒数，可用time模块的gmtime()或localtime()函数换算</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> time<br><span class="hljs-meta">&gt;&gt;&gt; </span>time.gmtime(os.path.getatime(<span class="hljs-string">&#x27;E:Atest.txt&#x27;</span>))<br>time.struct_time(tm_year=<span class="hljs-number">2017</span>, tm_mon=<span class="hljs-number">8</span>, tm_mday=<span class="hljs-number">30</span>, tm_hour=<span class="hljs-number">14</span>, tm_min=<span class="hljs-number">27</span>, tm_sec=<span class="hljs-number">23</span>, tm_wday=<span class="hljs-number">2</span>, tm_yday=<span class="hljs-number">242</span>, tm_isdst=<span class="hljs-number">0</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>time.localtime(os.path.getatime(<span class="hljs-string">&#x27;E:Atest.txt&#x27;</span>))<br>time.struct_time(tm_year=<span class="hljs-number">2017</span>, tm_mon=<span class="hljs-number">8</span>, tm_mday=<span class="hljs-number">30</span>, tm_hour=<span class="hljs-number">22</span>, tm_min=<span class="hljs-number">27</span>, tm_sec=<span class="hljs-number">23</span>, tm_wday=<span class="hljs-number">2</span>, tm_yday=<span class="hljs-number">242</span>, tm_isdst=<span class="hljs-number">0</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>time.localtime(os.path.getmtime(<span class="hljs-string">&#x27;E:Atest.txt&#x27;</span>))<br>time.struct_time(tm_year=<span class="hljs-number">2017</span>, tm_mon=<span class="hljs-number">8</span>, tm_mday=<span class="hljs-number">30</span>, tm_hour=<span class="hljs-number">22</span>, tm_min=<span class="hljs-number">30</span>, tm_sec=<span class="hljs-number">1</span>, tm_wday=<span class="hljs-number">2</span>, tm_yday=<span class="hljs-number">242</span>, tm_isdst=<span class="hljs-number">0</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>time.localtime(os.path.getctime(<span class="hljs-string">&#x27;E:Atest.txt&#x27;</span>))<br>time.struct_time(tm_year=<span class="hljs-number">2017</span>, tm_mon=<span class="hljs-number">8</span>, tm_mday=<span class="hljs-number">30</span>, tm_hour=<span class="hljs-number">22</span>, tm_min=<span class="hljs-number">27</span>, tm_sec=<span class="hljs-number">23</span>, tm_wday=<span class="hljs-number">2</span>, tm_yday=<span class="hljs-number">242</span>, tm_isdst=<span class="hljs-number">0</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.ismount(<span class="hljs-string">&#x27;E:&#x27;</span>)  <span class="hljs-comment">#判断指定路径是否存在且是一个挂载点</span><br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.ismount(<span class="hljs-string">&#x27;E:A&#x27;</span>)<br><span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure>


<p>pickle 模块(泡菜模块)<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pickle<br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list = [<span class="hljs-number">123</span>, <span class="hljs-number">3.14</span>, <span class="hljs-string">&#x27;名字&#x27;</span>, [<span class="hljs-string">&#x27;another list&#x27;</span>]]<br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle_f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;E:Amy_list.pkl&#x27;</span>, <span class="hljs-string">&#x27;wb&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle.dump(my_list, pickle_f)  <span class="hljs-comment">#将list的内容倾倒入文件流对象中</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle_f.close()<br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle_f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;E:Amy_list.pkl&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list2 = pickle.load(pickle_f)  <span class="hljs-comment">#将.pkl文件的内容装载到list中</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(my_list2)<br>[<span class="hljs-number">123</span>, <span class="hljs-number">3.14</span>, <span class="hljs-string">&#x27;名字&#x27;</span>, [<span class="hljs-string">&#x27;another list&#x27;</span>]]<br><br><br><span class="hljs-meta">&gt;&gt;&gt; </span>city = &#123;<span class="hljs-string">&#x27;城市1&#x27;</span>:<span class="hljs-string">&#x27;000001&#x27;</span>, <span class="hljs-string">&#x27;城市2&#x27;</span>:<span class="hljs-string">&#x27;000002&#x27;</span>, <span class="hljs-string">&#x27;城市n&#x27;</span>:<span class="hljs-string">&#x27;999999&#x27;</span>&#125;  <span class="hljs-comment">#此字典映射有70k这么大</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pickle<br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle_f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;E:Acity.pkl&#x27;</span>, <span class="hljs-string">&#x27;wb&#x27;</span>)  <span class="hljs-comment">#将70k的字典映射写入文件</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle.dump(city, pickle_f)<br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle_f.close()<br><span class="hljs-meta">&gt;&gt;&gt; </span>pickle_file = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;E:Acity.pkl&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>)  <span class="hljs-comment">#使用字典的时候打开文件装载即可</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>city = pickle.load(pickle_file)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(city)<br>&#123;<span class="hljs-string">&#x27;城市2&#x27;</span>: <span class="hljs-string">&#x27;000002&#x27;</span>, <span class="hljs-string">&#x27;城市n&#x27;</span>: <span class="hljs-string">&#x27;999999&#x27;</span>, <span class="hljs-string">&#x27;城市1&#x27;</span>: <span class="hljs-string">&#x27;000001&#x27;</span>&#125;<br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    -2017.08.31         -- 
</code></pre>
<h3 id="16-异常-exception"><a href="#16-异常-exception" class="headerlink" title="16. 异常 exception"></a>16. 异常 exception</h3><p>异常汇总</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python">AssertionError 断言语句（<span class="hljs-keyword">assert</span>）失败&lt;eg1&gt;<br>AttributeError 尝试访问未知的对象属性&lt;eg2&gt;<br>EOFError 用户输入文件末尾标志EOF（Ctrl+d） <br>FloatingPointError 浮点计算错误 <br>GeneratorExit generator.close()方法被调用的时候 <br>ImportError 导入模块失败的时候 <br>IndexError 索引超出序列的范围&lt;eg3&gt;<br>KeyError 字典中查找一个不存在的关键字&lt;eg4&gt;<br>KeyboardInterrupt 用户输入中断键（Ctrl+c） <br>MemoryError 内存溢出（可通过删除对象释放内存） <br>NameError 尝试访问一个不存在的变量 <br>NotImplementedError 尚未实现的方法 <br>OSError 操作系统产生的异常（例如打开一个不存在的文件） <br>OverflowError 数值运算超出最大限制 <br>ReferenceError 弱引用（weak reference）试图访问一个已经被垃圾回收机制回收了的对象 <br>RuntimeError 一般的运行时错误 <br>StopIteration 迭代器没有更多的值 <br>SyntaxError Python的语法错误 <br>IndentationError 缩进错误 <br>TabError Tab和空格混合使用 <br>SystemError Python编译器系统错误 <br>SystemExit Python编译器进程被关闭 <br>TypeError 不同类型间的无效操作 <br>UnboundLocalError 访问一个未初始化的本地变量（NameError的子类） <br>UnicodeError Unicode相关的错误（ValueError的子类） <br>UnicodeEncodeError Unicode编码时的错误（UnicodeError的子类） <br>UnicodeDecodeError Unicode解码时的错误（UnicodeError的子类） <br>UnicodeTranslateError Unicode转换时的错误（UnicodeError的子类） <br>ValueError 传入无效的参数 <br>ZeroDivisionError 除数为零 <br></code></pre></td></tr></table></figure>


<p>部分举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>my_list = [<span class="hljs-string">&#x27;我是帅哥&#x27;</span>, <span class="hljs-string">&#x27;你是美女&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(my_list) &gt; <span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list.pop()<br><span class="hljs-string">&#x27;你是美女&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list.pop()<br><span class="hljs-string">&#x27;我是帅哥&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(my_list) &gt; <span class="hljs-number">0</span><br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#856&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(my_list) &gt; <span class="hljs-number">0</span><br>AssertionError <span class="hljs-comment">#断言语句（assert）失败</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list.abcd<br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#857&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  my_list.abcd<br>AttributeError: <span class="hljs-string">&#x27;list&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;abcd&#x27;</span><span class="hljs-comment">#尝试访问未知的对象属性</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list[<span class="hljs-number">3</span>]<br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#859&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  my_list[<span class="hljs-number">3</span>]<br>IndexError: <span class="hljs-built_in">list</span> index out of <span class="hljs-built_in">range</span> <span class="hljs-comment">#索引超出序列的范围</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_list[<span class="hljs-number">2</span>]<br><span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_dict = &#123;<span class="hljs-string">&#x27;one&#x27;</span>:<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;two&#x27;</span>:<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;three&#x27;</span>:<span class="hljs-number">3</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>my_dict[<span class="hljs-string">&#x27;one&#x27;</span>]<br><span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_dict[<span class="hljs-string">&#x27;four&#x27;</span>]<br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#863&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  my_dict[<span class="hljs-string">&#x27;four&#x27;</span>]<br>KeyError: <span class="hljs-string">&#x27;four&#x27;</span> <span class="hljs-comment">#字典中查找一个不存在的关键字</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>my_dict.get(<span class="hljs-string">&#x27;four&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment">#dict.get(...)方法比较安全合适</span><br></code></pre></td></tr></table></figure>


<p>异常检测与处理<br>(1) try语句一旦检测出现异常，则剩下的其他代码则不会执行<br>(2) raise Exception_name 主动引发一个自定义异常名字的异常，可定义异常描述</p>
<p>try:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#检测范围</span><br><span class="hljs-keyword">except</span> Exception[<span class="hljs-keyword">as</span> reason]:<br><span class="hljs-comment">#出现异常(Exception)后的处理代码</span><br><span class="hljs-keyword">finally</span>:<br><span class="hljs-comment">#无论如何都会被执行的代码(收尾工作)</span><br></code></pre></td></tr></table></figure>


<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;我为什么是一个文件.txt&#x27;</span>)<br>  <span class="hljs-built_in">print</span>(f.read())<br>  f.close()<br><span class="hljs-keyword">except</span> OSError:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;文件出错啦T_T&#x27;</span>)<br>运行：<br>文件出错啦T_T<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;我为什么是一个文件.txt&#x27;</span>)<br>  <span class="hljs-built_in">print</span>(f.read())<br>  f.close()<br><span class="hljs-keyword">except</span> OSError <span class="hljs-keyword">as</span> reason:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;文件出错啦T_Tn错误的原因是：&#x27;</span> + <span class="hljs-built_in">str</span>(reason))<br>运行：<br>文件出错啦T_T<br>错误的原因是：[Errno <span class="hljs-number">2</span>] No such file <span class="hljs-keyword">or</span> directory: <span class="hljs-string">&#x27;我为什么是一个文件.txt&#x27;</span><br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  <span class="hljs-built_in">sum</span> = <span class="hljs-number">1</span> + <span class="hljs-string">&#x27;1&#x27;</span><br>  f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;我为什么是一个文件.txt&#x27;</span>)<br>  <span class="hljs-built_in">print</span>(f.read())<br>  f.close()<br><span class="hljs-keyword">except</span> (OSError, TypeError):  <span class="hljs-comment">#多个异常同时捕获</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;出错啦T_T&#x27;</span>)<br>运行：出错啦T_T<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;我为什么是一个文件.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>)<br>  <span class="hljs-built_in">print</span>(f.write(<span class="hljs-string">&#x27;我存在了！&#x27;</span>))  <span class="hljs-comment">#没有finally时并不会写入文件</span><br>  <span class="hljs-built_in">sum</span> = <span class="hljs-number">1</span> + <span class="hljs-string">&#x27;1&#x27;</span><br>  f.close()<br><span class="hljs-keyword">except</span> (OSError, TypeError):<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;出错啦T_T&#x27;</span>)<br><span class="hljs-keyword">finally</span>:<br>  f.close()<br>运行：<br><span class="hljs-number">5</span><br>出错啦T_T<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">raise</span> ZeroDivisionError(<span class="hljs-string">&#x27;除数为0的异常&#x27;</span>)<br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#872&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  <span class="hljs-keyword">raise</span> ZeroDivisionError(<span class="hljs-string">&#x27;除数为0的异常&#x27;</span>)<br>ZeroDivisionError: 除数为<span class="hljs-number">0</span>的异常<br></code></pre></td></tr></table></figure>

<h3 id="17-丰富的esle-简洁的with"><a href="#17-丰富的esle-简洁的with" class="headerlink" title="17. 丰富的esle-简洁的with"></a>17. 丰富的esle-简洁的with</h3><p>else</p>
<p>举例：while-else &#x2F; for-else</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">showMaxFactor</span>(<span class="hljs-params">num</span>):<br>  count = num // <span class="hljs-number">2</span><br>  <span class="hljs-keyword">while</span> count &gt; <span class="hljs-number">1</span>:<br>    <span class="hljs-keyword">if</span> num % count == <span class="hljs-number">0</span>:<br>      <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d最大的约数是%d&#x27;</span> % (num, count))<br>      <span class="hljs-keyword">break</span><br>    count -= <span class="hljs-number">1</span><br>  <span class="hljs-keyword">else</span>: <span class="hljs-comment">#while循环完没有break就会执行else</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;%d是素数！&#x27;</span> % num)<br><br><br><br>num = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入一个数：&#x27;</span>))<br>showMaxFactor(num)<br></code></pre></td></tr></table></figure>

<p>举例：try-else</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-built_in">int</span>(<span class="hljs-string">&#x27;123&#x27;</span>))<br><span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> reason:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;出错啦：&#x27;</span> + <span class="hljs-built_in">str</span>(reason))<br><span class="hljs-keyword">else</span>:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Good！没有任何异常。&#x27;</span>)<br>运行：<br><span class="hljs-number">123</span><br>Good！没有任何异常。<br></code></pre></td></tr></table></figure>


<p>with as</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">try</span>:<br>  <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;data.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f: <span class="hljs-comment">#比 f = open(...) 多了文件不使用时自动关闭功能</span><br>  <span class="hljs-keyword">for</span> each_line <span class="hljs-keyword">in</span> f:<br>    <span class="hljs-built_in">print</span>(each_line)<br><span class="hljs-keyword">except</span> OSError <span class="hljs-keyword">as</span> reason:<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;出错啦：&#x27;</span> + <span class="hljs-built_in">str</span>(reason))<br><span class="hljs-comment">#finally:    #有了with就不需要finally去调用关闭，会自动关闭</span><br><span class="hljs-comment">#   f.close()  #如果文件data.txt不存在就试图去关闭一个不存在的文件</span><br></code></pre></td></tr></table></figure>


<h3 id="18-图形用户界面-EasyGui"><a href="#18-图形用户界面-EasyGui" class="headerlink" title="18. 图形用户界面 EasyGui"></a>18. 图形用户界面 EasyGui</h3><p>EasyGui官网：<a target="_blank" rel="noopener" href="http://easygui.sourceforge.net/">http://easygui.sourceforge.net</a><br>中文的教学文档：<a target="_blank" rel="noopener" href="http://bbs.fishc.com/thread-46069-1-1.html">http://bbs.fishc.com/thread-46069-1-1.html</a> (要看完并实操)<br>模块库：easygui-0.96.zip</p>
<p>安装方法：<br>(1) 使用命令窗口切换到easygui-docs-0.96的目录下<br>(2) 【Windows下】执行C:Python33python.exe setup.py install</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; cd Desktop<br>&gt; cd puthon_studyeasygui-<span class="hljs-number">0.96</span><br><span class="hljs-comment">#然后修改C:Program Files (x86)pythonpython.exe为管理员权限：右键-兼容性-更改所有用户的设置-以管理员身份运行此程序-确定</span><br>&gt; <span class="hljs-string">&quot;C:Program Files (x86)pythonpython.exe&quot;</span> setup.py install<br><span class="hljs-comment">#生成了文件模块库C:Program Files (x86)pythonLibsite-packageseasygui.py</span><br>&gt; <span class="hljs-string">&quot;C:Program Files (x86)pythonpython.exe&quot;</span> easygui.py<br><span class="hljs-comment">#easygui的演示程序</span><br>PS: 【Linux或Mac下】sudo /Library/Framworks/Python.framework/Versions/<span class="hljs-number">3.3</span>/<span class="hljs-built_in">bin</span>/python3<span class="hljs-number">.3</span> setup.py install<br></code></pre></td></tr></table></figure>


<p>使用方法：<br>【遇到难题】import easygui 出错~！！！<br>【解决办法】<br>(1) 重装python IDLE勾选添加python路径，选择目录安装到C:python文件夹，如重装则忽略(2)，如此一来win-cmd下的python中sys.path和IDLE中的sys.path则一致了。<br>(2) 对比windows命令窗口中启动python与IDLE中python的系统路径，添加到IDLE即可。</p>
<p>windows中系统路径：<br>C:UsersJan&gt; “C:Program Files (x86)pythonpython.exe”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> sys<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path<br>[<span class="hljs-string">&#x27;&#x27;</span>, <br><span class="hljs-string">&#x27;C:Program Files (x86)pythonpython35.zip&#x27;</span>, <br><span class="hljs-string">&#x27;C:Program Files (x86)pythonDLLs&#x27;</span>, <br><span class="hljs-string">&#x27;C:Program Files (x86)pythonlib&#x27;</span>, <br><span class="hljs-string">&#x27;C:Program Files (x86)python&#x27;</span>, <br><span class="hljs-string">&#x27;C:Program Files (x86)pythonlibsite-packages&#x27;</span>]<br></code></pre></td></tr></table></figure>


<p>IDLE中系统路径：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> easygui <span class="hljs-keyword">as</span> g<br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#0&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  <span class="hljs-keyword">import</span> easygui <span class="hljs-keyword">as</span> g<br>ImportError: No module named <span class="hljs-string">&#x27;easygui&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> sys<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path<br>[<span class="hljs-string">&#x27;&#x27;</span>, <br><span class="hljs-string">&#x27;C:UsersJanAppDataLocalProgramsPythonPython35Libidlelib&#x27;</span>, <br><span class="hljs-string">&#x27;C:UsersJanAppDataLocalProgramsPythonPython35python35.zip&#x27;</span>, <br><span class="hljs-string">&#x27;C:UsersJanAppDataLocalProgramsPythonPython35DLLs&#x27;</span>, <br><span class="hljs-string">&#x27;C:UsersJanAppDataLocalProgramsPythonPython35lib&#x27;</span>, <br><span class="hljs-string">&#x27;C:UsersJanAppDataLocalProgramsPythonPython35&#x27;</span>, <br><span class="hljs-string">&#x27;C:UsersJanAppDataLocalProgramsPythonPython35libsite-packages&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path.append(<span class="hljs-string">&#x27;C:Program Files (x86)pythonpython35.zip&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path.append(<span class="hljs-string">&#x27;C:Program Files (x86)pythonDLLs&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path.append(<span class="hljs-string">&#x27;C:Program Files (x86)pythonlib&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path.append(<span class="hljs-string">&#x27;C:Program Files (x86)python&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path.append(<span class="hljs-string">&#x27;C:Program Files (x86)pythonlibsite-packages&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> easygui <span class="hljs-keyword">as</span> g  <span class="hljs-comment">#import ... as ... 导入模块的同时重定义模块名字</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>g.msgbox(<span class="hljs-string">&#x27;嗨，python！&#x27;</span>)<br><span class="hljs-string">&#x27;OK&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><br><span class="hljs-comment"># No error, success... 但每次重启IDLE都需要将windows下的sys.path进行添加。</span><br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 示例，gui界面文字小游戏</span><br><span class="hljs-keyword">import</span> easygui <span class="hljs-keyword">as</span> g<br><span class="hljs-keyword">import</span> sys<br><br><br><span class="hljs-keyword">while</span> <span class="hljs-number">1</span>:<br>    g.msgbox(<span class="hljs-string">&quot;嗨，欢迎进入第一个界面小游戏^_^&quot;</span>)<br><br><br>    msg =<span class="hljs-string">&quot;请问你希望在鱼C工作室学习到什么知识呢？&quot;</span><br>    title = <span class="hljs-string">&quot;小游戏互动&quot;</span><br>    choices = [<span class="hljs-string">&quot;谈恋爱&quot;</span>, <span class="hljs-string">&quot;编程&quot;</span>, <span class="hljs-string">&quot;OOXX&quot;</span>, <span class="hljs-string">&quot;琴棋书画&quot;</span>]<br>    <br>    choice = g.choicebox(msg, title, choices)<br><br><br>    <span class="hljs-comment"># note that we convert choice to string, in case</span><br>    <span class="hljs-comment"># the user cancelled the choice, and we got None.</span><br>    g.msgbox(<span class="hljs-string">&quot;你的选择是: &quot;</span> + <span class="hljs-built_in">str</span>(choice), <span class="hljs-string">&quot;结果&quot;</span>)<br><br><br>    msg = <span class="hljs-string">&quot;你希望重新开始小游戏吗？&quot;</span><br>    title = <span class="hljs-string">&quot;请选择&quot;</span><br>    <br>    <span class="hljs-keyword">if</span> g.ccbox(msg, title):   <span class="hljs-comment"># show a Continue/Cancel dialog</span><br>        <span class="hljs-keyword">pass</span>  <span class="hljs-comment"># user chose Continue</span><br>    <span class="hljs-keyword">else</span>:<br>        sys.exit(<span class="hljs-number">0</span>)   <span class="hljs-comment"># user chose Cancel</span><br></code></pre></td></tr></table></figure>

<pre><code class="hljs">    -2017.09.01         -- 
</code></pre>
<h3 id="19-类和对象-class-and-object"><a href="#19-类和对象-class-and-object" class="headerlink" title="19. 类和对象 class and object"></a>19. 类和对象 class and object</h3><p>面向对象(Object Oriented)<br>(1) python约定类名以大写字母开头<br>(2) 面向对象特征：封装(信息隐蔽)、继承(子类共享父类公共内容)、多态(不同对象对同一方法响应不同的行动)</p>
<p>类的示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Turtle</span>:<br><span class="hljs-comment">#属性</span><br>color = <span class="hljs-string">&#x27;green&#x27;</span><br>weight = <span class="hljs-number">60</span><br>legs = <span class="hljs-number">2</span><br>shell = <span class="hljs-literal">True</span><br>age = <span class="hljs-number">26</span><br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#方法</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">climb</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我正在学习...&#x27;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我正在奔跑...&#x27;</span>)<br></code></pre></td></tr></table></figure>


<p>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>tt = Turtle()  <span class="hljs-comment">#类Turtle的示例对象tt</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>Turtle<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.Turtle&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">type</span>(Turtle)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;type&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">type</span>(<span class="hljs-string">&#x27;abc&#x27;</span>)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;str&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>tt.climb()<br>我正在学习...<br><span class="hljs-meta">&gt;&gt;&gt; </span>tt.run()<br>我正在奔跑...<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#封装</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>list1 = [<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>list1.sort()  <span class="hljs-comment">#sort() 方法封装在list1对象中</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>list1<br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>list1.append(<span class="hljs-number">9</span>)  <span class="hljs-comment">#append() 方法封装在list1对象中</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>list1<br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>]<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#继承</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Mylist</span>(<span class="hljs-title class_ inherited__">list</span>):<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>list2 = Mylist()<br><span class="hljs-meta">&gt;&gt;&gt; </span>list2.append(<span class="hljs-number">5</span>)  <span class="hljs-comment">#list2可以使用append()方法，继承了Mylist(list)中的list参数类</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>list2.append(<span class="hljs-number">3</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>list2.append(<span class="hljs-number">7</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>list2<br>[<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>list2.sort()<br><span class="hljs-meta">&gt;&gt;&gt; </span>list2<br>[<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#多态</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我是小A&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fun</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我是小B&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a = A()<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = B()<br><span class="hljs-meta">&gt;&gt;&gt; </span>a.fun()  <span class="hljs-comment">#不同对象对同一方法响应不同的行动</span><br>我是小A<br><span class="hljs-meta">&gt;&gt;&gt; </span>b.fun()  <span class="hljs-comment">#不同对象对同一方法响应不同的行动</span><br>我是小B<br></code></pre></td></tr></table></figure>


<p>self<br>相当于C++的this指针(指向当前对象本身的地址)，表明类自身<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ball</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params">self, name</span>):  <span class="hljs-comment">#默认self的写法</span><br>self.name = name<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">kick</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment">#默认self的写法</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我叫%s, 该死的谁踢我...&#x27;</span> % self.name)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a = Ball()<br><span class="hljs-meta">&gt;&gt;&gt; </span>a.setName(<span class="hljs-string">&#x27;球A&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = Ball()<br><span class="hljs-meta">&gt;&gt;&gt; </span>b.setName(<span class="hljs-string">&#x27;球B&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = Ball()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.setName(<span class="hljs-string">&#x27;土豆&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a.kick()<br>我叫球A, 该死的谁踢我...<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.kick()<br>我叫土豆, 该死的谁踢我...<br></code></pre></td></tr></table></figure>


<p>魔法方法：<strong>init</strong>(self)<br><strong>init</strong>(self, parma1, parma2, …)<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ball</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>self.name = name<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">kick</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我叫%s，该死的，谁踢我！！&#x27;</span> % self.name)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = Ball(<span class="hljs-string">&#x27;土豆&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b.kick()<br>我叫土豆，该死的，谁踢我！！<br><span class="hljs-meta">&gt;&gt;&gt; </span>a = Ball()  <span class="hljs-comment">#__init__默认设置了name，所以必须传递name实参，否则报错</span><br>TypeError: __init__() missing <span class="hljs-number">1</span> required positional argument: <span class="hljs-string">&#x27;name&#x27;</span><br></code></pre></td></tr></table></figure>


<p>公有和私有<br>name mangling 名字改变&#x2F;名字重造<br>公有成员：默认创建的成员均为公有。<br>私有成员：<br>(1) 在变量或函数名前加上 “<code>_</code>“ 两个下划线即可。<br>(2) python中类的私有均属于伪私有，通过”<code>对象._类_变量</code>“的形式可以访问私有成员<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:<br>__name = <span class="hljs-string">&#x27;yuan.jiang&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>p = Person()<br><span class="hljs-meta">&gt;&gt;&gt; </span>p.name<br>AttributeError: <span class="hljs-string">&#x27;Person&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;name&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>p.__name<br>AttributeError: <span class="hljs-string">&#x27;Person&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;__name&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:<br>__name = <span class="hljs-string">&#x27;yuan.jiang&#x27;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params">self</span>):<br><span class="hljs-keyword">return</span> self.__name<br><span class="hljs-meta">&gt;&gt;&gt; </span>p = Person()<br><span class="hljs-meta">&gt;&gt;&gt; </span>p.getName()<br><span class="hljs-string">&#x27;yuan.jiang&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>p._Person__name  <span class="hljs-comment">#python中类的私有属于伪私有，此方式可访问私有成员</span><br><span class="hljs-string">&#x27;yuan.jiang&#x27;</span><br></code></pre></td></tr></table></figure>


<p>继承 inherit<br>class DerivedClassName(BaseClassName):<br>…<br>(1) 如果子类中定义于父类同名的成员时，则会自动覆盖父类对应的方法或属性<br>(2) 解决子类中__init()</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;正在调用父类的方法...&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span>(<span class="hljs-title class_ inherited__">Parent</span>):<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>p = Parent()<br><span class="hljs-meta">&gt;&gt;&gt; </span>p.hello()<br>正在调用父类的方法...<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = Child()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.hello()<br>正在调用父类的方法...<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span>(<span class="hljs-title class_ inherited__">Parent</span>):<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;正在调用子类的方法...&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = Child()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.hello()<br>正在调用子类的方法...<br><span class="hljs-meta">&gt;&gt;&gt; </span>p.hello()<br>正在调用父类的方法...<br></code></pre></td></tr></table></figure>


<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random <span class="hljs-keyword">as</span> r<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Fish</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    self.x = r.randint(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)<br>    self.y = r.randint(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">move</span>(<span class="hljs-params">self</span>):<br>    self.x -= <span class="hljs-number">1</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我的位置是：&#x27;</span>, self.x, self.y)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Goldfish</span>(<span class="hljs-title class_ inherited__">Fish</span>):<br>  <span class="hljs-keyword">pass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Carpfish</span>(<span class="hljs-title class_ inherited__">Fish</span>):<br>  <span class="hljs-keyword">pass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Salmonfish</span>(<span class="hljs-title class_ inherited__">Fish</span>):<br>  <span class="hljs-keyword">pass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sharkfish</span>(<span class="hljs-title class_ inherited__">Fish</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment">#重写了__init__方法覆盖了父类的__init__子类无法调用到self.x和self.y属性成员，导致了子类无法访问到父类的属性或方法的问题</span><br>    self.hungry = <span class="hljs-literal">True</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">eat</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">if</span> self.hungry:<br>      <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;吃货的梦想就是天天有的吃^_^&#x27;</span>)<br>      self.hungry = <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">else</span>:<br>      <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;太撑了，吃不下了！&#x27;</span>)<br>运行：<br><span class="hljs-meta">&gt;&gt;&gt; </span>fish = Fish()<br><span class="hljs-meta">&gt;&gt;&gt; </span>fish.move()<br>我的位置是： <span class="hljs-number">3</span> <span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>fish.move()<br>我的位置是： <span class="hljs-number">2</span> <span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>goldfish = Goldfish()<br><span class="hljs-meta">&gt;&gt;&gt; </span>goldfish.move()<br>我的位置是： <span class="hljs-number">4</span> <span class="hljs-number">9</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>goldfish.move()<br>我的位置是： <span class="hljs-number">3</span> <span class="hljs-number">9</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>shark = Sharkfish()<br><span class="hljs-meta">&gt;&gt;&gt; </span>shark.eat()<br>吃货的梦想就是天天有的吃^_^<br><span class="hljs-meta">&gt;&gt;&gt; </span>shark.eat()<br>太撑了，吃不下了！<br><span class="hljs-meta">&gt;&gt;&gt; </span>shark.move()  <span class="hljs-comment">#无法访问到父类的__init__()方法中的x变量</span><br>AttributeError: <span class="hljs-string">&#x27;Sharkfish&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;x&#x27;</span><br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    2017.09.02          
</code></pre>
<p>覆盖属性或方法问题优化<br>问题：针对子类属性或方法覆盖父类属性或方法的情况，导致子类无法访问父类中被覆盖的属性<br>(1) 调用未绑定的父类的方法<br>(2) 使用super方法(推荐)<br>举例：<br>def <strong>init</strong>(self):<br>Fish.<strong>init</strong>(self)  #调用未绑定的父类的方法，相当于</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;&gt;&gt;Fish.__init__(Sharkfish)<br>self.hungry = <span class="hljs-literal">True</span><br>运行：<br><span class="hljs-meta">&gt;&gt;&gt; </span>shark = Sharkfish()<br><span class="hljs-meta">&gt;&gt;&gt; </span>shark.move()<br>我的位置是： -<span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>shark.move()<br>我的位置是： -<span class="hljs-number">2</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>


<p>举例：<br>def <strong>init</strong>(self):<br>super().<strong>init</strong>()  #使用super方法解决<br>self.hungry &#x3D; True<br>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>shark = Sharkfish()<br><span class="hljs-meta">&gt;&gt;&gt; </span>shark.move()<br>我的位置是： <span class="hljs-number">8</span> <span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>shark.move()<br>我的位置是： <span class="hljs-number">7</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>


<p>多重继承<br>class DerivedClassName(Base1, Base2, Base3, …):<br>…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#建议少用，有可能会导致不可预见的bug(不可预见最麻烦)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base1</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fool</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我是fool，我为Base1代言...&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base2</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fool2</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我是fool2，我为Base2代言...&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>(Base1, Base2):<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c = C()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.fool()<br>我是fool，我为Base1代言...<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.fool2()<br>我是fool2，我为Base2代言...<br></code></pre></td></tr></table></figure>


<p>组合</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Turtle</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x</span>):<br>    self.num = x<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Fish</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x</span>):<br>    self.num = x<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pool</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y</span>):  <span class="hljs-comment">#组合的方式嵌套class</span><br>    self.turtle = Turtle(x)<br>    self.fish  = Fish(y)<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_num</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;水池里总共有乌龟 %d 只，小鱼 %d 条！&#x27;</span> % (self.turtle.num, self.fish.num))<br></code></pre></td></tr></table></figure>

<p>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>pool = Pool(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>pool.print_num()<br>水池里总共有乌龟 <span class="hljs-number">1</span> 只，小鱼 <span class="hljs-number">10</span> 条！<br></code></pre></td></tr></table></figure>


<p>类、类对象、示例对象<br>类定义   C<br>类对象   C<br>实例对象  a  b  c<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:  <span class="hljs-comment">#C, 既是类，也是类对象</span><br>count = <span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = C()   <span class="hljs-comment">#a，实例对象</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b = C()   <span class="hljs-comment">#b，实例对象</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c = C()   <span class="hljs-comment">#c，实例对象</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a.count<br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b.count<br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.count<br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.count += <span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.count<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a.count<br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b.count<br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>C.count   <span class="hljs-comment">#C，作为类对象</span><br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>C.count += <span class="hljs-number">100</span>   <span class="hljs-comment">#C，作为类对象</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a.count<br><span class="hljs-number">100</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b.count<br><span class="hljs-number">100</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.count<br><span class="hljs-number">10</span><br></code></pre></td></tr></table></figure>


<p>(1) 当属性名与方法名冲突，会导致方法不能正常调用。<br>(2) 一般遵循规则：属性名用英文名词，方法名用英文动词。<br>(3) python严格要求方法需要有实例才能被调用，即绑定的概念。</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">x</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;X-man!&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = C()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x()<br>X-man!<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x = <span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x<br><span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x()  <span class="hljs-comment">#方法名字被属性名字覆盖，调用出错</span><br>TypeError: <span class="hljs-string">&#x27;int&#x27;</span> <span class="hljs-built_in">object</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">callable</span><br><br><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">BB</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">printBB</span>():<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;no zuo no die.&#x27;</span>)<br><br><br><br><span class="hljs-meta">&gt;&gt;&gt; </span>BB.printBB()<br>no zuo no die.<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment">#没有self，也没有将类实例化</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>bb = BB()<br><span class="hljs-meta">&gt;&gt;&gt; </span>bb.printBB()<br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#187&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  bb.printBB()<br>TypeError: printBB() takes <span class="hljs-number">0</span> positional arguments but <span class="hljs-number">1</span> was given<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setXY</span>(<span class="hljs-params">self, x, y</span>):<br>self.x = x;<br>self.y = y<br><br><br><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">CC</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setXY</span>(<span class="hljs-params">self, x, y</span>):<br>self.x = x<br>self.y = y<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">printXY</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(self.x, self.y)<br><br><br><br><span class="hljs-meta">&gt;&gt;&gt; </span>dd = CC()<br><span class="hljs-meta">&gt;&gt;&gt; </span>dd.__dict__<br>&#123;&#125;  <span class="hljs-comment">#返回空的字典类型</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>CC.__dict__<br>mappingproxy(&#123;<span class="hljs-string">&#x27;printXY&#x27;</span>: &lt;function CC.printXY at <span class="hljs-number">0x0000020483176EA0</span>&gt;, <span class="hljs-string">&#x27;__doc__&#x27;</span>: <span class="hljs-literal">None</span>, <span class="hljs-string">&#x27;__dict__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__dict__&#x27;</span> of <span class="hljs-string">&#x27;CC&#x27;</span> objects&gt;, <span class="hljs-string">&#x27;setXY&#x27;</span>: &lt;function CC.setXY at <span class="hljs-number">0x0000020483176E18</span>&gt;, <span class="hljs-string">&#x27;__module__&#x27;</span>: <span class="hljs-string">&#x27;__main__&#x27;</span>, <span class="hljs-string">&#x27;__weakref__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__weakref__&#x27;</span> of <span class="hljs-string">&#x27;CC&#x27;</span> objects&gt;&#125;)  <span class="hljs-comment">#使用类对象显示类的属性详情</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>dd.setXY(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>dd.__dict__<br>&#123;<span class="hljs-string">&#x27;y&#x27;</span>: <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;x&#x27;</span>: <span class="hljs-number">4</span>&#125;  <span class="hljs-comment">#将实例对象dd使用类的属性详情实例化了</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># setXY(self, x, y) &lt;==&gt; dd.setXY(dd, x, y)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> CC<br><span class="hljs-meta">&gt;&gt;&gt; </span>ee = CC()<br>NameError: name <span class="hljs-string">&#x27;CC&#x27;</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined<br><span class="hljs-meta">&gt;&gt;&gt; </span>dd.printXY()<br><span class="hljs-number">4</span> <span class="hljs-number">5</span>  <span class="hljs-comment">#类中定义的属性是静态的，类的实例对象中也会静态存储，所以实例对象dd正常存在。</span><br></code></pre></td></tr></table></figure>


<p>类与对象的内置函数<br>issubclass<br>功能：测试一个类是否是另外一个类的子类<br>issubclass(class, classinfo)<br>(1) 一个类被认为是其自身的子类<br>(2) classinfo可以是类对象的元组，只要class属于其中任何一个候选类的子类，则返回True<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>(<span class="hljs-title class_ inherited__">A</span>):<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">issubclass</span>(B, A)<br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">issubclass</span>(B, B)<br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">issubclass</span>(B, <span class="hljs-built_in">object</span>)  <span class="hljs-comment">#object是所有类的基类</span><br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">issubclass</span>(B, C)<br></code></pre></td></tr></table></figure>


<p>isinstance<br>功能：测试一个对象是否是一个类的实例对象<br>isinstance(object, classinfo)<br>(1) object为类的实例对象，如果不是类的实例对象，永远返回False<br>(2) 如果第二个参数不是类或者由类对象组成的元组，会抛出一个TypeError异常<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>(<span class="hljs-title class_ inherited__">A</span>):<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">pass</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b1 = B()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span>(b1, B)<br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span>(b1, A)<br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span>(b1, C)<br><span class="hljs-literal">False</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">isinstance</span>(b1, (A, B, C))  <span class="hljs-comment">#b1对象是否在A/B/C里面，答案是True</span><br><span class="hljs-literal">True</span><br></code></pre></td></tr></table></figure>


<p>hasattr<br>功能：测试一个对象里面是否有指定的属性<br>hasattr(object, name)<br>(1) object 对象名, name 是属性名(需要用引号引起来，否则报错)</p>
<p>getattr<br>功能：返回对象指定的属性值<br>getattr(object, name[, default])<br>(1) 如果属性值不存在打印default，没有default则抛出异常</p>
<p>setattr<br>功能：设置对象中指定属性的值，如果属性不存在则创建并赋值<br>setattr(object, name, value)</p>
<p>delattr<br>功能：删除对象中指定的属性，如果属性不存在则抛出异常<br>delattr(object, name)</p>
<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x=<span class="hljs-number">0</span></span>):<br>self.x = x<br><span class="hljs-meta">&gt;&gt;&gt; </span>c1 = C()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">hasattr</span>(c1, <span class="hljs-string">&#x27;x&#x27;</span>)  <span class="hljs-comment">#测试对象属性是否存在</span><br><span class="hljs-literal">True</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">hasattr</span>(c1, x)<br>NameError: name <span class="hljs-string">&#x27;x&#x27;</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">getattr</span>(c1, <span class="hljs-string">&#x27;x&#x27;</span>)  <span class="hljs-comment">#获取对象属性的值</span><br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">getattr</span>(c1, <span class="hljs-string">&#x27;y&#x27;</span>)<br>AttributeError: <span class="hljs-string">&#x27;C&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;y&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">getattr</span>(c1, <span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-string">&#x27;您所访问的属性不存在！&#x27;</span>)  <span class="hljs-comment">#设置default默认提示语</span><br><span class="hljs-string">&#x27;您所访问的属性不存在！&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">setattr</span>(c1, <span class="hljs-string">&#x27;y&#x27;</span>, <span class="hljs-number">100</span>)  <span class="hljs-comment">#设置对象属性的值</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">getattr</span>(c1, <span class="hljs-string">&#x27;y&#x27;</span>)<br><span class="hljs-number">100</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">delattr</span>(c1, <span class="hljs-string">&#x27;y&#x27;</span>)  <span class="hljs-comment">#删除对象属性的值</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">delattr</span>(c1, <span class="hljs-string">&#x27;y&#x27;</span>)<br>Traceback (most recent call last):<br> File <span class="hljs-string">&quot;&lt;pyshell#264&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  <span class="hljs-built_in">delattr</span>(c1, <span class="hljs-string">&#x27;y&#x27;</span>)<br>AttributeError: y<br></code></pre></td></tr></table></figure>


<p>property<br>功能：设置一个定义好的属性，通过对象属性来设置对象属性<br>property(fget&#x3D;None, fset&#x3D;None, fdel&#x3D;None, doc&#x3D;None)<br>(1) fget获取属性的方法, fset设置属性的方法, fdel删除属性的方法<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, size=<span class="hljs-number">10</span></span>):<br>self.size = size<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getSize</span>(<span class="hljs-params">self</span>):<br><span class="hljs-keyword">return</span> self.size<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setSize</span>(<span class="hljs-params">self, value</span>):<br>self.size = value<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">delSize</span>(<span class="hljs-params">self</span>):<br><span class="hljs-keyword">del</span> self.size<br>x = <span class="hljs-built_in">property</span>(getSize, setSize, delSize)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c1 = C()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.getSize()<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.x<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.x = <span class="hljs-number">18</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.x<br><span class="hljs-number">18</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.getSize()<br><span class="hljs-number">18</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.size<br><span class="hljs-number">18</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> c1.x<br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.size   <span class="hljs-comment">#x与size相当于相互引用关系，删除其中一个另一个即不能访问</span><br>AttributeError: <span class="hljs-string">&#x27;C&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;size&#x27;</span><br></code></pre></td></tr></table></figure>


<h3 id="20-魔法方法-magic-methods"><a href="#20-魔法方法-magic-methods" class="headerlink" title="20. 魔法方法 magic methods"></a>20. 魔法方法 magic methods</h3><p>(1) 魔法方法总是被双下划綫包围，如 <code>__init__</code><br>(2) 魔法方法是面向对象的python的一切<br>(3) 魔法方法的魔力体现在能够在适当的时候被调用</p>
<p>魔法方法汇总：<a target="_blank" rel="noopener" href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=48793&amp;extra=page=1&filter=typeid&typeid=403">http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=48793&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403</a></p>
<p><code>__init__</code>(self[, …])<br>功能：初始化类对象(根据需求决定是否增加属性参数)<br>返回值： None<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>: <span class="hljs-comment">#矩形类，需要长和宽，所以重写__init__</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, x, y</span>):<br>self.x = x<br>self.y = y<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getPeri</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment">#获得周长</span><br><span class="hljs-keyword">return</span> (self.x + self.y) * <span class="hljs-number">2</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getArea</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment">#获得面积</span><br><span class="hljs-keyword">return</span> self.x * self.y<br><span class="hljs-meta">&gt;&gt;&gt; </span>rect = Rectangle(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>rect.getPeri()<br><span class="hljs-number">14</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>rect.getArea()<br><span class="hljs-number">12</span><br></code></pre></td></tr></table></figure>


<p><code>__new__</code>(class[, …])<br>功能：创建一个类对象<br>返回值：返回一个对象<br>(1) 在__init__方法之前被调用，属于类创建时第一个被调用的方法<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">CapStr</span>(<span class="hljs-title class_ inherited__">str</span>):  <span class="hljs-comment">#继承一个不可改变的类型str</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__new__</span>(<span class="hljs-params">cls, string</span>):  <span class="hljs-comment">#使用new将类型的功能进行转换</span><br>string = string.upper()<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>.__new__(cls, string)  <span class="hljs-comment">#把重写后的str中的new方法带传代餐返回</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a = CapStr(<span class="hljs-string">&quot;I love M.&quot;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br><span class="hljs-string">&#x27;I LOVE M.&#x27;</span><br></code></pre></td></tr></table></figure>


<p><code>__del__</code>(self)<br>功能：对象将要被销毁的时候，自动调用，属于自动垃圾回收方法<br>注意：<code>del x != x.__del__()</code><br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我是init方法，我被调用了！&#x27;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__del__</span>(<span class="hljs-params">self</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;我是del方法，我被调用了！&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c1 = C()<br>我是init方法，我被调用了！<br><span class="hljs-meta">&gt;&gt;&gt; </span>c2 = c1  <span class="hljs-comment">#对象的赋值不会调用__init__</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c3 = c2<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> c3<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> c2<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> c1  <span class="hljs-comment">#其他的赋值对象del时不会调用__del__ (c2和c3只是c1的一份拷贝)</span><br>我是<span class="hljs-keyword">del</span>方法，我被调用了！<br></code></pre></td></tr></table></figure>


<p>算术运算魔法方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">__add__(self, other) 加法：+<br>__sub__(self, other) 减法：-<br>__mul__(self, other) 乘法：*<br>__truediv__(self, other) 真除法：/<br>__floordiv__(self, other) 整数除法：//<br>__mod__(self, other) 取模算法：%<br>__divmod__(self, other) <span class="hljs-built_in">divmod</span>()调用时的行为<br>__pow__(self, other[, modulo]) power()调用或 ** 运算时的行为<br>__lshift__(self, other) 按位左移：&lt;&lt;<br>__rshift__(self, other) 按位右移：&gt;&gt;<br>__and__(self, other) 按位与：&amp;<br>__xor__(self, other) 按位异或：^<br>__or__(self, other) 按位或：|<br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">New_int</span>(<span class="hljs-title class_ inherited__">int</span>):<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, other</span>):<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>.__sub__(self, other)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__sub__</span>(<span class="hljs-params">self, other</span>):<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>.__add__(self, other)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a = New_int(<span class="hljs-number">3</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = New_int(<span class="hljs-number">5</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a + b<br>-<span class="hljs-number">2</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a - b<br><span class="hljs-number">8</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Try_int</span>(<span class="hljs-title class_ inherited__">int</span>):<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__add__</span>(<span class="hljs-params">self, other</span>):<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(self) + <span class="hljs-built_in">int</span>(other)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__sub__</span>(<span class="hljs-params">self, other</span>):<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(self) - <span class="hljs-built_in">int</span>(other)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a = Try_int(<span class="hljs-number">3</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = Try_int(<span class="hljs-number">5</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>a + b<br><span class="hljs-number">8</span><br></code></pre></td></tr></table></figure>


<p>类定制的计时器<br>(1) 定制一个计时器的类<br>(2) start和stop方法代表启动计时和停止计时<br>(3) 假设计时器对象t1，print(t1)和直接调用t1均显示结果<br>(4) 当计时器未启动或已经停止计时，调用stop方法会给与温馨的提示<br>(5) 两个计时器对象可以进行相加：t1 + t2<br>需要的资源：<br>(1) 使用time模块的localtime方法获取时间<br>(2) <code>__str__</code> 方法 <code>__repr__</code> 方法可用来打印文字</p>
<p>time 模块<br>详解链接：<a target="_blank" rel="noopener" href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=51326&amp;extra=page=1&filter=typeid&typeid=403">http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=51326&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403</a></p>
<p>struct_time元组<br>time.struct_time(tm_year&#x3D;2017, tm_mon&#x3D;9, tm_mday&#x3D;2, tm_hour&#x3D;12, tm_min&#x3D;18, tm_sec&#x3D;55, tm_wday&#x3D;5, tm_yday&#x3D;245, tm_isdst&#x3D;0)</p>
<p>类定制计时器代码：<a target="_blank" rel="noopener" href="http://blog.csdn.net/sinat_36184075/article/details/77806778">http://blog.csdn.net/sinat_36184075/article/details/77806778</a></p>
<p>属性访问</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">__getattribute__(self, name) <span class="hljs-comment">#定义当该类的属性被访问时的行为</span><br>__getattr__(self, name) <span class="hljs-comment">#定义当用户试图获取一个不存在的属性时的行为</span><br>__setattr__(self, name, value) <span class="hljs-comment">#定义当一个属性被设置(包括初始化)时的行为</span><br>__delattr__(self, name) <span class="hljs-comment">#定义一个属性被删除时的行为</span><br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__getattribute__</span>(<span class="hljs-params">self, name</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;getattribute&#x27;</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().__getattribute__(name)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__getattr__</span>(<span class="hljs-params">self, name</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;getattr&#x27;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__setattr__</span>(<span class="hljs-params">self, name, value</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;setattr&#x27;</span>)<br><span class="hljs-built_in">super</span>().__setattr__(name, value)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__delattr__</span>(<span class="hljs-params">self, name</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;delattr&#x27;</span>)<br><span class="hljs-built_in">super</span>().__delattr__(name)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = C()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x<br>getattribute<br><span class="hljs-built_in">getattr</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x = <span class="hljs-number">1</span><br><span class="hljs-built_in">setattr</span>  <span class="hljs-comment">#初始化时自动调用setattr</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x<br>getattribute<br><span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> c.x<br><span class="hljs-built_in">delattr</span><br></code></pre></td></tr></table></figure>


<p>举例：属性访问时的严重问题，无限递归</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>:  <span class="hljs-comment">#矩形</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, width=<span class="hljs-number">0</span>, height=<span class="hljs-number">0</span></span>):  <span class="hljs-comment">#宽高不相等，长方形</span><br>    self.width = width<br>    self.height = height<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__setattr__</span>(<span class="hljs-params">self, name, value</span>):<br>    <span class="hljs-keyword">if</span> name == <span class="hljs-string">&#x27;square&#x27;</span>:  <span class="hljs-comment">#宽高相等，正方形</span><br>      self.width = value<br>      self.height = value<br>    <span class="hljs-keyword">else</span>:<br>      <span class="hljs-comment">#self.name = value  #会导致类无限递归自己</span><br>      <span class="hljs-built_in">super</span>().__setattr__(name, value)  <span class="hljs-comment">#解决办法①：super() 推荐。</span><br>      <span class="hljs-comment">#self.__dict__[name] = value    #解决办法②：字典</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">getArea</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> self.width * self.height<br></code></pre></td></tr></table></figure>


<p>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>r1 = Rectangle(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>r1.getArea()<br><span class="hljs-number">20</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>r1.square = <span class="hljs-number">10</span>  <span class="hljs-comment">#正方形</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>r1.width<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>r1.height<br><span class="hljs-number">10</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>r1.getArea()<br><span class="hljs-number">100</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>r1.__dict__  <span class="hljs-comment">#以字典的形式查看类中的属性和值</span><br>&#123;<span class="hljs-string">&#x27;width&#x27;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;height&#x27;</span>: <span class="hljs-number">10</span>&#125;<br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    2017.09.03          
</code></pre>
<p>描述符 decriptor</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">描述符就是将某种特殊类型的类的实例指派给另一个类的属性。<br>__get__(self, instance, owner)  <span class="hljs-comment">#用于访问属性，返回属性的值</span><br>__set__(self, instance, value)  <span class="hljs-comment">#将在属性分配操作中调用，不反悔任何内容</span><br>__delete__(self, instance)   <span class="hljs-comment">#控制删除操作，不返回任何内容</span><br><span class="hljs-meta">@self, 描述符类本身的类实例</span><br><span class="hljs-meta">@instance, 拥有者的类实例</span><br><span class="hljs-meta">@owner, 拥有者类本身</span><br><span class="hljs-meta">@value, 所赋的值</span><br></code></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDecriptor</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__get__</span>(<span class="hljs-params">self, instance, owner</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;getting: &#x27;</span>, self, instance, owner)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__set__</span>(<span class="hljs-params">self, instance, value</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;setting: &#x27;</span>, self, instance, value)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__delete__</span>(<span class="hljs-params">self, instance</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;deleting: &#x27;</span>, self, instance)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>:<br>x = MyDecriptor()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment">#MyDecriptor是x的描述符类</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>test = Test()  <span class="hljs-comment">#实例化Test()类</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>test.x<br>getting:  &lt;__main__.MyDecriptor <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002164DC31FD0</span>&gt; &lt;__main__.Test <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002164DBB6F28</span>&gt; &lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;__main__.Test&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>test<br>&lt;__main__.Test <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002164DBB6F28</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>test.x = <span class="hljs-string">&#x27;X-man&#x27;</span><br>setting:  &lt;__main__.MyDecriptor <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002164DC31FD0</span>&gt; &lt;__main__.Test <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002164DBB6F28</span>&gt; X-man<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> test.x<br>deleting:  &lt;__main__.MyDecriptor <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002164DC31FD0</span>&gt; &lt;__main__.Test <span class="hljs-built_in">object</span> at <span class="hljs-number">0x000002164DBB6F28</span>&gt;<br></code></pre></td></tr></table></figure>


<p>自定义的描述符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyProperty</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, fget=<span class="hljs-literal">None</span>, fset=<span class="hljs-literal">None</span>, fdel=<span class="hljs-literal">None</span></span>):<br>self.fget = fget<br>self.fset = fset<br>self.fdel = fdel<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__get__</span>(<span class="hljs-params">self, instance, owner</span>):<br><span class="hljs-keyword">return</span> self.fget(instance)  <span class="hljs-comment">#instance拥有者的实例对象</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__set__</span>(<span class="hljs-params">self, instance, value</span>):<br>self.fset(instance, value)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__delete__</span>(<span class="hljs-params">self, instance</span>):<br>self.fdel(instance)<br></code></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>:<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>self._x = <span class="hljs-literal">None</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getX</span>(<span class="hljs-params">self</span>):<br><span class="hljs-keyword">return</span> self._x<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setX</span>(<span class="hljs-params">self, value</span>):<br>self._x = value<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">delX</span>(<span class="hljs-params">self</span>):<br><span class="hljs-keyword">del</span> self._x<br>x = MyProperty(getX, setX, delX)<br><br><br><br><span class="hljs-meta">&gt;&gt;&gt; </span>c = C()<br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x = <span class="hljs-string">&#x27;X-man&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c.x<br><span class="hljs-string">&#x27;X-man&#x27;</span>  <span class="hljs-comment">#使用x影响_x的值</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c._x<br><span class="hljs-string">&#x27;X-man&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">del</span> c.x  <span class="hljs-comment">#删除后，c.x和c._x都不存在</span><br></code></pre></td></tr></table></figure>


<p>练习：温度转换<br>定义一个温度类，然后定义两个描述符类用于描述摄氏度和华氏度两个属性。<br>要求两个属性会自动进行转换，也就是说可以给摄氏度这个属性赋值，打印华氏度是自动转换后的结果。<br>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Celsius</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, value = <span class="hljs-number">26.0</span></span>):<br>    self.value = <span class="hljs-built_in">float</span>(value)<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__get__</span>(<span class="hljs-params">self, instance, owner</span>):<br>    <span class="hljs-keyword">return</span> self.value<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__set__</span>(<span class="hljs-params">self, instance, value</span>):<br>    self.value = <span class="hljs-built_in">float</span>(value)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Fahrenheit</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__get__</span>(<span class="hljs-params">self, instance, owner</span>):  <span class="hljs-comment">#instance就是Temperature(属性:cel, fah)</span><br>    <span class="hljs-keyword">return</span> instance.cel * <span class="hljs-number">1.8</span> + <span class="hljs-number">32</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__set__</span>(<span class="hljs-params">self, instance, value</span>):<br>    <span class="hljs-comment">#instance.cel = (&#x27;%.1f&#x27; % ((float(value) - 32) / 1.8))  #控制精度方法1</span><br>    instance.cel = <span class="hljs-built_in">round</span>((<span class="hljs-built_in">float</span>(value) - <span class="hljs-number">32</span>) / <span class="hljs-number">1.8</span>, <span class="hljs-number">1</span>)    <span class="hljs-comment">#控制精度方法2</span><br></code></pre></td></tr></table></figure>


<p>class Temperature:<br>  cel &#x3D; Celsius()  #摄氏度<br>  fah &#x3D; Fahrenheit()  #华氏度, fah在实例对象中被赋值时调用对应类的__set__<br>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>temp = Temperature()<br><span class="hljs-meta">&gt;&gt;&gt; </span>temp.cel<br><span class="hljs-number">26.0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>temp.cel = <span class="hljs-number">30</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>temp.fah<br><span class="hljs-number">86.0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>temp.fah = <span class="hljs-number">100</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>temp.cel<br><span class="hljs-number">37.8</span><br></code></pre></td></tr></table></figure>


<p>定制序列(容器)<br>(1) 如果希望定制的容器不可变，只需要定义魔法方法__len__()和__getitem__()<br>(2) 如果希望定制的容器可变，需要定义__len__()和__getitem__()和__setitem__()和__delitem__()</p>
<p>魔法方法详解：<br><a target="_blank" rel="noopener" href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=48793&amp;extra=page=1&filter=typeid&typeid=403">http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=48793&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403</a></p>
<p>练习：<br>编写一个不可改变的自定义列表，要求记录列表中每个元素被访问的次数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CountList</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args</span>):  <span class="hljs-comment">#*args, 参数数量可变</span><br>    self.values = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> args]<br>    self.count = &#123;&#125;.fromkeys(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.values)), <span class="hljs-number">0</span>)<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.values)<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, key</span>):<br>    self.count[key] += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">return</span> self.values[key]<br></code></pre></td></tr></table></figure>

<p>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>c1 = CountList(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c2 = CountList(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>c1[<span class="hljs-number">1</span>]  <span class="hljs-comment">#c1[1] == 3被访问1次</span><br><span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c2[<span class="hljs-number">1</span>]<br><span class="hljs-number">4</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1[<span class="hljs-number">1</span>] + c2[<span class="hljs-number">1</span>]  <span class="hljs-comment">#c1[1] == 3被访问2次</span><br><span class="hljs-number">7</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.count<br>&#123;<span class="hljs-number">0</span>: <span class="hljs-number">0</span>, <span class="hljs-number">1</span>: <span class="hljs-number">2</span>, <span class="hljs-number">2</span>: <span class="hljs-number">0</span>, <span class="hljs-number">3</span>: <span class="hljs-number">0</span>, <span class="hljs-number">4</span>: <span class="hljs-number">0</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>c1[<span class="hljs-number">1</span>]  <span class="hljs-comment">#c1[1] == 3被访问3次</span><br><span class="hljs-number">3</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c1.count<br>&#123;<span class="hljs-number">0</span>: <span class="hljs-number">0</span>, <span class="hljs-number">1</span>: <span class="hljs-number">3</span>, <span class="hljs-number">2</span>: <span class="hljs-number">0</span>, <span class="hljs-number">3</span>: <span class="hljs-number">0</span>, <span class="hljs-number">4</span>: <span class="hljs-number">0</span>&#125;<br></code></pre></td></tr></table></figure>


<p>迭代器 iter-next<br>iter<br>iter() 内置方法, 功能：返回一个迭代器对象<br><code>__iter__</code>() 魔法方法</p>
<p>next<br>next() 内置方法<br><code>__next__</code>()  魔法方法</p>
<p>for循环迭代器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>links = &#123;<span class="hljs-string">&#x27;百度&#x27;</span>:<span class="hljs-string">&#x27;http://www.baidu.com&#x27;</span>, <br><span class="hljs-string">&#x27;谷歌&#x27;</span>:<span class="hljs-string">&#x27;http://www.google.com&#x27;</span>, <br><span class="hljs-string">&#x27;搜狗&#x27;</span>:<span class="hljs-string">&#x27;http://www.sougou.com&#x27;</span>, <br><span class="hljs-string">&#x27;腾讯&#x27;</span>:<span class="hljs-string">&#x27;http://www.qq.com&#x27;</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> links:<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%s -&gt; %s&quot;</span> % (each, links[each]))<br>谷歌 -&gt; http://www.google.com<br>搜狗 -&gt; http://www.sougou.com<br>腾讯 -&gt; http://www.qq.com<br>百度 -&gt; http://www.baidu.com<br></code></pre></td></tr></table></figure>


<p>iter迭代器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>string = <span class="hljs-string">&#x27;yuan.jiang&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>it = <span class="hljs-built_in">iter</span>(string)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br><span class="hljs-keyword">try</span>:<br>each = <span class="hljs-built_in">next</span>(it)<br><span class="hljs-keyword">except</span> StopIteration:<br><span class="hljs-keyword">break</span>;<br><span class="hljs-built_in">print</span>(each, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>运行：<br>y u a n . j i a n g <br></code></pre></td></tr></table></figure>


<p>斐波那契数列迭代器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">class</span> <span class="hljs-title class_">Fibs</span>:  <span class="hljs-comment">#斐波那契数列</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n=<span class="hljs-number">10</span></span>):   <span class="hljs-comment">#加一个参数n控制迭代范围</span><br>self.a = <span class="hljs-number">0</span><br>self.b = <span class="hljs-number">1</span><br>self.n = n<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):<br><span class="hljs-keyword">return</span> self  <span class="hljs-comment">#本身就是一个迭代器</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">__next__</span>(<span class="hljs-params">self</span>):<br>self.a, self.b = self.b, self.a+self.b<br><span class="hljs-keyword">if</span> self.a &gt; self.n:<br><span class="hljs-keyword">raise</span> StopIteration<br><span class="hljs-keyword">return</span> self.a<br><span class="hljs-meta">&gt;&gt;&gt; </span>fibs = Fibs()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> fibs:<br><span class="hljs-built_in">print</span>(each, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">8</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>fibs = Fibs(<span class="hljs-number">100</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> fibs:<br><span class="hljs-built_in">print</span>(each, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">8</span> <span class="hljs-number">13</span> <span class="hljs-number">21</span> <span class="hljs-number">34</span> <span class="hljs-number">55</span> <span class="hljs-number">89</span><br></code></pre></td></tr></table></figure>


<p>生成器 yield<br>(1) 生成器是一种特殊的迭代器，兼容next()内置方法<br>(2) 生成器模仿了协同程序<br>协同程序：可以运行的对立函数调用，函数可以暂停或挂起，并再需要的时候从程序离开的地方继续活着重新开始。<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">MyGen</span>():<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;生成器被执行！&#x27;</span>)<br><span class="hljs-keyword">yield</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">yield</span> <span class="hljs-number">2</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>myg = MyGen()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(myg)<br>生成器被执行！<br><span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(myg)<br><span class="hljs-number">2</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(myg)<br>StopIteration<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> MyGen():  <span class="hljs-comment">#for循环自动检测迭代器的StopIteration异常</span><br><span class="hljs-built_in">print</span>(i)<br>生成器被执行！<br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">def</span> <span class="hljs-title function_">fibs</span>():<br>a = <span class="hljs-number">0</span><br>b = <span class="hljs-number">1</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>a, b = b, a+b<br><span class="hljs-keyword">yield</span> a<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> fibs():<br><span class="hljs-keyword">if</span> each &gt; <span class="hljs-number">100</span>:<br><span class="hljs-keyword">break</span><br><span class="hljs-built_in">print</span>(each, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">8</span> <span class="hljs-number">13</span> <span class="hljs-number">21</span> <span class="hljs-number">34</span> <span class="hljs-number">55</span> <span class="hljs-number">89</span> <br></code></pre></td></tr></table></figure>


<p>列表推导式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>a = [i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (i % <span class="hljs-number">2</span>) <span class="hljs-keyword">and</span> (i % <span class="hljs-number">3</span>)]  <span class="hljs-comment">#列表推导式</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>a<br>[<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">14</span>, <span class="hljs-number">16</span>, <span class="hljs-number">20</span>, <span class="hljs-number">22</span>, <span class="hljs-number">26</span>, <span class="hljs-number">28</span>, <span class="hljs-number">32</span>, <span class="hljs-number">34</span>, <span class="hljs-number">38</span>, <span class="hljs-number">40</span>, <span class="hljs-number">44</span>, <span class="hljs-number">46</span>, <span class="hljs-number">50</span>, <span class="hljs-number">52</span>, <span class="hljs-number">56</span>, <span class="hljs-number">58</span>, <span class="hljs-number">62</span>, <span class="hljs-number">64</span>, <span class="hljs-number">68</span>, <span class="hljs-number">70</span>, <span class="hljs-number">74</span>, <span class="hljs-number">76</span>, <span class="hljs-number">80</span>, <span class="hljs-number">82</span>, <span class="hljs-number">86</span>, <span class="hljs-number">88</span>, <span class="hljs-number">92</span>, <span class="hljs-number">94</span>, <span class="hljs-number">98</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>b = &#123;i:i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)&#125;  <span class="hljs-comment">#字典推导式(例子：小于10以内的偶数)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>b<br>&#123;<span class="hljs-number">0</span>: <span class="hljs-literal">True</span>, <span class="hljs-number">1</span>: <span class="hljs-literal">False</span>, <span class="hljs-number">2</span>: <span class="hljs-literal">True</span>, <span class="hljs-number">3</span>: <span class="hljs-literal">False</span>, <span class="hljs-number">4</span>: <span class="hljs-literal">True</span>, <span class="hljs-number">5</span>: <span class="hljs-literal">False</span>, <span class="hljs-number">6</span>: <span class="hljs-literal">True</span>, <span class="hljs-number">7</span>: <span class="hljs-literal">False</span>, <span class="hljs-number">8</span>: <span class="hljs-literal">True</span>, <span class="hljs-number">9</span>: <span class="hljs-literal">False</span>&#125;<br><span class="hljs-meta">&gt;&gt;&gt; </span>c = &#123;i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]&#125;  <span class="hljs-comment">#集合推导式(元素不重复)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>c<br>&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>&#125;<br><span class="hljs-comment">#没有字符串推导式，引号内的强制解释为字符串</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>e = (i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))  <span class="hljs-comment">#没有元组推导式，()小括号生成的是生成器推导式</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>e<br>&lt;generator <span class="hljs-built_in">object</span> &lt;genexpr&gt; at <span class="hljs-number">0x00000261E200A7D8</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(e)<br><span class="hljs-number">0</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">next</span>(e)<br><span class="hljs-number">1</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> e:<br><span class="hljs-built_in">print</span>(each, end=<span class="hljs-string">&#x27; &#x27;</span>)<br><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span> <br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">sum</span>(i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">if</span> i % <span class="hljs-number">2</span>)<br><span class="hljs-number">2500</span><br></code></pre></td></tr></table></figure>


<p>生成器扩展阅读：<br><a target="_blank" rel="noopener" href="http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=56023&amp;extra=page=1&filter=typeid&typeid=403">http://bbs.fishc.com/forum.php?mod=viewthread&amp;tid=56023&amp;extra=page%3D1%26filter%3Dtypeid%26typeid%3D403</a></p>
<h3 id="21-模块-module"><a href="#21-模块-module" class="headerlink" title="21. 模块 module"></a>21. 模块 module</h3><p>容器 -&gt; 数据的封装<br>函数 -&gt; 语句的封装<br>类  -&gt; 方法和属性的封装<br>模块 -&gt; 程序的封装，其实就是.py的python程序<br>(1) import导入的.py模块文件必须放在与python.exe同一目录下，即可正确导入。<br>(2) 导入方法有三种：<br>① import 模块名<br>② from 模块名 import 函数名1, 函数名2, …  #不建议这样用，可能会覆盖系统函数<br>③ import 模块名 as 新名字<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">在python下新建test_module文件夹：C:pythontest_module<br>C:pythontest_moduleTempeatureConversion.py<br>C:pythontest_modulecalc.py<br><span class="hljs-comment">#TempeatureConversion.py</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">c2f</span>(<span class="hljs-params">cel</span>):<br>  fah = cel * <span class="hljs-number">1.8</span> + <span class="hljs-number">32</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">f2c</span>(<span class="hljs-params">fah</span>):<br>  cel = <span class="hljs-built_in">round</span>((fah - <span class="hljs-number">32</span>) / <span class="hljs-number">1.8</span>, <span class="hljs-number">1</span>)<br>  <span class="hljs-keyword">return</span> cel<br><br><br><span class="hljs-comment">#calc.py</span><br><span class="hljs-keyword">import</span> TemperatureConversion <span class="hljs-keyword">as</span> tc<br><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;32摄氏度 = %.1f华氏度&#x27;</span> % tc.c2f(<span class="hljs-number">32</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;99华氏度 = %.1f摄氏度&#x27;</span> % tc.f2c(<span class="hljs-number">99</span>))<br></code></pre></td></tr></table></figure>


<p>运行calc.py：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">=================== RESTART: C:pythontest_modulecalc.py ===================<br><span class="hljs-number">32</span>摄氏度 = <span class="hljs-number">89.6</span>华氏度<br><span class="hljs-number">99</span>华氏度 = <span class="hljs-number">37.2</span>摄氏度<br><span class="hljs-meta">&gt;&gt;&gt; </span><br></code></pre></td></tr></table></figure>


<p><code>__name__</code> 说明<br><code>if __name__ = &#39;__main__&#39;</code>:  #决定是.py文件中的代码是当前程序运行，还是导入到其他程序中作为模块使用而运行<br>作用：限制为自身.py程序运行才执行的代码区域</p>
<p>搜索路径 path<br>(1) 最佳存放模块的目录：C:pythonlibsite-packages</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> sys<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path<br>[<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;C:pythonLibidlelib&#x27;</span>, <span class="hljs-string">&#x27;C:pythonpython35.zip&#x27;</span>, <span class="hljs-string">&#x27;C:pythonDLLs&#x27;</span>, <span class="hljs-string">&#x27;C:pythonlib&#x27;</span>, <span class="hljs-string">&#x27;C:python&#x27;</span>, <span class="hljs-string">&#x27;C:pythonlibsite-packages&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path.append(<span class="hljs-string">&#x27;C:pythontest_module&#x27;</span>)  <span class="hljs-comment">#自定义的模块目录可以append进去</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>sys.path<br>[<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;C:pythonLibidlelib&#x27;</span>, <span class="hljs-string">&#x27;C:pythonpython35.zip&#x27;</span>, <span class="hljs-string">&#x27;C:pythonDLLs&#x27;</span>, <span class="hljs-string">&#x27;C:pythonlib&#x27;</span>, <span class="hljs-string">&#x27;C:python&#x27;</span>, <span class="hljs-string">&#x27;C:pythonlibsite-packages&#x27;</span>, <span class="hljs-string">&#x27;C:pythontest_module&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> TemperatureConversion <span class="hljs-keyword">as</span> temp<br><span class="hljs-meta">&gt;&gt;&gt; </span>temp.c2f(<span class="hljs-number">32</span>)<br><span class="hljs-number">89.6</span><br></code></pre></td></tr></table></figure>


<p>包 package<br>(1) python目录下创建一个文件夹，用于存放相关的模块，文件夹的名字即包(package)的名字<br>(2) 在文件夹中创建一个 <strong>init</strong>.py 的模块文件，内容可以为空<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">C:pythontest_modulecalc.py<br>C:pythontest_moduleM1TemperatureConversion.py  <span class="hljs-comment">#M1文件夹名，即为包名</span><br>C:pythontest_moduleM1__init__.py  <span class="hljs-comment">#告诉python运行时将其解释为包</span><br><span class="hljs-comment">#calc.py中修改为：包名.模块名</span><br><span class="hljs-keyword">import</span> M1.TemperatureConversion <span class="hljs-keyword">as</span> tc<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;32摄氏度 = %.1f华氏度&#x27;</span> % tc.c2f(<span class="hljs-number">32</span>))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;99华氏度 = %.1f摄氏度&#x27;</span> % tc.f2c(<span class="hljs-number">99</span>))<br></code></pre></td></tr></table></figure>


<p>自带电池：python标准库<br>(1) 电池：python-IDLE 帮助文档 F1<br>(2) 来自全球开发者贡献的python模块：<a target="_blank" rel="noopener" href="https://pypi.python.org/pypi">https://pypi.python.org/pypi</a><br>#也可以自己写模块发布上去。<br>(3) PEP：python增强建议书，规范与定义python各种加强和延伸功能的技术规格，即参考标准<br>(4) PEP规范内容历史：<a target="_blank" rel="noopener" href="http://www.python.org/dev/peps">http://www.python.org/dev/peps</a><br>(5) IDLE中模块信息查看：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> timeit<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(timeit.__doc__)  <span class="hljs-comment">#帮助文档</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">dir</span>(timeit)  <span class="hljs-comment">#内置方法</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>timeit.__all__  <span class="hljs-comment">#__all__属性是可供外界调用的类或接口函数</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>timeit.__file__  <span class="hljs-comment">#__file__属性是显示模块源代码在本地的位置(学习高手的代码)</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">help</span>(timeit)  <span class="hljs-comment">#帮助文档</span><br></code></pre></td></tr></table></figure>


<p>timeit 模块详解<br>地址：<a target="_blank" rel="noopener" href="http://bbs.fishc.com/thread-55593-1-1.html">http://bbs.fishc.com/thread-55593-1-1.html</a></p>
<h3 id="22-python实例：网络爬虫"><a href="#22-python实例：网络爬虫" class="headerlink" title="22. python实例：网络爬虫"></a>22. python实例：网络爬虫</h3><p>python访问网络： urllib (是个包模块)<br>URL一般格式：<br>protocol:&#x2F;&#x2F;hostname[:port]&#x2F;path&#x2F;[;parameters][?query]#fragment<br>URL三部分组成：<br>(1) 协议：http, https, ftp, file, ed2k…<br>(2) 域名&#x2F;IP地址：如http默认端口号80<br>(3) 资源具体地址：如目录或文件名</p>
<p>查看帮助文档后发现urllib包有4个模块：<br>urllib.request #for opening and reading URLs<br>urllib.error #containing the exceptions raised by urllib.request<br>urllib.parse #for parsing URLs<br>urllib.robotparser #for parsing robots.txt files<br>尝鲜：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> urllib.request<br><span class="hljs-meta">&gt;&gt;&gt; </span>response = urllib.request.urlopen(<span class="hljs-string">&#x27;http://www.fishc.com&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>html = response.read()<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(html)<br><span class="hljs-string">b&#x27;xef...rn&lt;/html&gt;rn&#x27;</span>  <span class="hljs-comment">#整个网页的二进制文件以16进制显示</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>html = html.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)  <span class="hljs-comment">#按其编码方式解码</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(html)<br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">&lt;!DOCTYPE html&gt;</span><br><span class="hljs-string">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="hljs-string">&lt;head&gt;</span><br><span class="hljs-string">...</span><br><span class="hljs-string">&lt;/head&gt;</span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">&lt;/body&gt;</span><br><span class="hljs-string">&lt;/html&gt;</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br></code></pre></td></tr></table></figure>


<p>访问网页内容存储本地<br>举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.request <span class="hljs-keyword">as</span> url_req<br><br><br>response = url_req.urlopen(<span class="hljs-string">&#x27;http://placekitten.com/g/1920/1080&#x27;</span>)<br>cat_img = response.read()<br><br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;cat_1920_1080.jpg&#x27;</span>, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>  f.write(cat_img)<br></code></pre></td></tr></table></figure>

<p>运行：<br>会生成这个文件：C:UsersJanDesktoppython_studycat_1920_1080.jpg</p>
<p>实现POST请求 - 自动翻译机</p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs xl"><span class="hljs-keyword">import</span> urllib.request <span class="hljs-keyword">as</span> url_req<br><span class="hljs-keyword">import</span> urllib.parse  <span class="hljs-keyword">as</span> url_prs<br><span class="hljs-keyword">import</span> json  #json, 轻量级的数据交换格式<br><br><br><span class="hljs-keyword">while</span> True:<br>  content = input(<span class="hljs-string">&#x27;请输入需要翻译的内容&lt;.q退出&gt;：&#x27;</span>)<br>  <span class="hljs-keyword">if</span> content == <span class="hljs-string">&#x27;.q&#x27;</span>:<br>    break<br>  <span class="hljs-keyword">else</span>:<br>    #注意url地址&lt;有道翻译&gt;，按小甲鱼视频中的可能不对，需到网上查别人的<br>    url = <span class="hljs-string">&#x27;http://fanyi.youdao.com/translate?smartresult=dict&amp;smartresult=rule&amp;smartresult=ugc&amp;sessionFrom=http://www.youdao.com/&#x27;</span><br>    <span class="hljs-keyword">data</span> = &#123;&#125;  #字典类型<br><br><br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;type&#x27;</span>] = <span class="hljs-string">&#x27;AUTO&#x27;</span><br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;i&#x27;</span>] = content<br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;doctype&#x27;</span>] = <span class="hljs-string">&#x27;json&#x27;</span><br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;xmlVersion&#x27;</span>] = <span class="hljs-string">&#x27;1.8&#x27;</span><br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;keyfrom&#x27;</span>] = <span class="hljs-string">&#x27;fanyi.web&#x27;</span><br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;ue&#x27;</span>] = <span class="hljs-string">&#x27;UTF-8&#x27;</span><br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;action&#x27;</span>] = <span class="hljs-string">&#x27;FY_BY_CLICKBUTTON&#x27;</span><br>    <span class="hljs-keyword">data</span>[<span class="hljs-string">&#x27;typoResult&#x27;</span>] = <span class="hljs-string">&#x27;true&#x27;</span><br><br><br>    <span class="hljs-keyword">data</span> = url_prs.urlencode(<span class="hljs-keyword">data</span>).encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    response = url_req.urlopen(url, <span class="hljs-keyword">data</span>)<br>    html = response.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    target = json.loads(html)<br>    print(<span class="hljs-string">&#x27;翻译结果：%s&#x27;</span> % (target[<span class="hljs-string">&#x27;translateResult&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;tgt&#x27;</span>]))<br>#缺陷：能够被识别为代码访问，而非浏览器，即非人类访问<br></code></pre></td></tr></table></figure>

<p>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">========= RESTART: C:UsersJanDesktoppython_studytranslation.py =========<br>请输入需要翻译的内容&lt;.q退出&gt;：生存，还是毁灭，这是一个问题<br>翻译结果：To survive, <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> to be, this <span class="hljs-keyword">is</span> a problem<br>请输入需要翻译的内容&lt;.q退出&gt;：To be <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> to be, it<span class="hljs-string">&#x27;s a question.</span><br><span class="hljs-string">翻译结果：生存还是毁灭,这是一个问题。</span><br><span class="hljs-string">请输入需要翻译的内容&lt;.q退出&gt;：.q</span><br><span class="hljs-string">&gt;&gt;&gt; </span><br></code></pre></td></tr></table></figure>


<p>修改header<br>(1) 通过Request的headers参数修改，字典形式<br>(2) 通过Request.add_header()方法修改<br>追加header模拟浏览器访问：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.request <span class="hljs-keyword">as</span> url_req<br><span class="hljs-keyword">import</span> urllib.parse  <span class="hljs-keyword">as</span> url_prs<br><span class="hljs-keyword">import</span> json  <span class="hljs-comment">#json, 轻量级的数据交换格式</span><br><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>  content = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入需要翻译的内容&lt;.q退出&gt;：&#x27;</span>)<br>  <span class="hljs-keyword">if</span> content == <span class="hljs-string">&#x27;.q&#x27;</span>:<br>    <span class="hljs-keyword">break</span><br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-comment">#注意url地址，视频中的可能不对需到网上查</span><br>    url = <span class="hljs-string">&#x27;http://fanyi.youdao.com/translate?smartresult=dict&amp;smartresult=rule&amp;smartresult=ugc&amp;sessionFrom=http://www.youdao.com/&#x27;</span><br><br><br>    <span class="hljs-comment">#header方法1：创建字典，请求中传参</span><br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    head = &#123;&#125;  #模拟浏览器访问 Request Headers</span><br><span class="hljs-string">    head[&#x27;User-Agent&#x27;] = &#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    data = &#123;&#125;  <span class="hljs-comment">#From data</span><br>    data[<span class="hljs-string">&#x27;type&#x27;</span>] = <span class="hljs-string">&#x27;AUTO&#x27;</span><br>    data[<span class="hljs-string">&#x27;i&#x27;</span>] = content<br>    data[<span class="hljs-string">&#x27;doctype&#x27;</span>] = <span class="hljs-string">&#x27;json&#x27;</span><br>    data[<span class="hljs-string">&#x27;xmlVersion&#x27;</span>] = <span class="hljs-string">&#x27;1.8&#x27;</span><br>    data[<span class="hljs-string">&#x27;keyfrom&#x27;</span>] = <span class="hljs-string">&#x27;fanyi.web&#x27;</span><br>    data[<span class="hljs-string">&#x27;ue&#x27;</span>] = <span class="hljs-string">&#x27;UTF-8&#x27;</span><br>    data[<span class="hljs-string">&#x27;action&#x27;</span>] = <span class="hljs-string">&#x27;FY_BY_CLICKBUTTON&#x27;</span><br>    data[<span class="hljs-string">&#x27;typoResult&#x27;</span>] = <span class="hljs-string">&#x27;true&#x27;</span><br>    data = url_prs.urlencode(data).encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br><br>    <span class="hljs-string">&#x27;&#x27;&#x27;req = url_req.Request(url, data, head)  #调用请求的方法：data, head &#x27;&#x27;&#x27;</span><br>    <span class="hljs-comment">#header方法2：请求中追加header</span><br>    req = url_req.Request(url, data)<br>    req.add_header(<span class="hljs-string">&#x27;User-Agent&#x27;</span>, <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;</span>)<br><br><br>    response = url_req.urlopen(req)<br>    html = response.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>    target = json.loads(html)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;翻译结果：%s&#x27;</span> % (target[<span class="hljs-string">&#x27;translateResult&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;tgt&#x27;</span>]))<br></code></pre></td></tr></table></figure>

<p>运行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">========= RESTART: C:UsersJanDesktoppython_studytranslation.py =========<br>请输入需要翻译的内容&lt;.q退出&gt;：生存，还是毁灭，这是一个问题<br>翻译结果：To survive, <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> to be, this <span class="hljs-keyword">is</span> a problem<br>请输入需要翻译的内容&lt;.q退出&gt;：To be <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> to be, it<span class="hljs-string">&#x27;s a question.</span><br><span class="hljs-string">翻译结果：生存还是毁灭,这是一个问题。</span><br><span class="hljs-string">请输入需要翻译的内容&lt;.q退出&gt;：.q</span><br><span class="hljs-string">&gt;&gt;&gt; </span><br></code></pre></td></tr></table></figure>


<p>代理<br>作用：让爬虫伪装浏览器请求，让http服务器不会认为是非人类访问。<br>步骤：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">(<span class="hljs-number">1</span>) 参数是一个字典&#123;<span class="hljs-string">&#x27;类型&#x27;</span>:<span class="hljs-string">&#x27;代理ip:端口号&#x27;</span>&#125;<br>proxy_support = urllib.request.ProxyHandler(&#123;&#125;)<br>(<span class="hljs-number">2</span>) 定制、创建一个opener<br>opener = urllib.request.build_opener(proxy_support)<br>(<span class="hljs-number">3</span>) 安装opener<br>urllib.request.install_opener(opener)<br>(<span class="hljs-number">4</span>) 调用opener<br>opener.<span class="hljs-built_in">open</span>(url)<br><span class="hljs-comment">#或：urllib.request.urlopen(url)</span><br></code></pre></td></tr></table></figure>
<p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.request <span class="hljs-keyword">as</span> url_req<br><span class="hljs-keyword">import</span> random<br><br><br><br>url = <span class="hljs-string">&#x27;http://www.whatismyip.com.tw&#x27;</span>  <span class="hljs-comment">#这个网站访问它会显示自己的ip地址</span><br><br><br><span class="hljs-comment">#待完善：抓取代理ip网站上的ip和端口，存入iplist</span><br>iplist = [<span class="hljs-string">&#x27;115.197.136.78:8118&#x27;</span>, <span class="hljs-string">&#x27;118.250.50.69:80&#x27;</span>, <span class="hljs-string">&#x27;183.133.81.57:8118&#x27;</span>,  <span class="hljs-string">&#x27;113.77.240.236:9797&#x27;</span>, <span class="hljs-string">&#x27;139.129.166.68:3128&#x27;</span>]  <span class="hljs-comment">#使用random随机取ip</span><br><br><br><span class="hljs-comment">#网上查的免费代理ip网站：http://www.xicidaili.com/</span><br>proxy_support = url_req.ProxyHandler(&#123;<span class="hljs-string">&#x27;http&#x27;</span>:random.choice(iplist)&#125;)<br>opener = url_req.build_opener(proxy_support)<br><br><br><span class="hljs-comment">#headers = &#123;&#x27;User-Agent&#x27;:&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;&#125;</span><br>opener.addheaders = [(<span class="hljs-string">&#x27;User-Agent&#x27;</span>, <span class="hljs-string">&#x27;Chrome/55.0.2883.87&#x27;</span>)]<br>url_req.install_opener(opener)<br><br><br><span class="hljs-comment">#req = url_req.Request(url, headers=headers)</span><br><span class="hljs-comment">#response = url_req.urlopen(req)</span><br>response = url_req.urlopen(url)<br><br><br>html = response.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><span class="hljs-built_in">print</span>(html)<br></code></pre></td></tr></table></figure>

<p>补充：<br>Beautiful Soup 是用Python写的一个HTML&#x2F;XML的解析器，使用安装python-IDLE时附带的pip命令，直接在windows下执行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">C:python&gt; pip install bs4<br><span class="hljs-comment">#一键安装搞定，python中测试能否导入成功</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment">#成功导入，失败会报异常。</span><br></code></pre></td></tr></table></figure>


<p>采集代理ip</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.request <span class="hljs-keyword">as</span> url_req<br><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup  <span class="hljs-comment">#此库需要安装:win-cmd执行&quot;pip install bs4&quot;即可</span><br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> pprint <span class="hljs-keyword">as</span> ppr<br><br><br><span class="hljs-comment">#这个网站访问它会显示自己的ip地址</span><br>display_ip_url = <span class="hljs-string">&#x27;http://www.whatismyip.com.tw&#x27;</span>  <span class="hljs-comment">#&#x27;http://ip.chinaz.com/getip.aspx&#x27;</span><br><br><br><span class="hljs-comment">#代理ip网站, http协议类型</span><br>proxy_ip_url = <span class="hljs-string">&#x27;http://www.xicidaili.com/wt/&#x27;</span><br><br><br>header = &#123;&#125;<br>header[<span class="hljs-string">&#x27;User-Agent&#x27;</span>] = <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;</span><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getProxyIp</span>():  <span class="hljs-comment">#获取代理ip</span><br>  proxyip_list = []<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>):<br>    <span class="hljs-keyword">try</span>:<br>      url = proxy_ip_url + <span class="hljs-built_in">str</span>(i)  <span class="hljs-comment">#抓取前2页</span><br>      req = url_req.Request(url, headers=header)<br>      res = url_req.urlopen(req).read()<br>      soup = BeautifulSoup(res, <span class="hljs-string">&quot;html.parser&quot;</span>)  <span class="hljs-comment">#BeautifulSoup(markup, “html.parser”) html解析器</span><br>      ips = soup.findAll(<span class="hljs-string">&#x27;tr&#x27;</span>)  <span class="hljs-comment">#findAll()搜索解析器解析出来的html文档树</span><br>      <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(ips)):<br>        ip = ips[x]<br>        tds = ip.findAll(<span class="hljs-string">&#x27;td&#x27;</span>)  <span class="hljs-comment">#ip和端口都在tr标签中的td标签中</span><br>        ip_tmp = tds[<span class="hljs-number">1</span>].contents[<span class="hljs-number">0</span>] + <span class="hljs-string">&#x27;:&#x27;</span> + tds[<span class="hljs-number">2</span>].contents[<span class="hljs-number">0</span>]<br>        proxyip_list.append(ip_tmp)  <span class="hljs-comment">#追加到列表</span><br>    <span class="hljs-keyword">except</span>:<br>      <span class="hljs-keyword">continue</span><br>  <span class="hljs-keyword">return</span> proxyip_list<br><br><br>iplist = getProxyIp()<br><span class="hljs-comment">#print(iplist)  #for test</span><br>ppr.pprint(iplist)  <span class="hljs-comment">#以更规范的格式显示输出结果</span><br><br><br><span class="hljs-comment">#第一步：ProxyHandler传参</span><br>ip_port = random.choice(iplist)<br>proxy_support = url_req.ProxyHandler(&#123;<span class="hljs-string">&#x27;http&#x27;</span>:ip_port&#125;)  <span class="hljs-comment">#从列表中随机选择代理ip和端口项</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ip:port   &#x27;</span> + ip_port)<br><span class="hljs-comment">#第二步：opener创建</span><br>opener = url_req.build_opener(proxy_support)<br><span class="hljs-comment">#第三步：opener安装</span><br>opener.addheaders = [(<span class="hljs-string">&#x27;User-Agent&#x27;</span>, <span class="hljs-string">&#x27;Chrome/55.0.2883.87&#x27;</span>)]<br>url_req.install_opener(opener)<br><span class="hljs-comment">#第四步：opener调用</span><br><span class="hljs-comment">#response = url_req.urlopen(display_ip_url)</span><br>response = opener.<span class="hljs-built_in">open</span>(display_ip_url)  <br><br><br>html = response.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><span class="hljs-built_in">print</span>(html)<br></code></pre></td></tr></table></figure>


<p>运行：<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; RESTART: C:UsersJanDesktoppython_studyproxy_support.py &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">HTML</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br> ...<br> <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>IP位址<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-ip</span>=<span class="hljs-string">&#x27;183.56.177.130&#x27;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;font-size: 1.5em;&#x27;</span>&gt;</span>183.56.177.130<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-ip-country</span>=<span class="hljs-string">&#x27;CN&#x27;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>CN<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>真實IP<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-ip-real</span>=<span class="hljs-string">&#x27;113.110.143.94&#x27;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#x27;font-size: 1.5em;&#x27;</span>&gt;</span>113.110.143.94<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">data-ip-real-country</span>=<span class="hljs-string">&#x27;CN&#x27;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>CN<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;application/json&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;ip-json&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">&#123;</span><br><span class="language-javascript"><span class="hljs-string">&quot;ip&quot;</span>: <span class="hljs-string">&quot;183.56.177.130&quot;</span>,</span><br><span class="language-javascript"><span class="hljs-string">&quot;ip-country&quot;</span>: <span class="hljs-string">&quot;CN&quot;</span>,</span><br><span class="language-javascript"><span class="hljs-string">&quot;ip-real&quot;</span>: <span class="hljs-string">&quot;113.110.143.94&quot;</span>,</span><br><span class="language-javascript"><span class="hljs-string">&quot;ip-real-country&quot;</span>: <span class="hljs-string">&quot;CN&quot;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"> </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br> ...<br> <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    2017.09.04          
</code></pre>
<p>urllib.request 返回响应后的内置方法<br>import urllib.request as url_req<br>req &#x3D; url_req.Request(‘<a target="_blank" rel="noopener" href="http://url&/#39;">http://url&#39;</a>)<br>res &#x3D; url_req.urlopen(req) #打开一个链接，参数可以是一个字符串或者Request对象<br>res.geturl() #返回链接的字符串，即urlopen的字符串参数<br>res.info() #返回http响应数据包的头headers, 输出：print(res.info())<br>res.getcode() #返回http响应的状态码</p>
<p>举例：<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; RESTART: C:&#x2F;Users&#x2F;Jan&#x2F;Desktop&#x2F;download_cat.py &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>res.geturl()<br><span class="hljs-string">&#x27;http://placekitten.com/g/500/600&#x27;</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>res.info()<br>&lt;http.client.HTTPMessage <span class="hljs-built_in">object</span> at <span class="hljs-number">0x0000022E09C006D8</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>res.headers<br>&lt;http.client.HTTPMessage <span class="hljs-built_in">object</span> at <span class="hljs-number">0x0000022E09C006D8</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(res.info())<br>Date: Mon, 04 Sep <span class="hljs-number">2017</span> <span class="hljs-number">13</span>:<span class="hljs-number">11</span>:<span class="hljs-number">21</span> GMT<br>Content-<span class="hljs-type">Type</span>: image/jpeg<br>Content-Length: <span class="hljs-number">26590</span><br>Connection: close<br><span class="hljs-type">Set</span>-Cookie: __cfduid=d8354310653b8846db674de048175187b1504530681; expires=Tue, 04-Sep-<span class="hljs-number">18</span> <span class="hljs-number">13</span>:<span class="hljs-number">11</span>:<span class="hljs-number">21</span> GMT; path=/; domain=.placekitten.com; HttpOnly<br>Accept-Ranges: <span class="hljs-built_in">bytes</span><br>X-Powered-By: PleskLin<br>Access-Control-Allow-Origin: *<br>Cache-Control: public<br>Expires: Thu, <span class="hljs-number">31</span> Dec <span class="hljs-number">2020</span> <span class="hljs-number">20</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT<br>Server: cloudflare-nginx<br>CF-RAY: 399131b5435b6d4e-SJC<br><span class="hljs-meta">&gt;&gt;&gt; </span>res.getcode()<br><span class="hljs-number">200</span><br></code></pre></td></tr></table></figure>


<p>python爬虫下载妹子图<br>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#代理ip不太稳定，免费代理很多时好时坏</span><br><span class="hljs-keyword">import</span> urllib.request<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> pprint <span class="hljs-keyword">as</span> ppr<br><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><br><br>header = &#123;&#125;<br>header_key = <span class="hljs-string">&#x27;User-Agent&#x27;</span><br>header_value = <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;</span><br>header[header_key] = header_value<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_proxy_ip</span>():  <span class="hljs-comment">#获取代理ip</span><br>  proxyip_list = []<br>  proxy_ip_url = <span class="hljs-string">&#x27;http://www.xicidaili.com/wt/&#x27;</span><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>):<br>    <span class="hljs-keyword">try</span>:<br>      url = proxy_ip_url + <span class="hljs-built_in">str</span>(i)<br>      req = urllib.request.Request(url, headers=header)<br>      res = urllib.request.urlopen(req).read()<br>      soup = BeautifulSoup(res, <span class="hljs-string">&quot;html.parser&quot;</span>)<br>      ips = soup.findAll(<span class="hljs-string">&#x27;tr&#x27;</span>)<br>      <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(ips)):<br>        ip = ips[x]<br>        tds = ip.findAll(<span class="hljs-string">&#x27;td&#x27;</span>)<br>        ip_tmp = tds[<span class="hljs-number">1</span>].contents[<span class="hljs-number">0</span>] + <span class="hljs-string">&#x27;:&#x27;</span> + tds[<span class="hljs-number">2</span>].contents[<span class="hljs-number">0</span>]<br>        proxyip_list.append(ip_tmp)<br>    <span class="hljs-keyword">except</span>:<br>      <span class="hljs-keyword">continue</span><br>  <span class="hljs-keyword">return</span> proxyip_list<br><br><br><span class="hljs-comment">#打开url接口函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">url_open</span>(<span class="hljs-params">url</span>):<br>  req = urllib.request.Request(url)<br>  req.add_header(header_key, header_value)<br>  <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">  #使用代理模拟真人访问而不是代码访问</span><br><span class="hljs-string">  iplist = get_proxy_ip()</span><br><span class="hljs-string">  #ppr.pprint(iplist)  #for test</span><br><span class="hljs-string">  ip_port = random.choice(iplist)</span><br><span class="hljs-string">  proxy_support = urllib.request.ProxyHandler(&#123;&#x27;http&#x27;:ip_port&#125;)</span><br><span class="hljs-string">  print(&#x27;ip:port   &#x27; + ip_port)  #for test</span><br><span class="hljs-string">  opener = urllib.request.build_opener(proxy_support)</span><br><span class="hljs-string">  opener.addheaders = [(&#x27;User-Agent&#x27;, &#x27;Chrome/55.0.2883.87&#x27;)]</span><br><span class="hljs-string">  urllib.request.install_opener(opener)</span><br><span class="hljs-string">  &#x27;&#x27;&#x27;</span><br>  res = urllib.request.urlopen(url)<br>  html = res.read()<br><br><br>  <span class="hljs-built_in">print</span>(url)<br>  <span class="hljs-keyword">return</span> html<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_page</span>(<span class="hljs-params">url</span>):<br>  html = url_open(url).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br><br>  a = html.find(<span class="hljs-string">&#x27;current-comment-page&#x27;</span>) + <span class="hljs-number">23</span><br>  b = html.find(<span class="hljs-string">&#x27;]&#x27;</span>, a)  <span class="hljs-comment">#从a位置开始找到一个]符号</span><br>  <span class="hljs-built_in">print</span> (html[a:b])  <span class="hljs-comment">#for test</span><br><br><br>  <span class="hljs-keyword">return</span> html[a:b]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_imgs</span>(<span class="hljs-params">url</span>):<br>  html = url_open(url).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>  img_addrs = []<br><br><br>  a = html.find(<span class="hljs-string">&#x27;img src=&#x27;</span>)  <span class="hljs-comment">#找到 img src= 的位置</span><br><br><br>  <span class="hljs-keyword">while</span> a != -<span class="hljs-number">1</span>:<br>    b = html.find(<span class="hljs-string">&#x27;.jpg&#x27;</span>, a, a+<span class="hljs-number">255</span>)  <span class="hljs-comment">#找到从a位置开始，以 .jpg 结尾的地方</span><br>    <span class="hljs-keyword">if</span> b != -<span class="hljs-number">1</span>:  <span class="hljs-comment">#find找不到时返回-1</span><br>      img_addrs.append(<span class="hljs-string">&#x27;http:&#x27;</span> + html[a+<span class="hljs-number">9</span>:b+<span class="hljs-number">4</span>])  <span class="hljs-comment">#图片链接地址追加到列表中, 9=len(&#x27;img src=&quot;&#x27;), 4=len(&#x27;.jpg&#x27;)</span><br>    <span class="hljs-keyword">else</span>:<br>      b = a + <span class="hljs-number">9</span><br>    <br>    a = html.find(<span class="hljs-string">&#x27;img src=&#x27;</span>, b)    <span class="hljs-comment">#下一次循环所找的位置就是从b开始</span><br><br><br>  <span class="hljs-comment">#for each in img_addrs:</span><br>  <span class="hljs-comment">#   print(each)</span><br><br><br>  <span class="hljs-keyword">return</span> img_addrs<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">save_imgs</span>(<span class="hljs-params">folder, img_addrs</span>):<br>  <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> img_addrs:<br>    filename = each.split(<span class="hljs-string">&#x27;/&#x27;</span>)[-<span class="hljs-number">1</span>]  <span class="hljs-comment">#split以/分割字符串，-1取最后一个元素</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>      img = url_open(each)<br>      f.write(img)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">download_mm</span>(<span class="hljs-params">folder=<span class="hljs-string">&#x27;mm_dir&#x27;</span>, pages=<span class="hljs-number">25</span></span>):<br>  <span class="hljs-keyword">if</span> os.path.exists(folder):<br>    os.chdir(folder)<br>  <span class="hljs-keyword">else</span>:<br>    os.mkdir(folder)<br>    os.chdir(folder)<br><br><br>  url = <span class="hljs-string">&#x27;http://jandan.net/ooxx/&#x27;</span>  <span class="hljs-comment">#实际图源来源于新浪服务器</span><br>  page_num = <span class="hljs-built_in">int</span>(get_page(url))   <span class="hljs-comment">#函数get_page()</span><br><br><br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(pages):<br>    page_num -= i<br>    page_url = url + <span class="hljs-string">&#x27;page-&#x27;</span> + <span class="hljs-built_in">str</span>(page_num) + <span class="hljs-string">&#x27;#comments&#x27;</span><br>    img_addrs = find_imgs(page_url)  <span class="hljs-comment">#函数find_imgs()</span><br>    save_imgs(folder, img_addrs)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>  download_mm()<br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    2017.09.05          
</code></pre>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>“我知道，可以使用正则表达式解决现在遇到的难题。”于是，现在他就有两个问题了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> re<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;Hello&#x27;</span>, <span class="hljs-string">&#x27;I love you, Hello!~&#x27;</span>)  <span class="hljs-comment">#search()方法用于在字符串中搜索正则表达式模式第一次出现的位置</span><br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">12</span>, <span class="hljs-number">17</span>), match=<span class="hljs-string">&#x27;Hello&#x27;</span>&gt;  <span class="hljs-comment">#第12-16个字符位置</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;lo&#x27;</span>, <span class="hljs-string">&#x27;hello&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>), match=<span class="hljs-string">&#x27;lo&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-string">&#x27;hello&#x27;</span>.find(<span class="hljs-string">&#x27;lo&#x27;</span>)<br><span class="hljs-number">3</span><br><span class="hljs-comment">#.点号：匹配除了换行符的任何字符</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;.&#x27;</span>, <span class="hljs-string">&#x27;I love you, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), match=<span class="hljs-string">&#x27;I&#x27;</span>&gt;<br><span class="hljs-comment">#匹配点号本身，使用反斜杠转义即可</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;.&#x27;</span>, <span class="hljs-string">&#x27;I love you, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">17</span>, <span class="hljs-number">18</span>), match=<span class="hljs-string">&#x27;.&#x27;</span>&gt;<br><span class="hljs-comment">#d表示匹配一个0~9的数字</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;d&#x27;</span>, <span class="hljs-string">&#x27;I love 123, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>), match=<span class="hljs-string">&#x27;1&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;ddd&#x27;</span>, <span class="hljs-string">&#x27;I love 123, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">7</span>, <span class="hljs-number">10</span>), match=<span class="hljs-string">&#x27;123&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;ddd.ddd.ddd.ddd&#x27;</span>, <span class="hljs-string">&#x27;192.168.111.123:8080&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">0</span>, <span class="hljs-number">15</span>), match=<span class="hljs-string">&#x27;192.168.111.123&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;ddd.ddd.ddd.ddd&#x27;</span>, <span class="hljs-string">&#x27;192.168.1.1&#x27;</span>) <span class="hljs-comment">#无法匹配，位数不同</span><br><span class="hljs-comment">#使用[]创建一个字符类</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;[aeiou]&#x27;</span>, <span class="hljs-string">&#x27;I love you, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>), match=<span class="hljs-string">&#x27;o&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;[aeiouAEIOU]&#x27;</span>, <span class="hljs-string">&#x27;I love you, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), match=<span class="hljs-string">&#x27;I&#x27;</span>&gt;<br><span class="hljs-comment">#-短杠：表示匹配的范围</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;[a-z]&#x27;</span>, <span class="hljs-string">&#x27;I love you, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), match=<span class="hljs-string">&#x27;l&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;[0-9]&#x27;</span>, <span class="hljs-string">&#x27;I love 123, baidu.com!~&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>), match=<span class="hljs-string">&#x27;1&#x27;</span>&gt;<br><span class="hljs-comment">#&#123;&#125;大括号：来限定匹配的次数</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;ab&#123;3&#125;c&#x27;</span>, <span class="hljs-string">&#x27;zabbbcz&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>), match=<span class="hljs-string">&#x27;abbbc&#x27;</span>&gt;<br><span class="hljs-comment">#&#123;&#125;3,10代表3到10次重复次数，不能有空格出现</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;ab&#123;3, 10&#125;c&#x27;</span>, <span class="hljs-string">&#x27;zabbbbbcz&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;ab&#123;3,10&#125;c&#x27;</span>, <span class="hljs-string">&#x27;zabbbbbcz&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">1</span>, <span class="hljs-number">8</span>), match=<span class="hljs-string">&#x27;abbbbbc&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;[0-2][0-5][0-5]&#x27;</span>, <span class="hljs-string">&#x27;188&#x27;</span>)  <span class="hljs-comment">#错误示范</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;[0-255]&#x27;</span>, <span class="hljs-string">&#x27;188&#x27;</span>)  <span class="hljs-comment">#0,1,2,5其中任何一个，匹配</span><br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>), match=<span class="hljs-string">&#x27;1&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;[01]dd|2[0-4]d|25[0-5]&#x27;</span>, <span class="hljs-string">&#x27;188&#x27;</span>)  <span class="hljs-comment">#0-255正则表达式</span><br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>), match=<span class="hljs-string">&#x27;188&#x27;</span>&gt;<br><span class="hljs-comment">#ip地址正则表达式</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;(([01]&#123;0,1&#125;d&#123;0,1&#125;d|2[0-4]d|25[0-5]).)&#123;3&#125;([01]&#123;0,1&#125;d&#123;0,1&#125;d|2[0-4]d|25[0-5])&#x27;</span>, <span class="hljs-string">&#x27;192.168.1.1&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">0</span>, <span class="hljs-number">11</span>), match=<span class="hljs-string">&#x27;192.168.1.1&#x27;</span>&gt;<br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;(([01]&#123;0,1&#125;d&#123;0,1&#125;d|2[0-4]d|25[0-5]).)&#123;3&#125;([01]&#123;0,1&#125;d&#123;0,1&#125;d|2[0-4]d|25[0-5])&#x27;</span>, <span class="hljs-string">&#x27;255.255.255.0&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">0</span>, <span class="hljs-number">13</span>), match=<span class="hljs-string">&#x27;255.255.255.0&#x27;</span>&gt;<br><span class="hljs-comment">#此ip表达式的一点bug：</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>re.search(<span class="hljs-string">r&#x27;(([01]&#123;0,1&#125;d&#123;0,1&#125;d|2[0-4]d|25[0-5]).)&#123;3&#125;([01]&#123;0,1&#125;d&#123;0,1&#125;d|2[0-4]d|25[0-5])&#x27;</span>, <span class="hljs-string">&#x27;11192.168.41.8888&#x27;</span>)<br>&lt;_sre.SRE_Match <span class="hljs-built_in">object</span>; span=(<span class="hljs-number">2</span>, <span class="hljs-number">15</span>), match=<span class="hljs-string">&#x27;192.168.41.88&#x27;</span>&gt;<br><br><br><span class="hljs-comment">#ip地址匹配的正则表达式【严谨版】</span><br><span class="hljs-keyword">import</span> re<br>ptnIP = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&#x27;(?&lt;![d.])&#x27;</span> <span class="hljs-comment"># 前导 无 数字和小数点</span><br>          <span class="hljs-string">r&#x27;(?:(?:&#x27;</span><br>          <span class="hljs-string">r&#x27;[01]?d?d&#x27;</span> <span class="hljs-comment">#  0 ~ 199</span><br>          <span class="hljs-string">r&#x27;|2[0-4]d&#x27;</span>  <span class="hljs-comment"># 200 ~ 249</span><br>          <span class="hljs-string">r&#x27;|25[0-5])&#x27;</span>  <span class="hljs-comment"># 250 ~ 255</span><br>          <span class="hljs-string">r&#x27;.)&#123;3&#125;&#x27;</span>   <span class="hljs-comment"># 3组 xxx.</span><br>          <span class="hljs-string">r&#x27;(?:&#x27;</span><br>          <span class="hljs-string">r&#x27;[01]?d?d&#x27;</span><br>          <span class="hljs-string">r&#x27;|2[0-4]d&#x27;</span><br>          <span class="hljs-string">r&#x27;|25[0-5])&#x27;</span><br>          <span class="hljs-string">r&#x27;(?![d.])&#x27;</span>  <span class="hljs-comment"># 后续 无 数字和小数点</span><br>         )<br>test_IP = (<br>    <span class="hljs-string">&#x27;0.0.0.0&#x27;</span><br>    <span class="hljs-string">&#x27;;1.22.333.444&#x27;</span>     <span class="hljs-comment">#不合法</span><br>    <span class="hljs-string">&#x27;;2.0.0.256&#x27;</span>       <span class="hljs-comment">#不合法</span><br>    <span class="hljs-string">&#x27;;3.22.33.23333333&#x27;</span>   <span class="hljs-comment">#不合法</span><br>    <span class="hljs-string">&#x27;;4.2.3.4.5&#x27;</span>       <span class="hljs-comment">#不合法</span><br>    <span class="hljs-string">&#x27;;5.111.222.99&#x27;</span><br>    <span class="hljs-string">&#x27;;6.0.0.0&#x27;</span><br>    <span class="hljs-string">&#x27;;7.234.234.234&#x27;</span><br>    <span class="hljs-string">&#x27;;255.255.255.255&#x27;</span><br>    <span class="hljs-string">&#x27;;234.234.234.234&#x27;</span><br>    <span class="hljs-string">&#x27;;1192.168.41.888&#x27;</span>    <span class="hljs-comment">#不合法</span><br>    )<br>match = ptnIP.findall(test_IP)<br><span class="hljs-built_in">print</span>(match)<br></code></pre></td></tr></table></figure>


<p>运行：<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; RESTART: C:UsersJanDesktoppython_studyip_regular.py &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">[<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, <span class="hljs-string">&#x27;5.111.222.99&#x27;</span>, <span class="hljs-string">&#x27;6.0.0.0&#x27;</span>, <span class="hljs-string">&#x27;7.234.234.234&#x27;</span>, <span class="hljs-string">&#x27;255.255.255.255&#x27;</span>, <span class="hljs-string">&#x27;234.234.234.234&#x27;</span>]  <span class="hljs-comment">#输出均为合法ip</span><br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    2017.09.07          
</code></pre>
<p>Python3 正则表达式特殊符号及用法（详细列表）<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/riba2534/article/details/54288552">http://blog.csdn.net/riba2534/article/details/54288552</a></p>
<p>正则表达式举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.request<br><span class="hljs-keyword">import</span> re<br><br><br>header = &#123;&#125;<br>header_key = <span class="hljs-string">&#x27;User-Agent&#x27;</span><br>header_value = <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;</span><br>header[header_key] = header_value<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">open_url</span>(<span class="hljs-params">url</span>):<br>  req = urllib.request.Request(url)<br>  req.add_header(header_key, header_value)<br>  page = urllib.request.urlopen(req)<br>  html = page.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br><br>  <span class="hljs-keyword">return</span> html<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_img</span>(<span class="hljs-params">html</span>):<br>  p = <span class="hljs-string">r&#x27;&lt;img class=&quot;BDE_Image&quot; src=&quot;([^&quot;]+.jpg)&#x27;</span>  <span class="hljs-comment"># 正则表达式匹配贴吧图片链接</span><br>  imglist = re.findall(p, html)  <span class="hljs-comment"># findall中的p包含子组()的话，会单独返回子组</span><br><br><br>  <span class="hljs-comment"># test start</span><br>  <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> imglist:<br>    <span class="hljs-built_in">print</span>(each)<br>  <span class="hljs-comment"># test end</span><br><br><br>  <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> imglist:<br>    filename = each.split(<span class="hljs-string">&quot;/&quot;</span>)[-<span class="hljs-number">1</span>]<br>    urllib.request.urlretrieve(each, filename, <span class="hljs-literal">None</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>  url = <span class="hljs-string">&#x27;https://tieba.baidu.com/p/5310571187&#x27;</span>  <span class="hljs-comment"># 下载百度贴吧图片示例</span><br>  get_img(open_url(url))<br></code></pre></td></tr></table></figure>


<p>运行：<br><a target="_blank" rel="noopener" href="https://imgsa.baidu.com/forum/w%3D580/sign=0b340d2849a7d933bfa8e47b9d4ad194/f1f8e3dde71190ef7241a5e3c51b9d16fcfa60a4.jpg">https://imgsa.baidu.com/forum/w%3D580/sign=0b340d2849a7d933bfa8e47b9d4ad194/f1f8e3dde71190ef7241a5e3c51b9d16fcfa60a4.jpg</a><br><a target="_blank" rel="noopener" href="https://imgsa.baidu.com/forum/w%3D580/sign=6ff2514ff0f2b211e42e8546fa816511/fe4fbf014a90f6030c47ab7b3212b31bb151ed60.jpg">https://imgsa.baidu.com/forum/w%3D580/sign=6ff2514ff0f2b211e42e8546fa816511/fe4fbf014a90f6030c47ab7b3212b31bb151ed60.jpg</a><br><a target="_blank" rel="noopener" href="https://imgsa.baidu.com/forum/w%3D580/sign=7f8aadd5f9d3572c66e29cd4ba136352/b9dc748b4710b912bda70cc2c8fdfc03934522f1.jpg">https://imgsa.baidu.com/forum/w%3D580/sign=7f8aadd5f9d3572c66e29cd4ba136352/b9dc748b4710b912bda70cc2c8fdfc03934522f1.jpg</a></p>
<p>优化采集代理ip：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.request<br><span class="hljs-keyword">import</span> re<br><br><br>header = &#123;&#125;<br>header_key = <span class="hljs-string">&#x27;User-Agent&#x27;</span><br>header_value = <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36&#x27;</span><br>header[header_key] = header_value<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">open_url</span>(<span class="hljs-params">url</span>):<br>  req = urllib.request.Request(url)<br>  req.add_header(header_key, header_value)<br>  page = urllib.request.urlopen(req)<br>  html = page.read().decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br><br>  <span class="hljs-keyword">return</span> html<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_ip</span>(<span class="hljs-params">html</span>):<br>  ptnIP = (<span class="hljs-string">r&#x27;(?&lt;![d.])&#x27;</span> <span class="hljs-comment"># 前导 无 数字和小数点</span><br>       <span class="hljs-string">r&#x27;(?:(?:&#x27;</span><br>       <span class="hljs-string">r&#x27;[01]?d?d&#x27;</span> <span class="hljs-comment">#  0 ~ 199</span><br>       <span class="hljs-string">r&#x27;|2[0-4]d&#x27;</span>  <span class="hljs-comment"># 200 ~ 249</span><br>       <span class="hljs-string">r&#x27;|25[0-5])&#x27;</span>  <span class="hljs-comment"># 250 ~ 255</span><br>       <span class="hljs-string">r&#x27;.)&#123;3&#125;&#x27;</span>   <span class="hljs-comment"># 3组 xxx.</span><br>       <span class="hljs-string">r&#x27;(?:&#x27;</span><br>       <span class="hljs-string">r&#x27;[01]?d?d&#x27;</span><br>       <span class="hljs-string">r&#x27;|2[0-4]d&#x27;</span><br>       <span class="hljs-string">r&#x27;|25[0-5])&#x27;</span><br>       <span class="hljs-string">r&#x27;(?![d.])&#x27;</span>) <span class="hljs-comment"># 后续 无 数字和小数点</span><br>  iplist = re.findall(ptnIP, html)  <span class="hljs-comment"># findall中的p包含子组()的话，会单独返回子组</span><br><br><br>  <span class="hljs-comment"># test start</span><br>  <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> iplist:<br>    <span class="hljs-built_in">print</span>(each)<br>  <span class="hljs-comment"># test end</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>  url = <span class="hljs-string">&#x27;http://www.xicidaili.com/wt/&#x27;</span>  <span class="hljs-comment"># 下载代理ip</span><br>  get_ip(open_url(url))<br></code></pre></td></tr></table></figure>

<p>异常处理<br>URLError 举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> urllib.request<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> urllib.error<br><span class="hljs-meta">&gt;&gt;&gt; </span>req = urllib.request.Request(<span class="hljs-string">&#x27;http://www.ooxx-hello.com&#x27;</span>)  <span class="hljs-comment">#打开一个不存在的链接</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">try</span>:<br>urllib.request.urlopen(req)<br><span class="hljs-keyword">except</span> urllib.error.URLError <span class="hljs-keyword">as</span> e:<br><span class="hljs-built_in">print</span>(e.reason)<br>[Errno <span class="hljs-number">11001</span>] getaddrinfo failed  <span class="hljs-comment">#错误信息</span><br></code></pre></td></tr></table></figure>

<p>HTTPError 举例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> urllib.request<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> urllib.error<br><span class="hljs-meta">&gt;&gt;&gt; </span>req = urllib.request.Request(<span class="hljs-string">&#x27;http://www.fishC.com/ooxx.html&#x27;</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">try</span>:<br>urllib.request.urlopen(req)<br><span class="hljs-keyword">except</span> urllib.error.HTTPError <span class="hljs-keyword">as</span> e:<br><span class="hljs-built_in">print</span>(e.code)<br><span class="hljs-built_in">print</span>(e.read())<br></code></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">404<br>b&#x27;<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">HTML</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//IETF//DTD HTML 2.0//EN&quot;</span>&gt;</span>n<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>n<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>404 Not Found<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>n<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>n<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Not Found<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>n<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The requested URL /ooxx.html was not found on this server.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>n<span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>n<span class="hljs-tag">&lt;<span class="hljs-name">address</span>&gt;</span>Apache Server at www.fishc.com Port 80<span class="hljs-tag">&lt;/<span class="hljs-name">address</span>&gt;</span>n<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>n&#x27;<br></code></pre></td></tr></table></figure>


<p>处理异常的写法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> urllib.request <span class="hljs-keyword">import</span> Request, urlopen<br><span class="hljs-keyword">from</span> urllib.error <span class="hljs-keyword">import</span> URLError<br>req = Request(<span class="hljs-string">&#x27;http://someurl/&#x27;</span>)<br><span class="hljs-keyword">try</span>:<br>response = urlopen(req)<br><span class="hljs-keyword">except</span> URLError <span class="hljs-keyword">as</span> e:<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(e, <span class="hljs-string">&#x27;reason&#x27;</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;We failed to reach a server.&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Reason: &#x27;</span>, e.reason)<br><span class="hljs-keyword">elif</span> <span class="hljs-built_in">hasattr</span>(e, <span class="hljs-string">&#x27;code&#x27;</span>):<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;The server couldn&#x27;</span>t fulfill the request.<span class="hljs-string">&#x27;)</span><br><span class="hljs-string">print(&#x27;</span>Error code: <span class="hljs-string">&#x27;, e.code)</span><br><span class="hljs-string">else:</span><br><span class="hljs-string">#everything is fine.</span><br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    2017.09.08          
</code></pre>
<h3 id="Scrapy爬虫框架"><a href="#Scrapy爬虫框架" class="headerlink" title="Scrapy爬虫框架"></a>Scrapy爬虫框架</h3><p>① Scrapy的安装与环境搭建<br>Scrapy对应python2.7的版本。（安装过程中如遇任何问题均可百度搜索一下，这是程序员必须学会的快速解决问题的办法）</p>
<ol>
<li>安装python2.7(32位版本)</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">安装包：python-<span class="hljs-number">2.7</span><span class="hljs-number">.6</span>-win32.msi<br>设置环境变量：win-运行-cmd<br>&gt; C:Python27python.exe C:Python27toolsScriptswin_add2path.py<br>重启windows系统，验证安装是否成功：<br>&gt; python -- version<br><span class="hljs-comment">#如果显示是3.多的版本，请参考python2/3版本切换任性切换设置：http://blog.csdn.net/sinat_36184075/article/details/77872708</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>安装pywin32(32位版本)</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">安装包：pywin32-<span class="hljs-number">215.</span>win32-py2<span class="hljs-number">.7</span>.exe<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>安装python2.7的pip程序</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">安装程序：get-pip.py<br>安装方法：win-cmd&gt; python C:pythonScrapyget-pip.py<br>先把pip的路径添加到windows的环境变量中。<br>重启windows系统，验证安装是否成功：<br>&gt; pip -- version<br><span class="hljs-comment">#如果没有显示版本信息，请参考pip2/3任性切换设置：http://blog.csdn.net/sinat_36184075/article/details/77872708</span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>安装lxml</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">安装环境包：VCForPython27.msi<br>&gt; pip2 install lxml<br><span class="hljs-comment">#如果pip2的路径有添加到windows中的话，安装可以成功。如果不成功，使用下面安装包安装</span><br>安装包：lxml-<span class="hljs-number">3.2</span><span class="hljs-number">.3</span>.win32-py2<span class="hljs-number">.7</span>.exe<br></code></pre></td></tr></table></figure>

<ol start="5">
<li>安装OpenSSL</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; pip2 install pyOpenSSL<br><span class="hljs-comment">#如果pip2的路径有添加到windows中的话，安装可以成功。如果不成功，使用下面安装包安装</span><br>安装包：egenix-pyopenssl-<span class="hljs-number">0.13</span><span class="hljs-number">.7</span>.win32-py2<span class="hljs-number">.7</span>.msi<br></code></pre></td></tr></table></figure>

<ol start="6">
<li>安装Scrapy</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; pip2 install service_identity<br>&gt; pip2 install Scrapy<br>验证是否安装成功：<br>&gt; Scrapy<br><span class="hljs-comment">#如果提示找不到命令的话，可能需要一个工具环境支持：Twisted-15.0.0.win32-py2.7.msi</span><br>安装完Twisted后再次尝试验证即可。<br></code></pre></td></tr></table></figure>




<p>② Scrapy框架爬虫程序初探<br>一个为了爬取网站数据，提取结构性数据而编写的应用框架。最初是为了页面抓取所设计的，也可以应用在获取API所访问的数据上，或者说通用的网络爬虫上。<br>使用Scrapy抓取一个网站一共需要四个步骤：</p>
<ol>
<li>创建一个Scrapy项目；</li>
<li>定义Item容器；</li>
<li>编写爬虫；</li>
<li>存储内容。</li>
</ol>
<p>– -Scrapy框架（官网）图示– -</p>
<p>实验网站对象：<a target="_blank" rel="noopener" href="http://www.dmoz.org/">www.dmoz.org</a></p>
<ol>
<li>创建一个Scrapy项目：crawler</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">C:UsersJanDesktoppython_study&gt;Scrapy startproject crawler<br><span class="hljs-comment">#crawler是我们的项目名称</span><br>在python_studycrawler文件夹中即是我们的爬虫框架。<br></code></pre></td></tr></table></figure>


<p>Item是保存爬取到的数据的容器，其使用方法和python字典类似，并且提供了额外保护机制来避免拼写错误导致的未定义字段错误。</p>
<ol start="2">
<li>定义Item容器：</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#crawlercrawleritems.py</span><br><span class="hljs-keyword">import</span> scrapy<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrawlerItem</span>(scrapy.Item):<br>  <span class="hljs-comment"># define the fields for your item here like:</span><br>  <span class="hljs-comment"># name = scrapy.Field()</span><br>  title = scrapy.Field()<br>  link = scrapy.Field()<br>  desc = scrapy.Field()<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>编写爬虫：<br>编写爬虫类Spider，Spider是用户编写用于从网站上爬取数据的类。其包含了一个用于下载的初始化URL，然后是如何跟进网页中的链接以及如何分析页面中的内容，还有提取生成item的方法。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#crawlercrawlerspiderscrawler_spider.py 新建文件</span><br><span class="hljs-keyword">import</span> scrapy<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrawlerSpider</span>(scrapy.Spider):<br>  name = <span class="hljs-string">&#x27;csdn&#x27;</span>  <span class="hljs-comment">#爬虫名字，调用的时候使用</span><br>  allowed_domains = [<span class="hljs-string">&#x27;csdn.net&#x27;</span>]<br>  start_urls = [<span class="hljs-string">&#x27;http://geek.csdn.net/AI&#x27;</span>]<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, response</span>):<br>    filename = response.url.split(<span class="hljs-string">&#x27;/&#x27;</span>)[-<span class="hljs-number">2</span>]<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>      f.write(response.body)<br></code></pre></td></tr></table></figure>

<p>3.1 爬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python">win-cmd：<br>C:UsersJanDesktoppython_study&gt;cd crawler<br>C:UsersJanDesktoppython_studycrawler&gt;scrapy crawl csdn  <span class="hljs-comment">#csdn爬虫类中的name</span><br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">28</span> [scrapy.utils.log] INFO: Scrapy <span class="hljs-number">1.4</span><span class="hljs-number">.0</span> started (bot: crawler)<br>...<br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">30</span> [scrapy.core.engine] INFO: Spider opened<br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">30</span> [scrapy.extensions.logstats] INFO: Crawled <span class="hljs-number">0</span> pages (at <span class="hljs-number">0</span> pages/<span class="hljs-built_in">min</span>), scraped <span class="hljs-number">0</span> items (at <span class="hljs-number">0</span> items/<span class="hljs-built_in">min</span>)<br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">30</span> [scrapy.extensions.telnet] DEBUG: Telnet console listening on <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">6023</span><br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">30</span> [scrapy.core.engine] DEBUG: Crawled (<span class="hljs-number">200</span>) &lt;GET http://geek.csdn.net/robots.txt&gt; (referer: <span class="hljs-literal">None</span>)  <span class="hljs-comment">#Here: robots.txt</span><br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">30</span> [scrapy.core.engine] DEBUG: Crawled (<span class="hljs-number">200</span>) &lt;GET http://geek.csdn.net/AI&gt; (referer: <span class="hljs-literal">None</span>)  <span class="hljs-comment">#Here: 我们的目标爬取链接</span><br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">31</span> [scrapy.core.engine] INFO: Closing spider (finished)<br>...<br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">21</span>:<span class="hljs-number">56</span>:<span class="hljs-number">31</span> [scrapy.core.engine] INFO: Spider closed (finished)<br><br><br><span class="hljs-comment">#爬取的内容存储位置(爬取网站的源码文件)：</span><br>C:UsersJanDesktoppython_studycrawler 目录下 geek.csdn.net 的NET文件。<br></code></pre></td></tr></table></figure>


<p>3.2 取<br>在Scrapy中使用的是一种基于XPath和CSS的表达式机制：Scrapy Selectors(选择器)<br>Selector是一个选择器，有4个基本方法：<br>xpath() 传入xpath表达式，返回该表达式所对应的所有节点的selector list列表。<br>css() 传入CSS表达式，返回该表达式所对应的所有节点的selector list列表。<br>extract() 序列化该节点为unicode字符串并返回list。<br>re() 根据传入的正则表达式对数据进行提取，返回unicode字符串list列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">win-cmd进入项目根目录后执行：scrapy shell <span class="hljs-string">&quot;http://target_url/&quot;</span><br>C:UsersJanDesktoppython_studycrawler&gt;scrapy shell <span class="hljs-string">&quot;http://geek.csdn.net/AI&quot;</span><br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">22</span>:05:<span class="hljs-number">48</span> [scrapy.utils.log] INFO: Scrapy <span class="hljs-number">1.4</span><span class="hljs-number">.0</span> started (bot: crawler)<br>...<br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">22</span>:05:<span class="hljs-number">50</span> [scrapy.extensions.telnet] DEBUG: Telnet console listening on <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">6023</span><br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">22</span>:05:<span class="hljs-number">50</span> [scrapy.core.engine] INFO: Spider opened<br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">22</span>:05:<span class="hljs-number">50</span> [scrapy.core.engine] DEBUG: Crawled (<span class="hljs-number">200</span>) &lt;GET http://geek.csdn.net/robots.txt&gt; (referer: <span class="hljs-literal">None</span>)<br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">22</span>:05:<span class="hljs-number">50</span> [scrapy.core.engine] DEBUG: Crawled (<span class="hljs-number">200</span>) &lt;GET http://geek.csdn.net/AI&gt; (referer: <span class="hljs-literal">None</span>)<br>...<br><span class="hljs-meta">&gt;&gt;&gt; </span>response.body <span class="hljs-comment">#输出网页的源码信息</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>response.headers  <span class="hljs-comment">#输出网页的头部信息</span><br>&#123;<span class="hljs-string">&#x27;Date&#x27;</span>: [<span class="hljs-string">&#x27;Fri, 08 Sep 2017 14:06:31 GMT&#x27;</span>], <span class="hljs-string">&#x27;Content-Type&#x27;</span>: [<span class="hljs-string">&#x27;text/html; charset=utf-8&#x27;</span>], <span class="hljs-string">&#x27;Server&#x27;</span>: [<span class="hljs-string">&#x27;openresty&#x27;</span>], <span class="hljs-string">&#x27;Vary&#x27;</span>: [<span class="hljs-string">&#x27;Accept-Encoding&#x27;</span>, <span class="hljs-string">&#x27;Accept-Encoding&#x27;</span>]&#125;<br></code></pre></td></tr></table></figure>


<p>XPath是一门在网页中查找特定信息的语言，所以用XPath来筛选数据，要比使用正则表达式容易些。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">/html/head/title 选择HTML文档中&lt;head&gt;标签内的&lt;title&gt;元素<br>/html/head/title/text() 选择上面提到的&lt;title&gt;元素的文字<br>//td 选择所有的&lt;td&gt;元素<br>//div[@<span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;mine&quot;</span>] 选择所有具有 <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;mine&quot;</span> 属性的div元素<br><br><br><br>response.xpath() = response.selector.xpath()  <span class="hljs-comment">#已经映射。可以直接使用.xpath()</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>response.xpath(<span class="hljs-string">&#x27;//title&#x27;</span>)<br>[&lt;Selector xpath=<span class="hljs-string">&#x27;//title&#x27;</span> data=<span class="hljs-string">u&#x27;&lt;title&gt;CSDNu6781u5ba2u5934u6761-u63a8u8350u6bcfu65e5u6700u65b0u6700u70edITu8d44u8baf&lt;/title&gt;&#x27;</span>&gt;]  <span class="hljs-comment">#u的那些是中文字符，编码方式决定显示</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>response.xpath(<span class="hljs-string">&#x27;//title/text()&#x27;</span>).extract()  <span class="hljs-comment">#截图title内容</span><br>[<span class="hljs-string">u&#x27;CSDNu6781u5ba2u5934u6761-u63a8u8350u6bcfu65e5u6700u65b0u6700u70edITu8d44u8baf&#x27;</span>]<br><span class="hljs-meta">&gt;&gt;&gt; </span>sel.xpath(<span class="hljs-string">&#x27;//span/a&#x27;</span>)  <span class="hljs-comment">#输出所有&lt;span&gt;&lt;a&gt;标签的内容全部输出</span><br><span class="hljs-number">2017</span>-09-08 <span class="hljs-number">22</span>:<span class="hljs-number">36</span>:08 [py.warnings] WARNING: &lt;string&gt;:<span class="hljs-number">1</span>: ScrapyDeprecationWarning: <span class="hljs-string">&quot;sel&quot;</span> shortcut <span class="hljs-keyword">is</span> deprecated. Use <span class="hljs-string">&quot;response.xpath()&quot;</span>, <span class="hljs-string">&quot;response.css()&quot;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&quot;response.selector&quot;</span> instead<br><span class="hljs-meta">&gt;&gt;&gt; </span>sel.xpath(<span class="hljs-string">&#x27;//span/a/text()&#x27;</span>).extract()  <span class="hljs-comment">#获取所有&lt;span&gt;&lt;a&gt;标签中的字符串，即标题</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>sel.xpath(<span class="hljs-string">&#x27;//span/a/@href&#x27;</span>).extract()  <span class="hljs-comment">#获取&lt;span&gt;&lt;a&gt;中的连接地址</span><br><span class="hljs-meta">&gt;&gt;&gt; </span>sites = sel.xpath(<span class="hljs-string">&#x27;//div/div/div/dl/dd/span/a/text()&#x27;</span>).extract()  <span class="hljs-comment">#按照标签包裹的层级&lt;body&gt;下开始找到包裹标题的&lt;a&gt;标签写入xpath中</span><br><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> title <span class="hljs-keyword">in</span> sites:  <span class="hljs-comment">#使用for循环打印可以自动将Unicode转换为对应中文编码显示</span><br><span class="hljs-meta">... </span>  <span class="hljs-built_in">print</span>(title)<br>自己动手做聊天机器人 四十二-(重量级长文)从理论到实践开发自己的聊天机器人<br>微软携手 Facebook 推出开源项目 打造共享神经网络模型<br>Taylor Swift vs 人工智能：作词谁更强？<br>推荐<span class="hljs-number">13</span>个机器学习框架<br>...<br><span class="hljs-meta">&gt;&gt;&gt; </span>sites = sel.xpath(<span class="hljs-string">&#x27;//div/div/div[@class=&quot;directory-url&quot;]/dl/dd/span/a/text()&#x27;</span>).extract()<br><span class="hljs-comment">#其中[@class=&quot;directory-url&quot;]的功能是：过滤掉对应样式类的内容，此处仅做演示</span><br></code></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#crawlercrawlerspiderscrawler_spider.py 修改代码</span><br><span class="hljs-keyword">import</span> scrapy<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrawlerSpider</span>(scrapy.Spider):<br>  name = <span class="hljs-string">&#x27;csdn&#x27;</span><br>  allowed_domains = [<span class="hljs-string">&#x27;csdn.net&#x27;</span>]<br>  start_urls = [<span class="hljs-string">&#x27;http://geek.csdn.net/AI&#x27;</span>]<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, response</span>):<br>    sel = scrapy.selector.Selector(response)<br>    sites = sel.xpath(<span class="hljs-string">&#x27;//div/div/div/dl/dd/span&#x27;</span>)<br>    <span class="hljs-keyword">for</span> site <span class="hljs-keyword">in</span> sites:<br>      title = site.xpath(<span class="hljs-string">&#x27;a/text()&#x27;</span>).extract()<br>      link  = site.xpath(<span class="hljs-string">&#x27;a/@href&#x27;</span>).extract()<br>      desc  = site.xpath(<span class="hljs-string">&#x27;text()&#x27;</span>).extract()<br>      <span class="hljs-built_in">print</span>(title, link, desc)<br>win-cmd：<br>C:UsersJanDesktoppython_studycrawler&gt;scrapy crawl csdn<br><span class="hljs-comment">#运行就可以将print中的内容在爬取时一并显示出来（输出内容略）</span><br></code></pre></td></tr></table></figure>


<ol start="4">
<li>存储内容<br>最常见的导出为json格式。<br>中文乱码问题：<a target="_blank" rel="noopener" href="http://bbs.fishc.com/thread-85672-1-1.html">http://bbs.fishc.com/thread-85672-1-1.html</a></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#crawlercrawlerspiderscrawler_spider.py  构造items的列表对象</span><br><span class="hljs-keyword">import</span> scrapy<br><span class="hljs-keyword">from</span> crawler.items <span class="hljs-keyword">import</span> CrawlerItem<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrawlerSpider</span>(scrapy.Spider):<br>  name = <span class="hljs-string">&#x27;csdn&#x27;</span><br>  allowed_domains = [<span class="hljs-string">&#x27;csdn.net&#x27;</span>]<br>  start_urls = [<span class="hljs-string">&#x27;http://geek.csdn.net/AI&#x27;</span>]<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params">self, response</span>):<br>    sel = scrapy.selector.Selector(response)<br>    items = []<br>    sites = sel.xpath(<span class="hljs-string">&#x27;//div/div/div/dl/dd/span&#x27;</span>)<br>    <span class="hljs-keyword">for</span> site <span class="hljs-keyword">in</span> sites:<br>      item = CrawlerItem()  <span class="hljs-comment">#实例化一个item类（类似于字典）</span><br>      item[<span class="hljs-string">&#x27;title&#x27;</span>] = site.xpath(<span class="hljs-string">&#x27;a/text()&#x27;</span>).extract()<br>      item[<span class="hljs-string">&#x27;link&#x27;</span>]  = site.xpath(<span class="hljs-string">&#x27;a/@href&#x27;</span>).extract()<br>      item[<span class="hljs-string">&#x27;desc&#x27;</span>]  = site.xpath(<span class="hljs-string">&#x27;text()&#x27;</span>).extract()<br>      <span class="hljs-built_in">print</span>(item[<span class="hljs-string">&#x27;title&#x27;</span>], item[<span class="hljs-string">&#x27;link&#x27;</span>], item[<span class="hljs-string">&#x27;desc&#x27;</span>])<br>      items.append(item)<br><br><br>    <span class="hljs-keyword">return</span> items<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#crawlercrawlerpipelines.py  设置抓取内容存储的文件名以及校正中文乱码</span><br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> codecs<br><br><br>store_filename = <span class="hljs-string">&#x27;items.json&#x27;</span>   <span class="hljs-comment">#item.json指的是要保存的json格式文件的名称</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CrawlerPipeline</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    self.file = codecs.<span class="hljs-built_in">open</span>(store_filename, <span class="hljs-string">&#x27;wb&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)  <span class="hljs-comment">#中文编码格式一般都是&#x27;utf-8&#x27;</span><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_item</span>(<span class="hljs-params">self, item, spider</span>):<br>    line = json.dumps(<span class="hljs-built_in">dict</span>(item), ensure_ascii=<span class="hljs-literal">False</span>) + <span class="hljs-string">&#x27;n&#x27;</span>  <span class="hljs-comment">#这一句会将你每次返回的字典抓取出来,“ensure_ascii=False”这一句话很重要，如果是True的话就是我们保存的u4e2du56fd这种格式了</span><br>    self.file.write(line)  <span class="hljs-comment">#写入到文件中</span><br>    <span class="hljs-keyword">return</span> item<br></code></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#crawlercrawlersetting.py  使pipelines.py生效，取消注释ITEM_PIPELINES</span><br>ITEM_PIPELINES = &#123;<br>  <span class="hljs-string">&#x27;crawler.pipelines.CrawlerPipeline&#x27;</span>: <span class="hljs-number">300</span>,  <span class="hljs-comment">#300是正常值，不变。</span><br>&#125;<br></code></pre></td></tr></table></figure>


<p>win-cmd运行scrapy，即可自动在crawler目录下生成items.json文件，并且中文显示正常：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">C:UsersJanDesktoppython_studycrawler&gt;scrapy crawl csdn<br>C:UsersJanDesktoppython_studycrawleritems.json  <span class="hljs-comment">#中文正常。</span><br>&#123;<span class="hljs-string">&quot;title&quot;</span>: [<span class="hljs-string">&quot;自己动手做聊天机器人 四十二-(重量级长文)从理论到实践开发自己的聊天机器人&quot;</span>], <span class="hljs-string">&quot;link&quot;</span>: [<span class="hljs-string">&quot;http://www.shareditor.com/blogshow?blogId=136&amp;hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io&quot;</span>], <span class="hljs-string">&quot;desc&quot;</span>: [<span class="hljs-string">&quot;n               &quot;</span>, <span class="hljs-string">&quot;n             &quot;</span>]&#125;<br>&#123;<span class="hljs-string">&quot;title&quot;</span>: [<span class="hljs-string">&quot;微软携手 Facebook 推出开源项目 打造共享神经网络模型&quot;</span>], <span class="hljs-string">&quot;link&quot;</span>: [<span class="hljs-string">&quot;http://tech.163.com/17/0908/08/CTQ1403R00097U80.html&quot;</span>], <span class="hljs-string">&quot;desc&quot;</span>: [<span class="hljs-string">&quot;n               &quot;</span>, <span class="hljs-string">&quot;n             &quot;</span>]&#125;<br>&#123;<span class="hljs-string">&quot;title&quot;</span>: [<span class="hljs-string">&quot;Taylor Swift vs 人工智能：作词谁更强？&quot;</span>], <span class="hljs-string">&quot;link&quot;</span>: [<span class="hljs-string">&quot;http://dataquestion.com/taylor-vs-ai&quot;</span>], <span class="hljs-string">&quot;desc&quot;</span>: [<span class="hljs-string">&quot;n               &quot;</span>, <span class="hljs-string">&quot;n             &quot;</span>]&#125;<br>...<br></code></pre></td></tr></table></figure>


<pre><code class="hljs">    2017.09.09          
</code></pre>
<h3 id="23-GUI界面的终极选择-Tkinter"><a href="#23-GUI界面的终极选择-Tkinter" class="headerlink" title="23. GUI界面的终极选择 Tkinter"></a>23. GUI界面的终极选择 Tkinter</h3><p>Tkinter是python的默认GUI模块库。<br>示例1：主窗口及标题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> tkinter <span class="hljs-keyword">as</span> tk<br><br><br>app = tk.Tk()  <span class="hljs-comment">#根窗口的实例(root窗口)</span><br>app.title(<span class="hljs-string">&#x27;Tkinter root window&#x27;</span>)  <span class="hljs-comment">#根窗口标题</span><br><br><br>theLabel = tk.Label(app, text=<span class="hljs-string">&#x27;我的第2个窗口程序！&#x27;</span>)  <span class="hljs-comment">#label组件及文字内容</span><br>theLabel.pack()  <span class="hljs-comment">#pack()用于自动调节组件的尺寸</span><br><br><br>app.mainloop()  <span class="hljs-comment">#窗口的主事件循环，必须的。</span><br></code></pre></td></tr></table></figure>


<p>示例2：按钮</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> tkinter <span class="hljs-keyword">as</span> tk<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">APP</span>:<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, master</span>):  <span class="hljs-comment">#root 传参赋值给master</span><br>    frame = tk.Frame(master)  <span class="hljs-comment">#frame 组件</span><br>    frame.pack(side=tk.LEFT, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">10</span>)<br><br><br>    self.hi_there = tk.Button(frame, text=<span class="hljs-string">&#x27;打招呼&#x27;</span>, bg=<span class="hljs-string">&#x27;black&#x27;</span>, fg=<span class="hljs-string">&#x27;white&#x27;</span>, command=self.say_hi)  <span class="hljs-comment">#Button按钮, command中调用定义的方法</span><br>    self.hi_there.pack()<br><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">say_hi</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;卧槽，居然打了个招呼！~&#x27;</span>)<br><br><br>root = tk.Tk()<br>app = APP(root)<br><br><br>root.mainloop()<br></code></pre></td></tr></table></figure>


<p>示例3：图片</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>textLabel = Label(root,<br>         text=<span class="hljs-string">&#x27;请重试！n您的操作不被允许！&#x27;</span>,  <span class="hljs-comment">#文字支持换行</span><br>         justify=LEFT,  <span class="hljs-comment">#左对齐</span><br>         padx=<span class="hljs-number">10</span>,  <span class="hljs-comment">#左边距10px</span><br>         pady=<span class="hljs-number">10</span>)  <span class="hljs-comment">#右边距10px </span><br>textLabel.pack(side=LEFT)<br><br><br><span class="hljs-comment">#显示图片</span><br>photo = PhotoImage(file=<span class="hljs-string">&#x27;tk_image.png&#x27;</span>)<br>imageLabel = Label(root, image=photo)<br>imageLabel.pack(side=RIGHT)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>

<p>示例4：背景</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br><br><br>photo = PhotoImage(file=<span class="hljs-string">&#x27;tk4_bg.png&#x27;</span>)<br>theLabel = Label(root,<br>         text=<span class="hljs-string">&#x27;生存还是毁灭n这是一个问题&#x27;</span>,<br>         justify=LEFT,<br>         image=photo,<br>         compound=CENTER,<br>         font=(<span class="hljs-string">&#x27;华文隶书&#x27;</span>, <span class="hljs-number">20</span>),<br>         fg=<span class="hljs-string">&#x27;blue&#x27;</span>)<br>theLabel.pack()<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例5：按钮交互</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback</span>():<br>  var.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;吹吧你，我才不信呢！&#x27;</span>)<br><br><br>root = Tk()<br><br><br>frame1 = Frame(root)<br>frame2 = Frame(root)<br><br><br>var = StringVar()<br>var.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;请重试！n您的操作不被允许！&#x27;</span>)<br>textLabel = Label(frame1,<br>         textvariable=var,<br>         justify=LEFT)  <span class="hljs-comment">#左对齐</span><br>textLabel.pack(side=LEFT)<br><br><br><span class="hljs-comment">#显示图片</span><br>photo = PhotoImage(file=<span class="hljs-string">&#x27;tk_image.png&#x27;</span>)<br>imageLabel = Label(root, image=photo)<br>imageLabel.pack(side=RIGHT)<br><br><br>theButton = Button(frame2, text=<span class="hljs-string">&#x27;我是超级管理员&#x27;</span>, command=callback)<br>theButton.pack()<br><br><br>frame1.pack(padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">10</span>)<br>frame2.pack(padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">10</span>)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例6：选项按钮</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br><br><br>v = IntVar()<br><br><br>c = Checkbutton(root, text=<span class="hljs-string">&#x27;测试一下&#x27;</span>, variable=v)  <span class="hljs-comment">#v用来存放选中状态</span><br>c.pack()<br><br><br>l = Label(root, textvariable=v)<br>l.pack()  <span class="hljs-comment">#未选中显示为0，选中显示1</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例7：多个方框选项</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br><br><br>GIRLS = [<span class="hljs-string">&#x27;西施&#x27;</span>, <span class="hljs-string">&#x27;貂蝉&#x27;</span>, <span class="hljs-string">&#x27;王昭君&#x27;</span>, <span class="hljs-string">&#x27;杨玉环&#x27;</span>]<br><br><br>v =  []<br><span class="hljs-keyword">for</span> girl <span class="hljs-keyword">in</span> GIRLS:<br>  v.append(IntVar())<br>  b = Checkbutton(root, text=girl, variable=v[-<span class="hljs-number">1</span>])<br>  b.pack(anchor=W)  <span class="hljs-comment">#设置对齐方位，东E南S西W北N</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例8：多个圆点选项 Radiobutton</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br><br><br>v = IntVar()<br><br><br>Radiobutton(root, text=<span class="hljs-string">&#x27;one&#x27;</span>, variable=v, value=<span class="hljs-number">1</span>).pack(anchor=W)<br>Radiobutton(root, text=<span class="hljs-string">&#x27;two&#x27;</span>, variable=v, value=<span class="hljs-number">2</span>).pack(anchor=W)<br>Radiobutton(root, text=<span class="hljs-string">&#x27;three&#x27;</span>, variable=v, value=<span class="hljs-number">3</span>).pack(anchor=W)<br>Radiobutton(root, text=<span class="hljs-string">&#x27;four&#x27;</span>, variable=v, value=<span class="hljs-number">4</span>).pack(anchor=W)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例9：内陷填充按钮选项 Radiobutton indicatoron</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br><br><br>LANGS = [<br>  (<span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-number">1</span>),<br>  (<span class="hljs-string">&#x27;C++&#x27;</span>, <span class="hljs-number">2</span>),<br>  (<span class="hljs-string">&#x27;shell&#x27;</span>, <span class="hljs-number">3</span>),<br>  (<span class="hljs-string">&#x27;python&#x27;</span>, <span class="hljs-number">4</span>)]<br><br><br>v = IntVar()<br>v.<span class="hljs-built_in">set</span>(<span class="hljs-number">1</span>)<br><br><br><span class="hljs-keyword">for</span> lang, num <span class="hljs-keyword">in</span> LANGS:  <span class="hljs-comment">#对应列表中包含元组同时执行多个循环</span><br>  b = Radiobutton(root, text=lang, variable=v, value=num, indicatoron=<span class="hljs-literal">False</span>)<br>  b.pack(fill=X)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例10：附带标题的圆点选项 LabelFrame</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br><br><br>group = LabelFrame(root, text=<span class="hljs-string">&#x27;最好的开发语言是？&#x27;</span>, padx=<span class="hljs-number">5</span>, pady=<span class="hljs-number">5</span>)<br>group.pack(padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">10</span>)<br><br><br>LANGS = [<br>  (<span class="hljs-string">&#x27;C&#x27;</span>, <span class="hljs-number">1</span>),<br>  (<span class="hljs-string">&#x27;C++&#x27;</span>, <span class="hljs-number">2</span>),<br>  (<span class="hljs-string">&#x27;shell&#x27;</span>, <span class="hljs-number">3</span>),<br>  (<span class="hljs-string">&#x27;python&#x27;</span>, <span class="hljs-number">4</span>)]<br><br><br>v = IntVar()<br>v.<span class="hljs-built_in">set</span>(<span class="hljs-number">1</span>)<br><br><br><span class="hljs-keyword">for</span> lang, num <span class="hljs-keyword">in</span> LANGS:  <span class="hljs-comment">#对应列表中包含元组同时执行多个循环</span><br>  b = Radiobutton(group, text=lang, variable=v, value=num)<br>  b.pack(anchor=W)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例11：输入框 Entry</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br><br><br>e = Entry(root)<br>e.pack(padx=<span class="hljs-number">20</span>, pady=<span class="hljs-number">20</span>)<br><br><br>e.delete(<span class="hljs-number">0</span>, END)<br>e.insert(<span class="hljs-number">0</span>, <span class="hljs-string">&#x27;默认文本...&#x27;</span>)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例12：按钮和输入框交互</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;输入框与按钮程序&#x27;</span>)<br><br><br>Label(root, text=<span class="hljs-string">&#x27;作品:&#x27;</span>).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">0</span>)<br>Label(root, text=<span class="hljs-string">&#x27;作者:&#x27;</span>).grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">0</span>)<br><br><br>e1 = Entry(root)<br>e2 = Entry(root)<br>e1.grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">1</span>, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br>e2.grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">1</span>, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>():  <span class="hljs-comment">#当输入内容时点击获取信息会打印</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;作品：《%s》&#x27;</span> % e1.get())<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;作者：《%s》&#x27;</span> % e2.get())<br><br><br>Button(root, text=<span class="hljs-string">&#x27;获取信息&#x27;</span>, width=<span class="hljs-number">10</span>, command=show) <br>       .grid(row=<span class="hljs-number">3</span>, column=<span class="hljs-number">0</span>, sticky=W, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br>Button(root, text=<span class="hljs-string">&#x27;点击退出&#x27;</span>, width=<span class="hljs-number">10</span>, command=root.quit) <br>       .grid(row=<span class="hljs-number">3</span>, column=<span class="hljs-number">1</span>, sticky=E, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br><span class="hljs-comment">#退出按钮必须是双击打开.py文件才可以，而不是在IDLE下调试运行时</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例12：登陆框程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;登陆程序&#x27;</span>)<br><br><br>Label(root, text=<span class="hljs-string">&#x27;账号:&#x27;</span>).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">0</span>)<br>Label(root, text=<span class="hljs-string">&#x27;密码:&#x27;</span>).grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">0</span>)<br><br><br>v1 = StringVar()<br>v2 = StringVar()<br><br><br>e1 = Entry(root, textvariable=v1)<br>e2 = Entry(root, textvariable=v2, show=<span class="hljs-string">&#x27;*&#x27;</span>)<br>e1.grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">1</span>, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br>e2.grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">1</span>, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>():<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;账号：%s&#x27;</span> % e1.get())<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;密码：%s&#x27;</span> % e2.get())<br><br><br>Button(root, text=<span class="hljs-string">&#x27;芝麻开门&#x27;</span>, width=<span class="hljs-number">10</span>, command=show) <br>       .grid(row=<span class="hljs-number">3</span>, column=<span class="hljs-number">0</span>, sticky=W, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br>Button(root, text=<span class="hljs-string">&#x27;点击退出&#x27;</span>, width=<span class="hljs-number">10</span>, command=root.quit) <br>       .grid(row=<span class="hljs-number">3</span>, column=<span class="hljs-number">1</span>, sticky=E, padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">5</span>)<br><span class="hljs-comment">#退出按钮必须是双击打开.py文件才可以，而不是在IDLE下调试运行时</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例13：输入对错验证程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;输入对错验证&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>():<br>  <span class="hljs-keyword">if</span> e1.get() == <span class="hljs-string">&#x27;张三&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;正确！&#x27;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;错误！&#x27;</span>)<br>    e1.delete(<span class="hljs-number">0</span>, END)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br>v = StringVar()<br><br><br><span class="hljs-comment">#focusout指定在当前输入框失去焦点时，代表输入完，会去调用test校验&lt;tab&gt;键可测试</span><br>e1 = Entry(root, textvariable=v, validate=<span class="hljs-string">&#x27;focusout&#x27;</span>, validatecommand=test)<br>e2 = Entry(root)<br>e1.pack(padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">10</span>)<br>e2.pack(padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">10</span>)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例13：简单计算器程序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;计算器程序&#x27;</span>)<br><br><br>frame = Frame(root)<br>frame.pack(padx=<span class="hljs-number">10</span>, pady=<span class="hljs-number">10</span>)<br><br><br>v1 = StringVar()<br>v2 = StringVar()<br>v3 = StringVar()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">content</span>):<br>  <span class="hljs-keyword">return</span> content.isdigit()<br><br><br>testCMD = frame.register(test)<br><span class="hljs-comment">#focusout指定在当前输入框失去焦点时，代表输入完，会去调用test校验&lt;tab&gt;键可测试</span><br>e1 = Entry(frame, width=<span class="hljs-number">10</span>, textvariable=v1, validate=<span class="hljs-string">&#x27;key&#x27;</span>, <br>      validatecommand=(testCMD, <span class="hljs-string">&#x27;%P&#x27;</span>)).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">0</span>)  <span class="hljs-comment">#width的单位是字符数</span><br>Label(frame, text=<span class="hljs-string">&#x27;+&#x27;</span>).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">1</span>)<br><br><br>e2 = Entry(frame, width=<span class="hljs-number">10</span>, textvariable=v2, validate=<span class="hljs-string">&#x27;key&#x27;</span>, <br>      validatecommand=(testCMD, <span class="hljs-string">&#x27;%P&#x27;</span>)).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">2</span>)<br>Label(frame, text=<span class="hljs-string">&#x27;=&#x27;</span>).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">3</span>)<br><br><br>e3 = Entry(frame, width=<span class="hljs-number">10</span>, textvariable=v3, state=<span class="hljs-string">&#x27;readonly&#x27;</span>).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">4</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">calc</span>():<br>  result = <span class="hljs-built_in">int</span>(v1.get()) + <span class="hljs-built_in">int</span>(v2.get())<br>  v3.<span class="hljs-built_in">set</span>(<span class="hljs-built_in">str</span>(result))<br><br><br>Button(frame, text=<span class="hljs-string">&#x27;计算结果&#x27;</span>, command=calc).grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">2</span>, pady=<span class="hljs-number">5</span>)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>

<p>示例14：按钮删除列表中的选项</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>master= Tk()<br><br><br>theLB = Listbox(master, selectmode=SINGLE, height=<span class="hljs-number">15</span>)  <span class="hljs-comment">#SINGLE单选，MULTIPLE多选，height设置显示项数</span><br>theLB.pack()<br><br><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;笔&#x27;</span>, <span class="hljs-string">&#x27;墨&#x27;</span>, <span class="hljs-string">&#x27;纸&#x27;</span>, <span class="hljs-string">&#x27;砚&#x27;</span>]:<br>  theLB.insert(END, item)  <span class="hljs-comment">#END表示最后一个</span><br><br><br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">11</span>):<br>  theLB.insert(END, item)<br><br><br><br>theButton = Button(master, text=<span class="hljs-string">&#x27;删除&#x27;</span>, <br>          command=<span class="hljs-keyword">lambda</span> x=theLB:x.delete(ACTIVE) ) <span class="hljs-comment">#ACTIVE表示当前选中的值</span><br>theButton.pack()<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例15：为列表组件添加滚动条<br>安装垂直滚动条步骤：</p>
<ol>
<li>设置该组件的yscrollbarcommand选项为Scrollbar组件的set方法；</li>
<li>设置Scrollbar组件的command选项为该组件的yview()方法。</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;滚动条程序&#x27;</span>)<br><br><br>sb = Scrollbar(root)<br>sb.pack(side=RIGHT, fill=Y)<br><br><br>lb = Listbox(root, yscrollcommand=sb.<span class="hljs-built_in">set</span>)<br><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):<br>  lb.insert(END, i)<br>lb.pack(side=LEFT, fill=BOTH)<br><br><br><span class="hljs-comment">#让滚动条与选项互通互连</span><br>sb.config(command=lb.yview)<br><br><br>mainloop()<br><br><br>示例<span class="hljs-number">16</span>：滑块滚动条 Scale<br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;滑块程序&#x27;</span>)<br><br><br>s1 = Scale(root, from_=<span class="hljs-number">0</span>, to=<span class="hljs-number">100</span>, tickinterval=<span class="hljs-number">5</span>, resolution=<span class="hljs-number">5</span>, length=<span class="hljs-number">200</span>)  <span class="hljs-comment">#默认是垂直, tickinterval精度刻度, length单位是像素</span><br>s1.pack()<br><br><br>s2 = Scale(root, from_=<span class="hljs-number">0</span>, to=<span class="hljs-number">100</span>, tickinterval=<span class="hljs-number">5</span>, orient=HORIZONTAL, length=<span class="hljs-number">400</span>)<br>s2.pack()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>():<br>  <span class="hljs-built_in">print</span>(s1.get(), s2.get())<br><br><br><span class="hljs-comment">#获取滑块的当前位置，点击后才有效</span><br>Button(root, text=<span class="hljs-string">&#x27;音量：&#x27;</span>, command=show).pack()<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>

<p>示例17：文本组件 Text  （插入按钮）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Text&#x27;</span>)<br><br><br>text = Text(root, width=<span class="hljs-number">30</span>, height=<span class="hljs-number">20</span>)<br>text.pack()<br><br><br><span class="hljs-comment">#窗口中的文本可编辑</span><br>text.insert(INSERT, <span class="hljs-string">&#x27;这里是显示的文本信息内容。n&#x27;</span>)  <span class="hljs-comment">#INSERT表示输入光标插入的位置</span><br>text.insert(END, <span class="hljs-string">&#x27;对比一下效果。&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>():<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;提交中...&#x27;</span>)  <span class="hljs-comment">#此行内容显示在IDLE中</span><br><br><br><span class="hljs-comment">#插入一个Button组件</span><br>b1 = Button(text, text=<span class="hljs-string">&#x27;提交&#x27;</span>, command=show)<br>text.window_create(INSERT, window=b1)  <span class="hljs-comment">#将b1插入</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例18：文本组件 Text  （插入图片）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Text&#x27;</span>)<br><br><br>text = Text(root, width=<span class="hljs-number">100</span>, height=<span class="hljs-number">30</span>)<br>text.pack()<br><br><br>photo = PhotoImage(file=<span class="hljs-string">&quot;tk_image.png&quot;</span>)<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_img</span>():<br>  text.image_create(END, image=photo)<br><br><br><span class="hljs-comment">#插入一个图片</span><br>b1 = Button(text, text=<span class="hljs-string">&#x27;插入图片&#x27;</span>, command=show_img)<br>text.window_create(INSERT, window=b1)  <span class="hljs-comment">#将b1插入</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例19：文本组件 Text  （Indexes：索引定位）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Text&#x27;</span>)<br><br><br>text = Text(root, width=<span class="hljs-number">30</span>, height=<span class="hljs-number">10</span>)<br>text.pack()<br>text.insert(INSERT, <span class="hljs-string">&#x27;I love baidu.com！&#x27;</span>)<br><br><br>text.tag_add(<span class="hljs-string">&#x27;tag1&#x27;</span>, <span class="hljs-string">&#x27;1.7&#x27;</span>, <span class="hljs-string">&#x27;1.12&#x27;</span>, <span class="hljs-string">&#x27;1.14&#x27;</span>)  <span class="hljs-comment">#1.7~1.12 baidu  1.14 o</span><br>text.tag_add(<span class="hljs-string">&#x27;tag2&#x27;</span>, <span class="hljs-string">&#x27;1.7&#x27;</span>, <span class="hljs-string">&#x27;1.12&#x27;</span>, <span class="hljs-string">&#x27;1.14&#x27;</span>)<br>text.tag_config(<span class="hljs-string">&#x27;tag1&#x27;</span>, background=<span class="hljs-string">&#x27;blue&#x27;</span>, foreground=<span class="hljs-string">&#x27;yellow&#x27;</span>)<br>text.tag_config(<span class="hljs-string">&#x27;tag2&#x27;</span>, foreground=<span class="hljs-string">&#x27;red&#x27;</span>)  <span class="hljs-comment">#文字会以red为准</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例20：文本组件中可点击连接</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> webbrowser <span class="hljs-keyword">as</span> wb<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;GUI link show&#x27;</span>)<br><br><br>text = Text(root, width=<span class="hljs-number">30</span>, height=<span class="hljs-number">5</span>)<br>text.pack()<br><br><br>text.insert(INSERT, <span class="hljs-string">&#x27;I love baidu.com!&#x27;</span>)<br>text.tag_add(<span class="hljs-string">&#x27;link&#x27;</span>, <span class="hljs-string">&#x27;1.7&#x27;</span>, <span class="hljs-string">&#x27;1.16&#x27;</span>)<br>text.tag_config(<span class="hljs-string">&#x27;link&#x27;</span>, foreground=<span class="hljs-string">&#x27;blue&#x27;</span>, underline=<span class="hljs-literal">True</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_arrow_cursor</span>(<span class="hljs-params">event</span>):<br>  text.config(cursor=<span class="hljs-string">&#x27;arrow&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_xterm_cursor</span>(<span class="hljs-params">event</span>):<br>  text.config(cursor=<span class="hljs-string">&#x27;xterm&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">click</span>(<span class="hljs-params">event</span>):<br>  wb.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;http://www.baidu.com&#x27;</span>)<br><br><br><span class="hljs-comment">#绑定事件</span><br>text.tag_bind(<span class="hljs-string">&#x27;link&#x27;</span>, <span class="hljs-string">&#x27;&lt;Enter&gt;&#x27;</span>, show_arrow_cursor)  <span class="hljs-comment">#&lt;Enter&gt;鼠标进入</span><br>text.tag_bind(<span class="hljs-string">&#x27;link&#x27;</span>, <span class="hljs-string">&#x27;&lt;Leave&gt;&#x27;</span>, show_xterm_cursor)  <span class="hljs-comment">#&lt;Enter&gt;鼠标离开</span><br>text.tag_bind(<span class="hljs-string">&#x27;link&#x27;</span>, <span class="hljs-string">&#x27;&lt;Button-1&gt;&#x27;</span>, click)  <span class="hljs-comment">#&lt;Enter&gt;鼠标点击</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例21：文本组件之MD5</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> hashlib  <span class="hljs-comment">#用于获取文件的MD5值，检查内容是否有修改</span><br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;link click&#x27;</span>)<br><br><br>text = Text(root, width=<span class="hljs-number">50</span>, height=<span class="hljs-number">10</span>)<br>text.pack()<br><br><br>text.insert(INSERT, <span class="hljs-string">&#x27;I love www.baidu.com&#x27;</span>)<br>contents = text.get(<span class="hljs-string">&#x27;1.0&#x27;</span>, END)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getSig</span>(<span class="hljs-params">contents</span>):<br>  m = hashlib.md5(contents.encode())<br>  <span class="hljs-keyword">return</span> m.digest()<br><br><br>sig = getSig(contents)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>():<br>  contents = text.get(<span class="hljs-string">&#x27;1.0&#x27;</span>, END)<br>  <span class="hljs-keyword">if</span> sig != getSig(contents):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;内容有修改，是否保存？&#x27;</span>)<br>  <span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;无任何修改！&#x27;</span>)<br><br><br>Button(root, text=<span class="hljs-string">&#x27;检查&#x27;</span>, command=check).pack()<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>

<p>示例22：文本组件之全文搜索</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;link click&#x27;</span>)<br><br><br>text = Text(root, width=<span class="hljs-number">50</span>, height=<span class="hljs-number">10</span>)<br>text.pack()<br><br><br>text.insert(INSERT, <span class="hljs-string">&#x27;I love www.baidu.com&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getIndex</span>(<span class="hljs-params">text, index</span>):<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>.split(text.index(index), <span class="hljs-string">&#x27;.&#x27;</span>)))<br><br><br>start = <span class="hljs-string">&#x27;1.0&#x27;</span>  <span class="hljs-comment">#开头的位置，第1行的第0个下标位置</span><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>  pos = text.search(<span class="hljs-string">&#x27;o&#x27;</span>, start, stopindex=END)  <span class="hljs-comment">#查找文本中字符o的位置</span><br>  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> pos:<br>    <span class="hljs-keyword">break</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;找到啦，位置是:&#x27;</span>, getIndex(text, pos))<br>  start = pos + <span class="hljs-string">&#x27;+1c&#x27;</span>  <span class="hljs-comment">#&#x27;+1c&#x27;指向下一个字符</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例23：文本组件之撤销操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;link click&#x27;</span>)<br><br><br>text = Text(root, width=<span class="hljs-number">50</span>, height=<span class="hljs-number">10</span>, undo=<span class="hljs-literal">True</span>)  <span class="hljs-comment">#undo模式开启</span><br>text.pack()<br><br><br>text.insert(INSERT, <span class="hljs-string">&#x27;I love www.baidu.com&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">show</span>():<br>  text.edit_undo()<br><br><br>Button(root, text=<span class="hljs-string">&#x27;撤销&#x27;</span>, command=show).pack()  <span class="hljs-comment">#多次撤销会删除文本组件内的内容</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例24：绘制组件 Canvas</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Canvas&#x27;</span>)<br><br><br>w = Canvas(root, width=<span class="hljs-number">500</span>, height=<span class="hljs-number">300</span>)  <span class="hljs-comment">#background=&#x27;black&#x27; 改变背景色</span><br>w.pack()<br><br><br><span class="hljs-comment">#黄色的矩形</span><br>w.create_rectangle(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">450</span>, <span class="hljs-number">250</span>, fill=<span class="hljs-string">&#x27;yellow&#x27;</span>)  <span class="hljs-comment">#参数：左边距, 上边距, 宽, 高</span><br><span class="hljs-comment">#红色的横线</span><br>w.create_line(<span class="hljs-number">0</span>, <span class="hljs-number">300</span>//<span class="hljs-number">2</span>, <span class="hljs-number">500</span>, <span class="hljs-number">300</span>//<span class="hljs-number">2</span>, fill=<span class="hljs-string">&#x27;red&#x27;</span>)<br><span class="hljs-comment">#蓝色的竖虚线</span><br>w.create_line(<span class="hljs-number">500</span>//<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">500</span>//<span class="hljs-number">2</span>, <span class="hljs-number">300</span>, fill=<span class="hljs-string">&#x27;blue&#x27;</span>, dash=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>))  <span class="hljs-comment">#dash 虚线</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例25：绘制组件 Canvas （修改和删除图形）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Canvas&#x27;</span>)<br><br><br>w = Canvas(root, width=<span class="hljs-number">500</span>, height=<span class="hljs-number">300</span>)  <span class="hljs-comment">#background=&#x27;black&#x27; 改变背景色</span><br>w.pack()<br><br><br>rect1 = w.create_rectangle(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">450</span>, <span class="hljs-number">250</span>, fill=<span class="hljs-string">&#x27;yellow&#x27;</span>)  <span class="hljs-comment">#参数：左边距, 上边距, 宽, 高</span><br>line1 = w.create_line(<span class="hljs-number">0</span>, <span class="hljs-number">300</span>//<span class="hljs-number">2</span>, <span class="hljs-number">500</span>, <span class="hljs-number">300</span>//<span class="hljs-number">2</span>, fill=<span class="hljs-string">&#x27;red&#x27;</span>)<br>line2 = w.create_line(<span class="hljs-number">500</span>//<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">500</span>//<span class="hljs-number">2</span>, <span class="hljs-number">300</span>, fill=<span class="hljs-string">&#x27;blue&#x27;</span>, dash=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>))  <span class="hljs-comment">#dash 虚线</span><br><br><br>w.coords(line1, <span class="hljs-number">0</span>, <span class="hljs-number">25</span>, <span class="hljs-number">500</span>, <span class="hljs-number">25</span>)  <span class="hljs-comment">#移动位置</span><br>w.itemconfig(rect1, fill=<span class="hljs-string">&#x27;red&#x27;</span>)<br>w.delete(line2)<br><br><br>Button(root, text=<span class="hljs-string">&#x27;删除全部&#x27;</span>, command=(<span class="hljs-keyword">lambda</span> x=ALL:w.delete(x))).pack()<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例26：绘制组件 Canvas （图形正中心）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Canvas&#x27;</span>)<br><br><br>w = Canvas(root, width=<span class="hljs-number">600</span>, height=<span class="hljs-number">300</span>)<br>w.pack()<br><br><br><br><br>line1 = w.create_line(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">600</span>, <span class="hljs-number">300</span>, fill=<span class="hljs-string">&#x27;green&#x27;</span>, width=<span class="hljs-number">3</span>)<br>line1 = w.create_line(<span class="hljs-number">600</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">300</span>, fill=<span class="hljs-string">&#x27;green&#x27;</span>, width=<span class="hljs-number">3</span>)<br>rect1 = w.create_rectangle(<span class="hljs-number">60</span>, <span class="hljs-number">30</span>, <span class="hljs-number">540</span>, <span class="hljs-number">270</span>, fill=<span class="hljs-string">&#x27;green&#x27;</span>)<br>rect2 = w.create_rectangle(<span class="hljs-number">120</span>, <span class="hljs-number">60</span>, <span class="hljs-number">480</span>, <span class="hljs-number">240</span>, fill=<span class="hljs-string">&#x27;yellow&#x27;</span>)<br><br><br>w.create_text(<span class="hljs-number">300</span>, <span class="hljs-number">150</span>, text=<span class="hljs-string">&#x27;Hello, python!&#x27;</span>)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例27：绘制组件 Canvas （椭圆和圆形）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Canvas&#x27;</span>)<br><br><br>w = Canvas(root, width=<span class="hljs-number">600</span>, height=<span class="hljs-number">300</span>)<br>w.pack()<br><br><br>w.create_rectangle(<span class="hljs-number">60</span>, <span class="hljs-number">30</span>, <span class="hljs-number">540</span>, <span class="hljs-number">270</span>, dash=(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>))<br>w.create_oval(<span class="hljs-number">60</span>, <span class="hljs-number">30</span>, <span class="hljs-number">540</span>, <span class="hljs-number">270</span>, fill=<span class="hljs-string">&#x27;pink&#x27;</span>)  <span class="hljs-comment">#椭圆是通过限定矩形的方式画出来，圆形通过正方形</span><br><span class="hljs-comment">#w.create_oval(60, 30, 300, 270, fill=&#x27;pink&#x27;)  #正方形对应正圆（60-300=30-270）</span><br>w.create_text(<span class="hljs-number">300</span>, <span class="hljs-number">150</span>, text=<span class="hljs-string">&#x27;wow~&#x27;</span>)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例28：绘制组件 Canvas （五角星）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> math <span class="hljs-keyword">as</span> m  <span class="hljs-comment">#用到sin和cos数学函数</span><br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Canvas&#x27;</span>)<br><br><br>w = Canvas(root, width=<span class="hljs-number">600</span>, height=<span class="hljs-number">300</span>, background=<span class="hljs-string">&#x27;red&#x27;</span>)<br>w.pack()<br><br><br>center_x = <span class="hljs-number">300</span><br>center_y = <span class="hljs-number">150</span><br>r = <span class="hljs-number">150</span><br><br><br>points = [<br>  <span class="hljs-comment">#左上点</span><br>  center_x - <span class="hljs-built_in">int</span>(r * m.sin(<span class="hljs-number">2</span> * m.pi / <span class="hljs-number">5</span>)),<br>  center_y - <span class="hljs-built_in">int</span>(r * m.cos(<span class="hljs-number">2</span> * m.pi / <span class="hljs-number">5</span>)),<br>  <span class="hljs-comment">#右上点</span><br>  center_x + <span class="hljs-built_in">int</span>(r * m.sin(<span class="hljs-number">2</span> * m.pi / <span class="hljs-number">5</span>)),<br>  center_y - <span class="hljs-built_in">int</span>(r * m.cos(<span class="hljs-number">2</span> * m.pi / <span class="hljs-number">5</span>)),<br>  <span class="hljs-comment">#左下点</span><br>  center_x - <span class="hljs-built_in">int</span>(r * m.sin(m.pi / <span class="hljs-number">5</span>)),<br>  center_y + <span class="hljs-built_in">int</span>(r * m.cos(m.pi / <span class="hljs-number">5</span>)),<br>  <span class="hljs-comment">#顶点</span><br>  center_x,<br>  center_y - r,<br>  <span class="hljs-comment">#右下点</span><br>  center_x + <span class="hljs-built_in">int</span>(r * m.sin(m.pi / <span class="hljs-number">5</span>)),<br>  center_y + <span class="hljs-built_in">int</span>(r * m.cos(m.pi / <span class="hljs-number">5</span>)),<br>  ]<br><br><br>w.create_polygon(points, outline=<span class="hljs-string">&#x27;yellow&#x27;</span>, fill=<span class="hljs-string">&#x27;yellow&#x27;</span>)  <span class="hljs-comment">#polygon多边形</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例29：绘制组件 Canvas （自定义画板）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#绘制一个极小的圆来代表一个点(tkinter本身不支持画点)</span><br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Canvas draw tool&#x27;</span>)<br><br><br>w = Canvas(root, width=<span class="hljs-number">400</span>, height=<span class="hljs-number">200</span>, background=<span class="hljs-string">&#x27;white&#x27;</span>)<br>w.pack()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">paint</span>(<span class="hljs-params">event</span>):<br>  x1, y1 = (event.x - <span class="hljs-number">1</span>), (event.y - <span class="hljs-number">1</span>)<br>  x2, y2 = (event.x + <span class="hljs-number">1</span>), (event.y + <span class="hljs-number">1</span>)<br>  w.create_oval(x1, y1, x2, y2, fill=<span class="hljs-string">&#x27;red&#x27;</span>)<br><br><br>w.bind(<span class="hljs-string">&#x27;&lt;B1-Motion&gt;&#x27;</span>, paint)  <span class="hljs-comment">#&lt;B1-Motion&gt;绑定鼠标左键事件</span><br><br><br>Label(root, text=<span class="hljs-string">&#x27;按住鼠标左键并移动，开始绘制吧！~~&#x27;</span>).pack(side=BOTTOM)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例30：菜单组件 Menu （主菜单&#x2F;下拉菜单&#x2F;右键菜单&#x2F;单多选菜单&#x2F;按钮菜单&#x2F;选项菜单(列表)）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Main Menu Show&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback</span>():<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;你好~&#x27;</span>)<br><br><br>menubar = Menu(root)<br><br><br><span class="hljs-comment">#注册菜单：文件（下拉菜单）</span><br>filemenu = Menu(menubar, tearoff=<span class="hljs-literal">False</span>)  <span class="hljs-comment">#来自主菜单，tearoff参数可让菜单窗口分离</span><br>filemenu.add_command(label=<span class="hljs-string">&#x27;新建&#x27;</span>, command=callback)<br>filemenu.add_command(label=<span class="hljs-string">&#x27;打开...&#x27;</span>, command=callback)<br>filemenu.add_separator()  <span class="hljs-comment">#分割线</span><br>filemenu.add_command(label=<span class="hljs-string">&#x27;保存&#x27;</span>, command=callback)<br>filemenu.add_separator()  <span class="hljs-comment">#分割线</span><br>filemenu.add_command(label=<span class="hljs-string">&#x27;退出&#x27;</span>, command=root.quit)<br>menubar.add_cascade(label=<span class="hljs-string">&#x27;文件(W)&#x27;</span>, menu=filemenu)<br><br><br><span class="hljs-comment">#主菜单：编辑（下拉菜单）</span><br>editmenu = Menu(menubar, tearoff=<span class="hljs-literal">False</span>)  <span class="hljs-comment">#来自主菜单</span><br>editmenu.add_command(label=<span class="hljs-string">&#x27;撤销&#x27;</span>, command=callback)<br>editmenu.add_command(label=<span class="hljs-string">&#x27;重做&#x27;</span>, command=callback)<br>editmenu.add_separator()  <span class="hljs-comment">#分割线</span><br>editmenu.add_command(label=<span class="hljs-string">&#x27;剪切&#x27;</span>, command=callback)<br>editmenu.add_command(label=<span class="hljs-string">&#x27;复制&#x27;</span>, command=callback)<br>editmenu.add_command(label=<span class="hljs-string">&#x27;粘贴&#x27;</span>, command=callback)<br>editmenu.add_separator()  <span class="hljs-comment">#分割线</span><br>editmenu.add_command(label=<span class="hljs-string">&#x27;全选&#x27;</span>, command=callback)<br>editmenu.add_separator()  <span class="hljs-comment">#分割线</span><br>editmenu.add_command(label=<span class="hljs-string">&#x27;查找...&#x27;</span>, command=callback)<br>menubar.add_cascade(label=<span class="hljs-string">&#x27;编辑(B)&#x27;</span>, menu=editmenu)<br><br><br><span class="hljs-comment">#主菜单：多选√ checkbutton（下拉菜单）</span><br>openVar = IntVar()<br>saveVar = IntVar()<br>quitVar = IntVar()<br>optionmenu = Menu(menubar, tearoff=<span class="hljs-literal">False</span>)<br>optionmenu.add_checkbutton(label=<span class="hljs-string">&#x27;多选项1&#x27;</span>, command=callback, variable=openVar)<br>optionmenu.add_checkbutton(label=<span class="hljs-string">&#x27;多选项2&#x27;</span>, command=callback, variable=saveVar)<br>optionmenu.add_checkbutton(label=<span class="hljs-string">&#x27;多选项3&#x27;</span>, command=callback, variable=quitVar)<br>menubar.add_cascade(label=<span class="hljs-string">&#x27;选项(C)&#x27;</span>, menu=optionmenu)<br><br><br><span class="hljs-comment">#主菜单：单选√ radiobutton（下拉菜单）</span><br>otherVar = IntVar()<br>othermenu = Menu(menubar, tearoff=<span class="hljs-literal">False</span>)<br>othermenu.add_radiobutton(label=<span class="hljs-string">&#x27;单选项1&#x27;</span>, command=callback, variable=otherVar, value=<span class="hljs-number">1</span>)<br>othermenu.add_radiobutton(label=<span class="hljs-string">&#x27;单选项2&#x27;</span>, command=callback, variable=otherVar, value=<span class="hljs-number">2</span>)<br>othermenu.add_radiobutton(label=<span class="hljs-string">&#x27;单选项3&#x27;</span>, command=callback, variable=otherVar, value=<span class="hljs-number">3</span>)<br>menubar.add_cascade(label=<span class="hljs-string">&#x27;其他(C)&#x27;</span>, menu=othermenu)<br><br><br><span class="hljs-comment">#内部菜单：按钮菜单 Menubutton</span><br>mb = Menubutton(root, text=<span class="hljs-string">&#x27;按钮菜单...&#x27;</span>, relief=RAISED)<br>mb.pack()<br>openVar = IntVar()<br>saveVar = IntVar()<br>quitVar = IntVar()<br>optionmenu = Menu(mb, tearoff=<span class="hljs-literal">False</span>)<br>optionmenu.add_checkbutton(label=<span class="hljs-string">&#x27;test&#x27;</span>, command=callback, variable=openVar)<br>optionmenu.add_checkbutton(label=<span class="hljs-string">&#x27;test&#x27;</span>, command=callback, variable=saveVar)<br>optionmenu.add_checkbutton(label=<span class="hljs-string">&#x27;test&#x27;</span>, command=callback, variable=quitVar)<br>mb.config(menu=optionmenu)<br><br><br><span class="hljs-comment">#内部菜单：选项菜单 OptionMenu</span><br>variable = StringVar()<br>variable.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;one&#x27;</span>)  <span class="hljs-comment">#默认显示one</span><br>w = OptionMenu(root, variable, <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>)<br>w.pack()<br><br><br><span class="hljs-comment">#将列表添加到选项菜单 OptionMenu</span><br>OPTIONS = [<br>  <span class="hljs-string">&#x27;表项1&#x27;</span>,<br>  <span class="hljs-string">&#x27;对比2&#x27;</span>,<br>  <span class="hljs-string">&#x27;选项3&#x27;</span>,<br>  <span class="hljs-string">&#x27;其他4&#x27;</span>,<br>  <span class="hljs-string">&#x27;退出5&#x27;</span><br>  ]<br>var = StringVar()<br>var.<span class="hljs-built_in">set</span>(OPTIONS[<span class="hljs-number">0</span>])<br>o = OptionMenu(root, var, *OPTIONS)  <span class="hljs-comment">#*星号解包可变参数列表为逐个元素</span><br>o.pack()<br><br><br><span class="hljs-comment">#主菜单：帮助</span><br>helpmenu = Menu(menubar, tearoff=<span class="hljs-literal">False</span>)<br>helpmenu.add_separator()  <span class="hljs-comment">#分割线</span><br>helpmenu.add_command(label=<span class="hljs-string">&#x27;关于...&#x27;</span>, command=callback)<br>helpmenu.add_separator()  <span class="hljs-comment">#分割线</span><br>menubar.add_cascade(label=<span class="hljs-string">&#x27;帮助(F1)&#x27;</span>, menu=helpmenu)<br><br><br><span class="hljs-comment">#弹出菜单(暂用编辑菜单作为右键)</span><br>frame = Frame(root, width=<span class="hljs-number">512</span>, height=<span class="hljs-number">512</span>)<br>frame.pack()<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">popup</span>(<span class="hljs-params">event</span>):<br>  editmenu.post(event.x_root, event.y_root)<br>frame.bind(<span class="hljs-string">&#x27;&lt;Button-3&gt;&#x27;</span>, popup)  <span class="hljs-comment">#Button-3为鼠标右键，1为左键，2为中键</span><br><br><br>root.config(menu=menubar)  <span class="hljs-comment">#menu参数会将菜单设置添加到root根窗口</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例31：事件绑定 bind （鼠标&#x2F;按键&#x2F;按键组合）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Event bind&#x27;</span>)<br><br><br>frame = Frame(root, width=<span class="hljs-number">200</span>, height=<span class="hljs-number">200</span>)<br><span class="hljs-comment">#鼠标响应事件</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback1</span>(<span class="hljs-params">event</span>):  <span class="hljs-comment">#event形参获取事件描述，必备参数</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;点击位置：&#x27;</span>, event.x, event.y)<br>frame.bind(<span class="hljs-string">&#x27;&lt;Button-1&gt;&#x27;</span>, callback1)  <span class="hljs-comment">#Button表示鼠标点击事件, 12345分别代表左中右键上滚下滚</span><br>frame.pack()<br><br><br><span class="hljs-comment">#键盘响应事件</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback2</span>(<span class="hljs-params">event</span>):<br>  <span class="hljs-built_in">print</span>(event.keysym)  <span class="hljs-comment">#打印信息在IDLE, keysym指键盘所有按键</span><br>frame.bind(<span class="hljs-string">&#x27;&lt;Key&gt;&#x27;</span>, callback2)<br>frame.focus_set()<br>frame.pack()<br><br><br><span class="hljs-comment">#鼠标即时响应事件</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback3</span>(<span class="hljs-params">event</span>):<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;点击位置：&#x27;</span>, event.x, event.y)<br>frame.bind(<span class="hljs-string">&#x27;&lt;Motion&gt;&#x27;</span>, callback3)  <span class="hljs-comment">#鼠标在窗口内只要有移动就一直输出位置</span><br>frame.pack()<br><br><br><span class="hljs-comment">#事件序列（按键组合），语法：&lt;modifier-type-detail&gt; 如</span><br><span class="hljs-comment">#点击鼠标左键：&lt;Button-1&gt;  ButtonRelease更安全，移除组件释放点击时不去触发</span><br><span class="hljs-comment">#点击H字母按键：&lt;KeyPress-H&gt;</span><br><span class="hljs-comment">#同时点击Ctrl+Shift+H：&lt;Control-Shift-KeyPress-H&gt;</span><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例32：消息组件 Message | 输入组件 Spinbox</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Module&#x27;</span>)<br><br><br><span class="hljs-comment">#消息组件：Message</span><br>m1 = Message(root, text=<span class="hljs-string">&#x27;这是一个消息：&#x27;</span>, width=<span class="hljs-number">100</span>)<br>m1.pack()<br><br><br>m2 = Message(root, text=<span class="hljs-string">&#x27;这是一n则骇人听闻的长长长长长长长消息！&#x27;</span>, width=<span class="hljs-number">100</span>)<br>m2.pack()<br><br><br><span class="hljs-comment">#输入组件：Spinbox  (可指定输入范围)</span><br>s1 = Spinbox(root, from_=<span class="hljs-number">0</span>, to=<span class="hljs-number">5</span>)<br>s1.pack()<br>s2 = Spinbox(root, values=(<span class="hljs-string">&#x27;zero&#x27;</span>, <span class="hljs-string">&#x27;one&#x27;</span>, <span class="hljs-string">&#x27;two&#x27;</span>, <span class="hljs-string">&#x27;three&#x27;</span>, <span class="hljs-string">&#x27;four&#x27;</span>, <span class="hljs-string">&#x27;five&#x27;</span>))<br>s2.pack()<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例33：窗口布局管理器 PanedWindow</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Module&#x27;</span>)<br><br><br><span class="hljs-comment">#二窗格</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">p = PanedWindow(orient=VERTICAL)</span><br><span class="hljs-string">p.pack(fill=BOTH, expand=1)</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">top = Label(p, text=&#x27;top pane&#x27;)</span><br><span class="hljs-string">p.add(top)</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">bottom = Label(p, text=&#x27;bottom pane&#x27;)</span><br><span class="hljs-string">p.add(bottom)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment">#三窗格，同时显示隐藏布局线（showhandle=True, sashrelief=SUNKEN）</span><br>p = PanedWindow(showhandle=<span class="hljs-literal">True</span>, sashrelief=SUNKEN)<br>p.pack(fill=BOTH, expand=<span class="hljs-number">1</span>)<br><br><br>left = Label(p, text=<span class="hljs-string">&#x27;left pane&#x27;</span>)<br>p.add(left)<br><br><br>q = PanedWindow(orient=VERTICAL, showhandle=<span class="hljs-literal">True</span>, sashrelief=SUNKEN)<br>p.add(q)<br><br><br>top = Label(q, text=<span class="hljs-string">&#x27;top pane&#x27;</span>)<br>q.add(top)<br>bottom = Label(q, text=<span class="hljs-string">&#x27;bottom pane&#x27;</span>)<br>q.add(bottom)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例34：容器组件 Toplevel （创建顶级窗口，即弹出窗口）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;Toplevel&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">create</span>():<br>  top = Toplevel()<br>  <span class="hljs-comment">#top.attributes(&#x27;-alpha&#x27;, 0.5) 设置弹出的顶级窗口透明度：50%</span><br>  top.title(<span class="hljs-string">&#x27;Toplevel demo...&#x27;</span>)<br><br><br>  msg = Message(top, text=<span class="hljs-string">&#x27;I love python...&#x27;</span>)<br>  msg.pack()<br><br><br>Button(root, text=<span class="hljs-string">&#x27;创建顶级窗口&#x27;</span>, command=create).pack()  <span class="hljs-comment">#点击出现顶级窗口</span><br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例35：几何管理类，包pack()，网格grid()，位置place()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#pack()  注意pack和grid不要混合使用</span><br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;pack&#x27;</span>)<br><br><br><span class="hljs-comment">#Listbox完全填充测试</span><br>listbox = Listbox(root)<br>listbox.pack(fill=BOTH, expand=<span class="hljs-literal">True</span>)  <span class="hljs-comment">#fill=BOTH将窗口填满</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>  listbox.insert(END, <span class="hljs-built_in">str</span>(i))<br><br><br><span class="hljs-comment">#Label纵向填充</span><br>Label(root, text=<span class="hljs-string">&#x27;red&#x27;</span>, bg=<span class="hljs-string">&#x27;red&#x27;</span>, fg=<span class="hljs-string">&#x27;white&#x27;</span>).pack(fill=X)<br>Label(root, text=<span class="hljs-string">&#x27;green&#x27;</span>, bg=<span class="hljs-string">&#x27;green&#x27;</span>, fg=<span class="hljs-string">&#x27;black&#x27;</span>).pack(fill=X)<br>Label(root, text=<span class="hljs-string">&#x27;blue&#x27;</span>, bg=<span class="hljs-string">&#x27;blue&#x27;</span>, fg=<span class="hljs-string">&#x27;white&#x27;</span>).pack(fill=X)<br><br><br><span class="hljs-comment">#Label横向填充</span><br>Label(root, text=<span class="hljs-string">&#x27;red&#x27;</span>, bg=<span class="hljs-string">&#x27;red&#x27;</span>, fg=<span class="hljs-string">&#x27;white&#x27;</span>).pack(side=LEFT)<br>Label(root, text=<span class="hljs-string">&#x27;green&#x27;</span>, bg=<span class="hljs-string">&#x27;green&#x27;</span>, fg=<span class="hljs-string">&#x27;black&#x27;</span>).pack(side=LEFT)<br>Label(root, text=<span class="hljs-string">&#x27;blue&#x27;</span>, bg=<span class="hljs-string">&#x27;blue&#x27;</span>, fg=<span class="hljs-string">&#x27;white&#x27;</span>).pack(side=LEFT)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>grid()  注意pack和grid不要混合使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;grid&#x27;</span>)<br><br><br><span class="hljs-comment">#两个sticky=W实现第一列左对齐</span><br>Label(root, text=<span class="hljs-string">&#x27;用户名&#x27;</span>).grid(row=<span class="hljs-number">0</span>, sticky=W)<br>Label(root, text=<span class="hljs-string">&#x27;密码&#x27;</span>).grid(row=<span class="hljs-number">1</span>, sticky=W)<br><br><br><span class="hljs-comment">#rowspan=2可以让图片横跨2行</span><br>photo = PhotoImage(file=<span class="hljs-string">&#x27;tk_image.png&#x27;</span>)<br>Label(root, image=photo).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">2</span>, rowspan=<span class="hljs-number">2</span>, padx=<span class="hljs-number">5</span>, pady=<span class="hljs-number">5</span>)<br><br><br>Entry(root).grid(row=<span class="hljs-number">0</span>, column=<span class="hljs-number">1</span>)<br>Entry(root, show=<span class="hljs-string">&#x27;*&#x27;</span>).grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">1</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback</span>():<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;登陆中...&#x27;</span>)<br><br><br><span class="hljs-comment">#columnspan=3可以让按钮横跨3列</span><br>Button(text=<span class="hljs-string">&#x27;提交&#x27;</span>, width=<span class="hljs-number">10</span>, command=callback).grid(row=<span class="hljs-number">2</span>, columnspan=<span class="hljs-number">3</span>, pady=<span class="hljs-number">5</span>)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>place()  可以实现一些pack和grid实现不了的布局</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><br><br>root = Tk()<br>root.title(<span class="hljs-string">&#x27;place&#x27;</span>)<br><br><br><span class="hljs-comment">#place位置布局测试</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">photo = PhotoImage(file=&#x27;tk_image.png&#x27;)</span><br><span class="hljs-string">Label(root, image=photo).pack()  #按钮就会出现在图片的组件上，实现组件叠加显示</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">def callback():</span><br><span class="hljs-string">  print(&#x27;正中靶心！！！&#x27;)</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">#relx,rely相对父组件root的位置，0.5正中间，1最右边，0最左边，anchor=CENTER居中显示</span><br><span class="hljs-string">Button(root, text=&#x27;射击&#x27;, command=callback).place(relx=0.5, rely=0.5, anchor=CENTER)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>Label(root, bg=<span class="hljs-string">&#x27;red&#x27;</span>).place(relx=<span class="hljs-number">0.5</span>, rely=<span class="hljs-number">0.5</span>, relheight=<span class="hljs-number">0.75</span>, relwidth=<span class="hljs-number">0.75</span>, anchor=CENTER)<br>Label(root, bg=<span class="hljs-string">&#x27;yellow&#x27;</span>).place(relx=<span class="hljs-number">0.5</span>, rely=<span class="hljs-number">0.5</span>, relheight=<span class="hljs-number">0.5</span>, relwidth=<span class="hljs-number">0.5</span>, anchor=CENTER)<br>Label(root, bg=<span class="hljs-string">&#x27;blue&#x27;</span>).place(relx=<span class="hljs-number">0.5</span>, rely=<span class="hljs-number">0.5</span>, relheight=<span class="hljs-number">0.25</span>, relwidth=<span class="hljs-number">0.25</span>, anchor=CENTER)<br><br><br>mainloop()<br></code></pre></td></tr></table></figure>


<p>示例35：对话框 （警告 showinfo | 消息 messagebox | 文件 filedialog | 颜色 colorchooser)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox   <span class="hljs-comment">#messagebox()需要单独导入</span><br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> filedialog   <span class="hljs-comment">#filedialog()需要单独导入</span><br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> colorchooser  <span class="hljs-comment">#colorchooser()需要单独导入</span><br><span class="hljs-keyword">from</span> tkinter.messagebox <span class="hljs-keyword">import</span> *  <span class="hljs-comment">#用户使用showinfo()</span><br><br><br><span class="hljs-comment">#警告对话框</span><br>showinfo(title=<span class="hljs-string">&#x27;test&#x27;</span>, message=<span class="hljs-string">&#x27;警告&#x27;</span>)<br><br><br><span class="hljs-comment">#消息对话框</span><br>result = messagebox.askokcancel(<span class="hljs-string">&#x27;demo&#x27;</span>, <span class="hljs-string">&#x27;发射核弹？&#x27;</span>)  <span class="hljs-comment">#返回值是True或False</span><br><span class="hljs-built_in">print</span>(result)  <span class="hljs-comment">#根据用户按下了确定还是取消做进一步的操作</span><br><br><br><span class="hljs-comment">#文件对话框</span><br>root = Tk()<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback1</span>():<br>  filename = filedialog.askopenfilename(defaultextension=<span class="hljs-string">&#x27;.py&#x27;</span>)  <span class="hljs-comment">#指定文件后缀</span><br>  <span class="hljs-built_in">print</span>(filename)  <span class="hljs-comment">#返回的是文件的完整路径</span><br><br><br>Button(root, text=<span class="hljs-string">&#x27;打开文件&#x27;</span>, command=callback1).pack()<br><br><br><span class="hljs-comment">#颜色选择对话框</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">callback2</span>():<br>  color_data = colorchooser.askcolor()  <span class="hljs-comment">#调用windows的颜色选择器</span><br>  <span class="hljs-built_in">print</span>(color_data)  <span class="hljs-comment">#选择红色打印：((255.99609375, 0.0, 0.0), &#x27;#ff0000&#x27;)</span><br><br><br>Button(root, text=<span class="hljs-string">&#x27;选择颜色&#x27;</span>, command=callback2).pack()<br><br>mainloop()<br></code></pre></td></tr></table></figure>
























              
            </div>
            <hr/>
            <div>
              <div>
  <img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20241112163319.png" srcset="/img/loading.gif" lazyload>
</div>
<div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/02-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="category-chain-item">02_编程语言</a>
  
  
    <span>></span>
    
  <a href="/categories/02-%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02-Python/" class="category-chain-item">02_Python</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AF%AD%E6%B3%95/">#语法</a>
      
        <a href="/tags/Python/">#Python</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>01-Python基础语法大全</div>
      <div>https://janycode.github.io/2017/09/09/02_编程语言/02_Python/01-Python基础语法大全/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Jerry(姜源)</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2017年9月9日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 姜源">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2017/09/28/02_%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/01_Java/01_JavaSE/09_%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/01-Java%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E8%AF%A6%E8%A7%A3/" title="01-Java注解开发详解">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">01-Java注解开发详解</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2017/06/28/03_%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/04_%E7%AE%97%E6%B3%95/01-%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/" title="01-二叉搜索树">
                        <span class="hidden-mobile">01-二叉搜索树</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="SOHUCS" sid='https://janycode.github.io/2017/09/09/02_%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/02_Python/01-Python%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E5%A4%A7%E5%85%A8/'></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#SOHUCS', function() {
      Fluid.utils.createScript("https://changyan.sohu.com/upload/changyan.js", function() {
        window.changyan.api.config({"appid":"cyw5OHIcO","appkey":"fea3446b3df4b3f129f34da4cbc87e51"})
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://simple.blog.csdn.net" target="_blank" rel="nofollow noopener"><span>CSDN</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/janycode" target="_blank" rel="nofollow noopener"><span>GitHub</span></a> <i class="iconfont icon-love"></i> <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量(PV) 
        <span id="busuanzi_value_site_pv"></span>
         次，
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数(UV) 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

<!-- live2d 动画 -->
<script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>
<script>
    L2Dwidget.init({
        "model": {
            jsonPath: "https://unpkg.com/live2d-widget-model-haruto@1.0.5/assets/haruto.model.json",
            "scale": 1
        },
        "display": {
            "position": "right",
            "width": 100,
            "height": 200,
            "hOffset": 35,
            "vOffset": -85
        },
        "mobile": {
            "show": false,
            "scale": 0.1
        },
        "react": {
            "opacityDefault": 0.75,
            "opacityOnHover": 0.2
        }
    });
</script>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <!-- Baidu Analytics -->
    <script defer>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?bfff735c897eb60ea49b735096b20e47";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  

  

  

  

  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
