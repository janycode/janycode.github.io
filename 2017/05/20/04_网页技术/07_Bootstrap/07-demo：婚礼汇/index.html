

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Jerry(姜源)">
  <meta name="keywords" content="Java,Html,CSS,JavaScript,Python,C,Linux,shell编程经验分享、技术总结、心得体会">
  
    <meta name="description" content="1. 物理数据模型PowerDesigner 软件设计：  酒店、房间、套餐、酒店信息、图片    用户、购物车   2. 功能详细结构 婚礼汇 会员中心 登录 注册 我的订单   婚宴场地 酒店列表 酒店详情 套餐详情   我的购物车   后台管理系统 登录 首页 酒店管理 修改酒店 添加酒店 删除酒店   会员管理 订单管理    3. 功能流程说明 4. 项目环境搭建4.1 导入 jar 包">
<meta property="og:type" content="article">
<meta property="og:title" content="07-demo：婚礼汇">
<meta property="og:url" content="https://janycode.github.io/2017/05/20/04_%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/07_Bootstrap/07-demo%EF%BC%9A%E5%A9%9A%E7%A4%BC%E6%B1%87/index.html">
<meta property="og:site_name" content="姜源の云笔记">
<meta property="og:description" content="1. 物理数据模型PowerDesigner 软件设计：  酒店、房间、套餐、酒店信息、图片    用户、购物车   2. 功能详细结构 婚礼汇 会员中心 登录 注册 我的订单   婚宴场地 酒店列表 酒店详情 套餐详情   我的购物车   后台管理系统 登录 首页 酒店管理 修改酒店 添加酒店 删除酒店   会员管理 订单管理    3. 功能流程说明 4. 项目环境搭建4.1 导入 jar 包">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145135.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145149.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145231.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145243.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145259.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145311.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145330.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145339.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145408.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145416.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145422.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/image-20200522224928578.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145432.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145441.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145447.png">
<meta property="og:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145512.jpg">
<meta property="article:published_time" content="2017-05-20T12:38:22.000Z">
<meta property="article:modified_time" content="2023-12-24T03:11:24.300Z">
<meta property="article:author" content="Jerry(姜源)">
<meta property="article:tag" content="Bootstrap">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145135.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>07-demo：婚礼汇 - 姜源の云笔记</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"janycode.github.io","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":50,"cursorChar":"|","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":false},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"bfff735c897eb60ea49b735096b20e47","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 50vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>姜源の云笔记</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tools/">
                <i class="iconfont icon-slack-fill"></i>
                工具
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" target="_blank" rel="noopener" href="https://yuancodes.github.io/">
                <i class="iconfont icon-notebook"></i>
                Docsify
              </a>
            </li>
          
        
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="07-demo：婚礼汇"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Jerry(姜源)
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2017-05-20 20:38" pubdate>
          星期六, 2017/05/20 20:38:22
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          50k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          414 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">07-demo：婚礼汇</h1>
            
            <div class="markdown-body">
              
              <h3 id="1-物理数据模型"><a href="#1-物理数据模型" class="headerlink" title="1. 物理数据模型"></a>1. 物理数据模型</h3><p>PowerDesigner 软件设计：</p>
<ul>
<li>酒店、房间、套餐、酒店信息、图片</li>
</ul>
<p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145135.png" srcset="/img/loading.gif" lazyload alt="image-20230316145134731"></p>
<ul>
<li>用户、购物车</li>
</ul>
<p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145149.png" srcset="/img/loading.gif" lazyload alt="image-20230316145148272"></p>
<h3 id="2-功能详细结构"><a href="#2-功能详细结构" class="headerlink" title="2. 功能详细结构"></a>2. 功能详细结构</h3><ul>
<li><strong>婚礼汇</strong><ul>
<li>会员中心<ul>
<li>登录</li>
<li>注册</li>
<li>我的订单</li>
</ul>
</li>
<li>婚宴场地<ul>
<li>酒店列表</li>
<li>酒店详情</li>
<li>套餐详情</li>
</ul>
</li>
<li>我的购物车</li>
</ul>
</li>
<li><strong>后台管理系统</strong><ul>
<li>登录</li>
<li>首页</li>
<li>酒店管理<ul>
<li>修改酒店</li>
<li>添加酒店</li>
<li>删除酒店</li>
</ul>
</li>
<li>会员管理</li>
<li>订单管理</li>
</ul>
</li>
</ul>
<h3 id="3-功能流程说明"><a href="#3-功能流程说明" class="headerlink" title="3. 功能流程说明"></a>3. 功能流程说明</h3><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145231.png" srcset="/img/loading.gif" lazyload alt="image-20230316145230361"></p>
<h3 id="4-项目环境搭建"><a href="#4-项目环境搭建" class="headerlink" title="4. 项目环境搭建"></a>4. 项目环境搭建</h3><h4 id="4-1-导入-jar-包"><a href="#4-1-导入-jar-包" class="headerlink" title="4.1 导入 jar 包"></a>4.1 导入 jar 包</h4><ul>
<li><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145243.png" srcset="/img/loading.gif" lazyload alt="image-20230316145242988"></li>
</ul>
<h4 id="4-2-导入工具类"><a href="#4-2-导入工具类" class="headerlink" title="4.2 导入工具类"></a>4.2 导入工具类</h4><ul>
<li><strong>CommonUtils</strong>  获取32位随机字符串</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonUtils</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">uuid</span><span class="hljs-params">()</span>&#123;<br>    	<span class="hljs-keyword">return</span> UUID.randomUUID().toString().replace(<span class="hljs-string">&quot;-&quot;</span>,<span class="hljs-string">&quot;&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>JDBCUtils</strong>  获取连接池</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCUtils</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> DataSource dataSource;<br>    <span class="hljs-keyword">static</span> &#123;<br>        dataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComboPooledDataSource</span>();<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DataSource <span class="hljs-title function_">getDataSource</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> dataSource;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><strong>JsonUtils</strong>  产生json字符串、将json字符串作为响应正文</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonUtils</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 将指定对象转换成json字符串</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> object</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> JsonProcessingException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">toJsonStr</span><span class="hljs-params">(Object object)</span> <span class="hljs-keyword">throws</span> JsonProcessingException &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writeValueAsString(object);<br>    &#125;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 将指定对象转换为json字符串，并将json字符串作为响应正文</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> object</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeJsonStr</span><span class="hljs-params">(HttpServletResponse response,Object object)</span>&#123;<br>        response.setContentType(<span class="hljs-string">&quot;application/json;charset=utf-8&quot;</span>);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">jsonStr</span> <span class="hljs-operator">=</span> toJsonStr(object);<br>            response.getWriter().write(jsonStr);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4-3-引入配置文件"><a href="#4-3-引入配置文件" class="headerlink" title="4.3 引入配置文件"></a>4.3 引入配置文件</h4><ul>
<li>c3p0.properites</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">c3p0.driverClass</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-attr">c3p0.jdbcUrl</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/wedding</span><br><span class="hljs-attr">c3p0.user</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">c3p0.password</span>=<span class="hljs-string">123456</span><br></code></pre></td></tr></table></figure>

<ul>
<li><p>建立三层架构</p>
<ul>
<li><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145259.png" srcset="/img/loading.gif" lazyload alt="image-20230316145258806"></li>
</ul>
</li>
<li><p>通用Servlet</p>
</li>
<li><p>引入页面资源</p>
</li>
</ul>
<h3 id="5-BaseServlet-通用"><a href="#5-BaseServlet-通用" class="headerlink" title="5. BaseServlet 通用"></a>5. BaseServlet 通用</h3><ul>
<li>BaseServlet.java<ol>
<li>根据子类中 methodName 方法名利用<code>反射调用执行</code>该方法</li>
<li>根据是否有返回值，有返回值进行<code>标记注解</code>判断，无返回值无需操作</li>
<li>有标记注解时：如果返回 String 类型则直接以<code>json</code>格式响应；如果返回其他对象格式，则<code>jackson</code>转换再响应</li>
<li>无标记注解时：如果不包含”:”则<code>转发到&quot;WEB-INF/jsp&quot;+path</code>；如果包含”:”则判断前缀进行转发或重定向操作</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;BaseServlet&quot;,urlPatterns = &quot;/base&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;methodName&quot;</span>);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getClass().getMethod(methodName, HttpServletRequest.class, HttpServletResponse.class);<br>            <span class="hljs-keyword">if</span> (method != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-type">Object</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> method.invoke(<span class="hljs-built_in">this</span>,request,response);<br>                <span class="hljs-comment">//判断是否有返回值</span><br>                <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != returnValue) &#123;<br>                    <span class="hljs-comment">//有返回值，判断方法上是否有@MyResponseBody注解</span><br>                    <span class="hljs-type">boolean</span> <span class="hljs-variable">present</span> <span class="hljs-operator">=</span> method.isAnnotationPresent(MyResponseBody.class);<br>                    <span class="hljs-keyword">if</span> (present) &#123;<br>                        <span class="hljs-comment">//有@MyResponseBody注解，需要返回json字符串</span><br>                        <span class="hljs-keyword">if</span> (returnValue.getClass() == String.class) &#123;<br>                            <span class="hljs-comment">//1,直接返回json字符串，将json字符串作为响应正文</span><br>                            response.setContentType(<span class="hljs-string">&quot;application/json;charset=utf-8&quot;</span>);<br>                            response.getWriter().write(returnValue+<span class="hljs-string">&quot;&quot;</span>);<br>                        &#125; <span class="hljs-keyword">else</span> &#123;<br>                            <span class="hljs-comment">//2,直接返回java对象，将java对象转换成json字符串，将json字符串作为响应正文</span><br>                            JsonUtils.writeJsonStr(response,returnValue);<br>                        &#125;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        <span class="hljs-comment">//没有@MyResponseBody注解，返回的是资源的路径</span><br>                        <span class="hljs-type">String</span> <span class="hljs-variable">newReturnValue</span> <span class="hljs-operator">=</span> (String) returnValue;<br>                        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> newReturnValue.lastIndexOf(<span class="hljs-string">&quot;:&quot;</span>);<br>                        <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> newReturnValue.substring(index + <span class="hljs-number">1</span>);<br>                        <span class="hljs-keyword">if</span> (index != -<span class="hljs-number">1</span>) &#123;<br>                            <span class="hljs-comment">//存在&quot;:&quot;</span><br>                            <span class="hljs-keyword">if</span> (newReturnValue.startsWith(<span class="hljs-string">&quot;redirect&quot;</span>)) &#123;<br>                                <span class="hljs-comment">//1,重定向</span><br>                                response.sendRedirect(request.getContextPath()+ File.separator + path);<br>                            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newReturnValue.startsWith(<span class="hljs-string">&quot;forward&quot;</span>))&#123;<br>                                <span class="hljs-comment">//2,请求转发</span><br>                                request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span> + path).forward(request,response);<br>                            &#125;<br>                        &#125; <span class="hljs-keyword">else</span> &#123;<br>                            <span class="hljs-comment">//不存在&quot;:&quot;，请求转发</span><br>                            request.getRequestDispatcher(<span class="hljs-string">&quot;/WEB-INF/jsp/&quot;</span> + newReturnValue).forward(request,response);<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        doPost(request,response);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="6-登录"><a href="#6-登录" class="headerlink" title="6. 登录"></a>6. 登录</h3><ul>
<li><p>页面访问安全问题</p>
<ul>
<li>需要将 jsp 放入到 WEB-INF 文件夹中，WEB-INF 文件夹不能够被外部直接访问，只能通过内部转发的方式访问</li>
</ul>
</li>
</ul>
<h4 id="6-1-表单页面"><a href="#6-1-表单页面" class="headerlink" title="6.1 表单页面"></a>6.1 表单页面</h4><ul>
<li>login.jsp</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;red&quot;</span>&gt;</span>$&#123;errorMsg&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;methodName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;login&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user_tel&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-input&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;15&quot;</span> <span class="hljs-attr">maxlength</span>=<span class="hljs-string">&quot;15&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;手机号&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user_password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-input&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;15&quot;</span> <span class="hljs-attr">maxlength</span>=<span class="hljs-string">&quot;15&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;密码&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;qrCode&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-input user-input-adjust&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">max</span>=<span class="hljs-string">&quot;4&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;验证码&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;$(&#x27;.qrcode&#x27;).attr(&#x27;src&#x27;,&#x27;$&#123;pageContext.request.contextPath&#125;/validatecode.jsp?&#x27;+Math.random())&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;qrcode&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;cursor:pointer&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/validatecode.jsp&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-check&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><br>                登录即表示同意<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;keyword-blue-pale&quot;</span>&gt;</span>《119婚庆网用户协议》<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-button&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-weight: bold;&quot;</span>&gt;</span>登<span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>录<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item us_text_right&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>忘记密码?<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span_empty&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/center?methodName=toRegister&quot;</span>&gt;</span>注册账号<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br></code></pre></td></tr></table></figure>



<h4 id="6-2-随机验证码"><a href="#6-2-随机验证码" class="headerlink" title="6.2 随机验证码"></a>6.2 随机验证码</h4><ul>
<li>login.jsp</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> </span><br><span class="hljs-tag">  <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;$(&#x27;.qrcode&#x27;).attr(&#x27;src&#x27;,&#x27;$&#123;pageContext.request.contextPath&#125;/validatecode.jsp?&#x27;+Math.random())&quot;</span> </span><br><span class="hljs-tag">  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;qrcode&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;cursor:pointer&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/validatecode.jsp&quot;</span></span><br><span class="hljs-tag">/&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>style&#x3D;”cursor:pointer”   鼠标指针变成 手 的形状，和放到链接上面的鼠标指针一样。</p>
</blockquote>
<ul>
<li>validatecode.jsp</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;<br>    pageEncoding=&quot;UTF-8&quot;%&gt;<br>&lt;%@ page import=&quot;java.util.Random&quot;%&gt;<br>&lt;%@ page import=&quot;java.io.OutputStream&quot;%&gt;<br>&lt;%@ page import=&quot;java.awt.Color&quot;%&gt;<br>&lt;%@ page import=&quot;java.awt.Font&quot;%&gt;<br>&lt;%@ page import=&quot;java.awt.Graphics&quot;%&gt;<br>&lt;%@ page import=&quot;java.awt.image.BufferedImage&quot;%&gt;<br>&lt;%@ page import=&quot;javax.imageio.ImageIO&quot;%&gt;<br>&lt;%<br>   int width = 60;<br>   int height = 32;<br>   //创建图片对象<br>   BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);<br>   Graphics g = image.getGraphics();<br>   //设置背景颜色<br>   g.setColor(new Color(0xDCDCDC));<br>   g.fillRect(0, 0, width, height);<br>   //设置边框<br>   g.setColor(Color.black);<br>   g.drawRect(0, 0, width - 1, height - 1);<br>   // create a random instance to generate the codes<br>   Random rdm = new Random();<br>   String hash1 = Integer.toHexString(rdm.nextInt());<br>   //画干扰线<br>   for (int i = 0; i &lt; 50; i++) &#123;<br>      int x = rdm.nextInt(width);<br>      int y = rdm.nextInt(height);<br>      g.drawOval(x, y, 0, 0);<br>   &#125;<br>   //生成四位随机验证码<br>   String capstr = hash1.substring(0, 4);<br>   session.setAttribute(&quot;key&quot;, capstr);<br>   System.out.println(capstr);<br>   g.setColor(new Color(0, 100, 0));<br>   g.setFont(new Font(&quot;Candara&quot;, Font.BOLD, 24));<br>   g.drawString(capstr, 8, 24);<br>   g.dispose();<br>   response.setContentType(&quot;image/jpeg&quot;);<br>   out.clear();<br>   out = pageContext.pushBody();<br>   OutputStream strm = response.getOutputStream();<br>   ImageIO.write(image, &quot;jpeg&quot;, strm);<br>   strm.close();<br>%&gt;<br></code></pre></td></tr></table></figure>

<h4 id="6-3-Java-后端"><a href="#6-3-Java-后端" class="headerlink" title="6.3 Java 后端"></a>6.3 Java 后端</h4><ul>
<li>CenterServlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;CenterServlet&quot;,urlPatterns = &quot;/center&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CenterServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 转发到login.jsp</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> request</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toLogin</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login.jsp&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 转发到index.jsp</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> request</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toIndex</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;index.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>UserServlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;UserServlet&quot;,urlPatterns = &quot;/user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">login</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span>&#123;<br>        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>            BeanUtils.populate(user,request.getParameterMap());<br>            <span class="hljs-comment">//获取输入的验证码</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">inputQrCode</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;qrCode&quot;</span>);<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">existQrCode</span> <span class="hljs-operator">=</span> request.getSession().getAttribute(<span class="hljs-string">&quot;key&quot;</span>);<span class="hljs-comment">//existQrCode存储在session中</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != existQrCode) &#123;<br>                <span class="hljs-keyword">if</span> (existQrCode.equals(inputQrCode)) &#123;<br>                    <span class="hljs-comment">//验证码正确，进行登录操作</span><br>                    <span class="hljs-type">User</span> <span class="hljs-variable">existUser</span> <span class="hljs-operator">=</span> userService.login(user);<br>                    System.out.println(existUser);<br>                    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != existUser) &#123;<br>                        <span class="hljs-comment">//登录成功，保存用户信息，跳转到首页</span><br>                        request.getSession().setAttribute(<span class="hljs-string">&quot;existUser&quot;</span>,existUser);<br>                        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:center?methodName=toIndex&quot;</span>;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        <span class="hljs-comment">//登录失败</span><br>                        request.setAttribute(<span class="hljs-string">&quot;errorMsg&quot;</span>,<span class="hljs-string">&quot;登录失败&quot;</span>);<br>                        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login.jsp&quot;</span>;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-comment">//验证码不正确，跳转到登录页面</span><br>                    request.setAttribute(<span class="hljs-string">&quot;errorMsg&quot;</span>,<span class="hljs-string">&quot;验证码错误&quot;</span>);<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login.jsp&quot;</span>;<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        request.setAttribute(<span class="hljs-string">&quot;errorMsg&quot;</span>,<span class="hljs-string">&quot;登录失败&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="7-注册"><a href="#7-注册" class="headerlink" title="7. 注册"></a>7. 注册</h3><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145311.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h4 id="7-1-表单校验"><a href="#7-1-表单校验" class="headerlink" title="7.1 表单校验"></a>7.1 表单校验</h4><ul>
<li>注册页面<ul>
<li>发送验证码的页面代码</li>
<li>表单校验的页面代码</li>
</ul>
</li>
<li>代码实现</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>会员注册<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/css/wedding-3.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/css/wedding-2.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/bootstrap/css/bootstrap.min.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/bootstrapvalidator/css/bootstrapValidator.min.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery-3.1.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/bootstrap/js/bootstrap.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/bootstrapvalidator/js/bootstrapValidator.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">         * 发送验证码</span></span><br><span class="hljs-comment"><span class="language-javascript">         */</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> inter;</span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendSMS</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//校验手机号，触发 bootstrapValidator 对手机号校验</span></span><br><span class="language-javascript">            <span class="hljs-comment">//初始化 bootstrapValidator 对象</span></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> validator = $(<span class="hljs-string">&quot;#myForm&quot;</span>).<span class="hljs-title function_">data</span>(<span class="hljs-string">&#x27;bootstrapValidator&#x27;</span>);</span><br><span class="language-javascript">            validator.<span class="hljs-title function_">validateField</span>(<span class="hljs-string">&quot;user_tel&quot;</span>);</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> flag = validator.<span class="hljs-title function_">isValidField</span>(<span class="hljs-string">&quot;user_tel&quot;</span>);</span><br><span class="language-javascript">            <span class="hljs-comment">// 手机号被输入，且手机号规则符合正则才可以点击发送验证码</span></span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (flag) &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">//触发重复行为：每隔一秒显示一次数字</span></span><br><span class="language-javascript">                inter = <span class="hljs-built_in">setInterval</span>(<span class="hljs-string">&quot;showCount()&quot;</span>,<span class="hljs-number">1000</span>);</span><br><span class="language-javascript">                $(<span class="hljs-string">&quot;.qrcode&quot;</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;disabled&quot;</span>,<span class="hljs-literal">true</span>);</span><br><span class="language-javascript">			   <span class="hljs-comment">//请求服务器发送验证码</span></span><br><span class="language-javascript">                $.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/sms&quot;</span>,&#123;</span><br><span class="language-javascript">                    <span class="hljs-string">&quot;methodName&quot;</span>:<span class="hljs-string">&quot;sendSMS&quot;</span>,</span><br><span class="language-javascript">                    <span class="hljs-string">&quot;phoneNum&quot;</span>:$(<span class="hljs-string">&quot;#user_tel&quot;</span>).<span class="hljs-title function_">val</span>()</span><br><span class="language-javascript">                &#125;,<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);</span><br><span class="language-javascript">                &#125;,<span class="hljs-string">&quot;json&quot;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> count = <span class="hljs-number">60</span>;</span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">showCount</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;.qrcode&quot;</span>).<span class="hljs-title function_">text</span>(count+<span class="hljs-string">&quot;S&quot;</span>);</span><br><span class="language-javascript">            count--;</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">0</span> ) &#123;</span><br><span class="language-javascript">                <span class="hljs-built_in">clearInterval</span>(inter);</span><br><span class="language-javascript">                $(<span class="hljs-string">&quot;.qrcode&quot;</span>).<span class="hljs-title function_">text</span>(<span class="hljs-string">&quot;发送验证码&quot;</span>);</span><br><span class="language-javascript">                count = <span class="hljs-number">60</span>;</span><br><span class="language-javascript">                $(<span class="hljs-string">&quot;.qrcode&quot;</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;disabled&quot;</span>,<span class="hljs-literal">false</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        $(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;#myForm&quot;</span>).<span class="hljs-title function_">bootstrapValidator</span>(&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;this is no a valiad field&quot;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">fields</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">user_tel</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;手机号格式错误&quot;</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">validators</span>:&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">notEmpty</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;手机号不能为空&quot;</span></span><br><span class="language-javascript">                            &#125;,</span><br><span class="language-javascript">                            <span class="hljs-attr">stringLength</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;手机号长度为11&quot;</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">min</span>:<span class="hljs-number">11</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">max</span>:<span class="hljs-number">11</span></span><br><span class="language-javascript">                            &#125;,</span><br><span class="language-javascript">                            <span class="hljs-attr">regexp</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;手机号格式不对&quot;</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[1]&#123;1&#125;[1356789]&#123;1&#125;[0-9]+$/</span></span><br><span class="language-javascript">                            &#125;</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">user_password</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;密码格式错误&quot;</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">validators</span>:&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">notEmpty</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;密码不能为空&quot;</span></span><br><span class="language-javascript">                            &#125;,</span><br><span class="language-javascript">                            <span class="hljs-attr">stringLength</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;密码长度为6~8&quot;</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">min</span>:<span class="hljs-number">6</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">max</span>:<span class="hljs-number">8</span></span><br><span class="language-javascript">                            &#125;,</span><br><span class="language-javascript">                            <span class="hljs-attr">regexp</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;密码由小写字母、数字组成&quot;</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[a-z0-9]+$/</span></span><br><span class="language-javascript">                            &#125;,</span><br><span class="language-javascript">                            <span class="hljs-attr">different</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;密码不能和手机号一致&quot;</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">field</span>:<span class="hljs-string">&quot;user_tel&quot;</span></span><br><span class="language-javascript">                            &#125;</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    &#125;,</span><br><span class="language-javascript">                    <span class="hljs-attr">qrCode</span>:&#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;验证码格式错误&quot;</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">validators</span>:&#123;</span><br><span class="language-javascript">                            <span class="hljs-attr">notEmpty</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;验证码不能为空&quot;</span></span><br><span class="language-javascript">                            &#125;,</span><br><span class="language-javascript">                            <span class="hljs-attr">stringLength</span>:&#123;</span><br><span class="language-javascript">                                <span class="hljs-attr">message</span>:<span class="hljs-string">&quot;验证码长度为4&quot;</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">min</span>:<span class="hljs-number">4</span>,</span><br><span class="language-javascript">                                <span class="hljs-attr">max</span>:<span class="hljs-number">4</span></span><br><span class="language-javascript">                            &#125;</span><br><span class="language-javascript">                        &#125;</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.user-form-wraps</span>&#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.user-form-button</span>&#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">320px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;public-toolbar&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hidden_active user_adjust_public&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layout_center layout_clear&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-logo layout_fl&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/img/rxT54692503vu.jpg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page-tels layout_fr&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tel-show&quot;</span>&gt;</span> 全国免费咨询热线 <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tel-pink&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>023-6766-4541<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background:url($&#123;pageContext.request.contextPath&#125;/img/JQK51845110Xc.jpg)&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layout_center&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-wrap&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-wraps&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-title&quot;</span>&gt;</span>会员注册<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myForm&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/user&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;methodName&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;regist&quot;</span>/&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item form-group&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user_tel&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-input&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;手机号&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item form-group&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;user_password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-input&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span>  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;密码&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item form-group&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;qrCode&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-input user-input-adjust&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>  <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;短信验证码&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;qrcode&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;sendSMS()&quot;</span>&gt;</span>发送验证码<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-check&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;yes&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><br>                                	登录即表示同意<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;keyword-blue-pale&quot;</span>&gt;</span>《119婚庆网用户协议》<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item form-group&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-button&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-weight: bold;&quot;</span>&gt;</span>立即注册<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-form-item us_text_right&quot;</span>&gt;</span><br>                    	<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/center?methodName=toLogin&quot;</span>&gt;</span>已有账户?立即登录<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="7-2-手机验证码"><a href="#7-2-手机验证码" class="headerlink" title="7.2 手机验证码"></a>7.2 手机验证码</h4><ul>
<li><p>手机验证码是由阿里云短信平台提供。</p>
</li>
<li><p>开发流程</p>
<ul>
<li><p>在阿里云短信平台开通服务</p>
<ul>
<li><code>权限码(AccessKey)</code></li>
<li><code>签名</code></li>
<li><code>短信模板</code></li>
</ul>
</li>
<li><p>导入jar包</p>
<ul>
<li><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145330.png" srcset="/img/loading.gif" lazyload alt="image-20230316145329154"></li>
</ul>
</li>
<li><p>使用SMSUtils工具类</p>
</li>
</ul>
</li>
<li><p><strong>SMSUtils.java</strong> 代码实现</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.aliyuncs.DefaultAcsClient;<br><span class="hljs-keyword">import</span> com.aliyuncs.IAcsClient;<br><span class="hljs-keyword">import</span> com.aliyuncs.dysmsapi.model.v20170525.SendSmsRequest;<br><span class="hljs-keyword">import</span> com.aliyuncs.dysmsapi.model.v20170525.SendSmsResponse;<br><span class="hljs-keyword">import</span> com.aliyuncs.exceptions.ClientException;<br><span class="hljs-keyword">import</span> com.aliyuncs.profile.DefaultProfile;<br><span class="hljs-keyword">import</span> com.aliyuncs.profile.IClientProfile;<br><span class="hljs-keyword">import</span> sun.plugin2.os.windows.SECURITY_ATTRIBUTES;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpSession;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><span class="hljs-keyword">import</span> java.util.Random;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsUtil</span> &#123;<br>    <span class="hljs-comment">//产品名称:云通信短信API产品,开发者无需替换</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Dysmsapi&quot;</span>;<br>    <span class="hljs-comment">//产品域名,开发者无需替换</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">domain</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dysmsapi.aliyuncs.com&quot;</span>;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String accessKeyId ;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String accessKeySecret ;<br>    <span class="hljs-keyword">static</span> &#123;<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> SmsUtil.class.getClassLoader().getResourceAsStream(<span class="hljs-string">&quot;sms.properties&quot;</span>);<br>        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>        <span class="hljs-keyword">try</span> &#123;<br>            properties.load(inputStream);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        accessKeyId = properties.getProperty(<span class="hljs-string">&quot;accessKeyId&quot;</span>);<br>        accessKeySecret = properties.getProperty(<span class="hljs-string">&quot;accessKeySecret&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 发送验证码</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> session</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> ClientException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SendSmsResponse <span class="hljs-title function_">sendSms</span><span class="hljs-params">(HttpSession session,String phoneNum)</span> <span class="hljs-keyword">throws</span> ClientException &#123;<br>        <span class="hljs-comment">//可自助调整超时时间</span><br>        System.setProperty(<span class="hljs-string">&quot;sun.net.client.defaultConnectTimeout&quot;</span>, <span class="hljs-string">&quot;10000&quot;</span>);<br>        System.setProperty(<span class="hljs-string">&quot;sun.net.client.defaultReadTimeout&quot;</span>, <span class="hljs-string">&quot;10000&quot;</span>);<br><br>        <span class="hljs-comment">//初始化acsClient,暂不支持region化</span><br>        <span class="hljs-type">IClientProfile</span> <span class="hljs-variable">profile</span> <span class="hljs-operator">=</span> DefaultProfile.getProfile(<span class="hljs-string">&quot;cn-hangzhou&quot;</span>, accessKeyId, accessKeySecret);<br>        DefaultProfile.addEndpoint(<span class="hljs-string">&quot;cn-hangzhou&quot;</span>, <span class="hljs-string">&quot;cn-hangzhou&quot;</span>, product, domain);<br>        <span class="hljs-type">IAcsClient</span> <span class="hljs-variable">acsClient</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultAcsClient</span>(profile);<br><br>        <span class="hljs-comment">//组装请求对象-具体描述见控制台-文档部分内容</span><br>        <span class="hljs-type">SendSmsRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SendSmsRequest</span>();<br>        <span class="hljs-comment">//必填:待发送手机号</span><br>        request.setPhoneNumbers(phoneNum);<br>        <span class="hljs-comment">//必填:短信签名-可在短信控制台中找到</span><br>        request.setSignName(<span class="hljs-string">&quot;签名名称&quot;</span>);<br>        <span class="hljs-comment">//必填:短信模板-可在短信控制台中找到</span><br>        request.setTemplateCode(<span class="hljs-string">&quot;模版CODE&quot;</span>);<br><br>        <span class="hljs-comment">//产生四位随机验证码</span><br>        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">randomNum</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;<br>            randomNum.append(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().nextInt(<span class="hljs-number">10</span>));<br>        &#125;<br>        request.setTemplateParam(<span class="hljs-string">&quot;&#123;&#x27;code&#x27;:&quot;</span>+randomNum+<span class="hljs-string">&quot;&#125;&quot;</span>);<br>        <span class="hljs-comment">//四位随机验证码存储到session</span><br>        session.setAttribute(<span class="hljs-string">&quot;phoneVarificationCode&quot;</span>,randomNum);<br><br>        <span class="hljs-comment">//hint 此处可能会抛出异常，注意catch</span><br>        <span class="hljs-type">SendSmsResponse</span> <span class="hljs-variable">sendSmsResponse</span> <span class="hljs-operator">=</span> acsClient.getAcsResponse(request);<br>        <span class="hljs-keyword">return</span> sendSmsResponse;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>sms.properties</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">accessKeyId</span>:<span class="hljs-string">xxxx</span><br><span class="hljs-attr">accessKeySecret</span>:<span class="hljs-string">xxxx</span><br></code></pre></td></tr></table></figure>



<h4 id="7-3-Java-后端"><a href="#7-3-Java-后端" class="headerlink" title="7.3 Java 后端"></a>7.3 Java 后端</h4><ul>
<li>CenterServlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;CenterServlet&quot;, urlPatterns = &quot;/center&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CenterServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br>	...<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 转发到注册页面</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> request</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toRegister</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;register.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>SmsServlet<br>当手机号格式正确情况下，点击短信验证码按钮，需要发起一个异步请求，该异步请求用于给用户发送手机验证码的。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;SmsServlet&quot; ,urlPatterns = &quot;/sms&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendSMS</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">phoneNum</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;phoneNum&quot;</span>);<br>        System.out.println(phoneNum);<br>        <span class="hljs-comment">//发送短信</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//session:存储</span><br>            SmsUtil.sendSms(request.getSession(),phoneNum);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>UserServlet - regist()<br>判断手机验证码是否正确，进行注册操作。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> String <span class="hljs-title function_">regist</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        BeanUtils.populate(user,request.getParameterMap());<br>        <span class="hljs-type">String</span> <span class="hljs-variable">inputPhoneCode</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">&quot;phoneCode&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">existPhoneCode</span> <span class="hljs-operator">=</span> (String) request.getSession().getAttribute(<span class="hljs-string">&quot;existPhoneCode&quot;</span>);<br>        <span class="hljs-keyword">if</span> (inputPhoneCode.equals(<span class="hljs-string">&quot;1234&quot;</span>)) &#123;<br>            <span class="hljs-comment">//手机验证码正确,进行注册操作</span><br>            userService.regist(user);<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:center?methodName=toLogin&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//手机验证码错误</span><br>            request.setAttribute(<span class="hljs-string">&quot;errorMsg&quot;</span>,<span class="hljs-string">&quot;验证码错误&quot;</span>);<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:center?methodName=toRegister&quot;</span>;<br>        &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>        e.printStackTrace();<br>    &#125;<br>    request.setAttribute(<span class="hljs-string">&quot;errorMsg&quot;</span>,<span class="hljs-string">&quot;注册失败&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:center?methodName=toRegister&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="8-列表"><a href="#8-列表" class="headerlink" title="8. 列表"></a>8. 列表</h3><p>首页导航 &gt;&gt; 酒店列表 &gt;&gt; HotelServlet (selectHotelListByPage) &gt;&gt; toHotelList (session存储list) &gt;&gt; hotelList.jsp</p>
<p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145339.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h4 id="8-1-Java-后端"><a href="#8-1-Java-后端" class="headerlink" title="8.1 Java 后端"></a>8.1 Java 后端</h4><ul>
<li>HotelServlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;HotelServlet&quot;,urlPatterns = &quot;/hotel&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HotelServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">HotelService</span> <span class="hljs-variable">hotelService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HotelServiceImpl</span>();<br>    <br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getCurrentPage</span><span class="hljs-params">(String currentPageStr)</span>&#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == currentPageStr) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> Integer.parseInt(currentPageStr);<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">selectHotelListByPage</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">currentPage</span> <span class="hljs-operator">=</span> getCurrentPage(request.getParameter(<span class="hljs-string">&quot;currentPage&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;currentPage : &quot;</span>+currentPage);<br>        <span class="hljs-comment">//分页查询酒店列表</span><br>        PageBean&lt;Hotel&gt; pageBean = hotelService.selectHotelListByPage(currentPage);<br>        System.out.println(pageBean);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hotelList.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>HotelService</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HotelServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HotelService</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">HotelDao</span> <span class="hljs-variable">hotelDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HotelDaoImpl</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> PageBean&lt;Hotel&gt; <span class="hljs-title function_">selectHotelListByPage</span><span class="hljs-params">(Integer currentPage)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        PageBean&lt;Hotel&gt; pageBean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageBean</span>&lt;&gt;();<br>        pageBean.setCurrentPage(currentPage); <span class="hljs-comment">// 当前页数</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">pageSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;<br>        pageBean.setPageSize(pageSize); <span class="hljs-comment">// 每页记录数</span><br>        <span class="hljs-type">Long</span> <span class="hljs-variable">totalSize</span> <span class="hljs-operator">=</span> hotelDao.selectTotalSize();<br>        pageBean.setTotalSize(totalSize); <span class="hljs-comment">// 总记录数</span><br>        <span class="hljs-type">Long</span> <span class="hljs-variable">totalPage</span> <span class="hljs-operator">=</span> totalSize % pageSize == <span class="hljs-number">0</span> ? totalSize / pageSize : totalSize / pageSize + <span class="hljs-number">1</span>;<br>        pageBean.setTotalPage(totalPage); <span class="hljs-comment">// 总页数</span><br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">begin</span> <span class="hljs-operator">=</span> (currentPage - <span class="hljs-number">1</span> ) * pageSize;<br>        List&lt;Hotel&gt; hotelList = hotelDao.selectHotelListByPage(begin, pageSize);<br>        pageBean.setList(hotelList); <span class="hljs-comment">// 当前页记录list</span><br>        <span class="hljs-keyword">return</span> pageBean;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>HotelDao</li>
</ul>
<ol>
<li>内连接查询表，通过 MapListHandler() 封装 query 查询出 mapList</li>
<li>遍历 mapList ，通过 BeanUtils 分别封装每1个 map 对象到 Hotel 和 Img</li>
<li>将 Img 设置到 Hotel 对象中，再将 Hotel 实例在循环中 add 进 List 最终返回</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HotelDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HotelDao</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">selectTotalSize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource()).query(<br>            <span class="hljs-string">&quot;select count(*) from tb_hotel&quot;</span>,<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ScalarHandler</span>&lt;&gt;()); <span class="hljs-comment">// ScalarHander&lt;&gt;() 查询统计数据的单个结果</span><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;Hotel&gt; <span class="hljs-title function_">selectHotelListByPage</span><span class="hljs-params">(Integer begin, Integer pageSize)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        List&lt;Hotel&gt; hotelList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-comment">//1对1</span><br>        <span class="hljs-comment">//MapListHandler:将单条记录封装到map(字段名=字段值)中，并将所有的map放到List中</span><br>        List&lt;Map&lt;String, Object&gt;&gt; mapList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource()).query(<br>            <span class="hljs-string">&quot;select tb_hotel.* , tb_img.img_id,tb_img.img_add from tb_hotel,tb_img where tb_hotel.hotel_id = tb_img.tb_hotel_hotel_id limit ?,?&quot;</span>,<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapListHandler</span>(), <span class="hljs-comment">// MapListHandler将结果集的每一行数据都封装在一个Map里，然后再存到List</span><br>            begin,pageSize);<br>        <span class="hljs-keyword">for</span> (Map&lt;String, Object&gt; map : mapList) &#123;<br>            <span class="hljs-comment">//map:一个酒店对象、一个图片对象</span><br>            <span class="hljs-type">Hotel</span> <span class="hljs-variable">hotel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hotel</span>();<br>            <span class="hljs-type">Img</span> <span class="hljs-variable">img</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Img</span>();<br>            BeanUtils.populate(hotel,map); <span class="hljs-comment">// 封装 hotel 查询出的属性</span><br>            BeanUtils.populate(img,map);  <span class="hljs-comment">// 封装 img 查询出的属性</span><br>            hotel.setImg(img);<br>            hotelList.add(hotel);<br>        &#125;<br>        <span class="hljs-keyword">return</span> hotelList;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="8-2-列表页"><a href="#8-2-列表页" class="headerlink" title="8.2 列表页"></a>8.2 列表页</h4><ul>
<li>hotelList.jsp<ol>
<li><strong>jstl</strong> 标签进行 c:if判断 和 c:each遍历 显示列表信息</li>
</ol>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 显示每行记录 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;$&#123;pageBean.list&#125;&quot;</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;hotel&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gdx-lists-wrap layout_clear&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gdx-lists-img layout_fl&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/hotelDetails.html&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/$&#123;hotel.img.img_add&#125;&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:block&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gdx-lists-data&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;field.html&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size: 20px&quot;</span>&gt;</span>$&#123;hotel.hotel_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gdx-lists-local&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page_icon in_local_icon&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>$&#123;hotel.hotel_address&#125;<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gdx-lists-heart&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page_icon add-heart-out&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page_icon add-heart-in&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;$&#123;hotel.hotel_star&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    推荐指数<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gdx-lists-info&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gdx-lists-icon&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;field.html&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page_icon in-data-Icon0&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;field.html&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page_icon in-data-Icon1&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;field.html&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page_icon in-data-Icon2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 分页工具栏 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ma_page&quot;</span>&gt;</span><br>                &lt;%--上一页按钮，当前页面是首页时不可用--%&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;pageBean.currentPage == 1&#125;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;disabled&quot;</span>&gt;</span>&lt;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;pageBean.currentPage != 1&#125;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/hotel?methodName=selectHotelListByPage&amp;currentPage=$&#123;pageBean.currentPage-1&#125;&quot;</span>&gt;</span>&lt;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">begin</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">end</span>=<span class="hljs-string">&quot;$&#123;pageBean.totalPage&#125;&quot;</span> <span class="hljs-attr">step</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;pageNum&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;pageNum == pageBean.currentPage&#125;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cur&quot;</span>&gt;</span>$&#123;pageNum&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;pageNum != pageBean.currentPage&#125;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/hotel?methodName=selectHotelListByPage&amp;currentPage=$&#123;pageNum&#125;&quot;</span>&gt;</span>$&#123;pageNum&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span><br><br>                &lt;%--下一页按钮，当前页面是尾页时不可用--%&gt;<br>                <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;pageBean.currentPage == pageBean.totalPage&#125;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;disabled&quot;</span>&gt;</span>&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;pageBean.currentPage != pageBean.totalPage&#125;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/hotel?methodName=selectHotelListByPage&amp;currentPage=$&#123;pageBean.currentPage+1&#125;&quot;</span>&gt;</span>&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="9-描述详情"><a href="#9-描述详情" class="headerlink" title="9. 描述详情"></a>9. 描述详情</h3><p>根据酒店编号，分别查询酒店简单信息、查询房间列表、查询酒店详细信息、查询套餐列表。</p>
<h4 id="9-1-Java-后端"><a href="#9-1-Java-后端" class="headerlink" title="9.1 Java 后端"></a>9.1 Java 后端</h4><ul>
<li>HotelServlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;HotelServlet&quot;,urlPatterns = &quot;/hotel&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HotelServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br>	...<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">selectHotelDetailsByHotelId</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">hotelId</span> <span class="hljs-operator">=</span> Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;hotelId&quot;</span>));<br>        System.out.println(<span class="hljs-string">&quot;hotelId:&quot;</span>+hotelId);<br>        <span class="hljs-comment">//根据酒店编号，查询酒店简单信息，存储到 request 域中</span><br>        <span class="hljs-type">Hotel</span> <span class="hljs-variable">hotel</span> <span class="hljs-operator">=</span> hotelService.selectHotelById(hotelId);<br>        request.setAttribute(<span class="hljs-string">&quot;hotel&quot;</span>,hotel);<br>        <span class="hljs-comment">//根据酒店编号，查询房间列表，存储到 request 域中</span><br>        List&lt;Room&gt; roomList = roomService.selectRoomListByHotelId(hotelId);<br>        request.setAttribute(<span class="hljs-string">&quot;roomList&quot;</span>,roomList);<br>        <span class="hljs-comment">//根据酒店编号，查询酒店详细信息，存储到 request 域中</span><br>        <span class="hljs-type">MyInfo</span> <span class="hljs-variable">info</span> <span class="hljs-operator">=</span> infoService.selectInfoListByHotelId(hotelId);<br>        request.setAttribute(<span class="hljs-string">&quot;info&quot;</span>,info);<br>        <span class="hljs-comment">//根据酒店编号，查询套餐列表，存储到 request 域中</span><br>        List&lt;MyPackage&gt; packageList = packageService.selectPackageListByHotelId(hotelId);<br>        request.setAttribute(<span class="hljs-string">&quot;packageList&quot;</span>,packageList);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hotelDetails.jsp&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>HotelDao - 酒店信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Hotel <span class="hljs-title function_">selectHotelById</span><span class="hljs-params">(Integer hotelId)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource()).query(<br>        <span class="hljs-string">&quot;select * from tb_hotel , tb_img where tb_hotel.hotel_id = tb_img.tb_hotel_hotel_id and hotel_id = ?&quot;</span>,<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapHandler</span>(), <span class="hljs-comment">// 将结果集中的第一行封装到一个 Map 里，key是列名，value就是对应的值</span><br>        hotelId);<br>    <span class="hljs-type">Hotel</span> <span class="hljs-variable">hotel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hotel</span>();<br>    <span class="hljs-type">Img</span> <span class="hljs-variable">img</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Img</span>();<br>    BeanUtils.populate(hotel,map);<br>    BeanUtils.populate(img,map);<br>    hotel.setImg(img);<br>    <span class="hljs-keyword">return</span> hotel;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>RoomDao - 房间信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RoomDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RoomDao</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;Room&gt; <span class="hljs-title function_">selectRoomListByHotelId</span><span class="hljs-params">(Integer hotelId)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource()).query(<br>            <span class="hljs-string">&quot;select * from tb_room where tb_hotel_hotel_id = ?&quot;</span>,<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanListHandler</span>&lt;Room&gt;(Room.class),<br>            hotelId);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>InfoDao - 详细信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InfoDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InfoDao</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> MyInfo <span class="hljs-title function_">selectInfoListByHotelId</span><span class="hljs-params">(Integer hotelId)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource()).query(<br>            <span class="hljs-string">&quot;select * from tb_information where tb_hotel_hotel_id = ?&quot;</span>,<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanHandler</span>&lt;MyInfo&gt;(MyInfo.class),<br>            hotelId);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>PackageDao - 套餐信息</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PackageDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PackageDao</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;MyPackage&gt; <span class="hljs-title function_">selectPackageListByHotelId</span><span class="hljs-params">(Integer hotelId)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource()).query(<br>            <span class="hljs-string">&quot;select * from tb_package where tb_hotel_hotel_id = ?&quot;</span>,<br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanListHandler</span>&lt;MyPackage&gt;(MyPackage.class),<br>            hotelId);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>PackageServlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;PackageServlet&quot;,urlPatterns = &quot;/package&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PackageServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">PackageService</span> <span class="hljs-variable">packageService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PackageServiceImpl</span>();<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">selectPackageById</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">packageId</span> <span class="hljs-operator">=</span> Integer.parseInt(request.getParameter(<span class="hljs-string">&quot;packageId&quot;</span>));<br>        <span class="hljs-type">MyPackage</span> <span class="hljs-variable">myPackage</span> <span class="hljs-operator">=</span> packageService.selectPackageById(packageId);<br>        System.out.println(myPackage);<br>        request.setAttribute(<span class="hljs-string">&quot;myPackage&quot;</span>,myPackage);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;packageDetails.jsp&quot;</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>PackageDao</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> MyPackage <span class="hljs-title function_">selectPackageById</span><span class="hljs-params">(Integer packageId)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource())<br>            .query(<span class="hljs-string">&quot;select * from tb_package,tb_img where tb_package.package_id = tb_img.tb_package_package_id and package_id = ?&quot;</span>,<br>                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapHandler</span>(),<br>                    packageId);<br>    <span class="hljs-type">MyPackage</span> <span class="hljs-variable">myPackage</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPackage</span>();<br>    <span class="hljs-type">Img</span> <span class="hljs-variable">img</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Img</span>();<br>    BeanUtils.populate(myPackage,map);<br>    BeanUtils.populate(img,map);<br>    myPackage.setImg(img);<br><br>    <span class="hljs-keyword">return</span> myPackage;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="9-2-详情页"><a href="#9-2-详情页" class="headerlink" title="9.2 详情页"></a>9.2 详情页</h4><ul>
<li>hotelDetails.jsp - 概要信息<br>从 request 域中取 hotel 数据，jstl 标签访问其属性。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;shops-header&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;second_clear&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layout_fl shops-cover&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/$&#123;hotel.img.img_add&#125;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-deta second_clear layout_fl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-info layout_fl&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-info-name&quot;</span>&gt;</span>$&#123;hotel.hotel_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-info-local&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;page_icon in-shop-local-icon&quot;</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>$&#123;hotel.hotel_address&#125;<br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-info-list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>联系电话：$&#123;hotel.hotel_tel&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>$&#123;info.info_bus&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label layout_fl&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-name&quot;</span>&gt;</span>店铺：$&#123;hotel.hotel_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-param&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-item&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-up&quot;</span>&gt;</span>描述<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-down&quot;</span>&gt;</span>4.8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-item&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-up&quot;</span>&gt;</span>服务<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-down&quot;</span>&gt;</span>5.8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-item&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-up&quot;</span>&gt;</span>保障<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-label-down&quot;</span>&gt;</span>4.8<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-btn shops-btn0&quot;</span>&gt;</span>收藏店铺<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;shops-btn shops-btn1&quot;</span>&gt;</span>联系客服<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>hotelDetails.jsp - 房间列表<br>从 request 域中取 roomList 数据，jstl 标签遍历。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;$&#123;roomList&#125;&quot;</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;room&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-div1&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-div2&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-div3&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin-left: 10px&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;$&#123;room.room_name&#125;&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/$&#123;room.img.img_add&#125;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-div4&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1&quot;</span> &gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size: 25px&quot;</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;6&quot;</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>$&#123;room.room_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>空高<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td2&quot;</span>&gt;</span>$&#123;room.room_height&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>低消<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td3&quot;</span>&gt;</span>$&#123;room.room_min_fee&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>形状<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td4&quot;</span>&gt;</span>$&#123;room.room_form&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>柱子<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td2&quot;</span>&gt;</span>$&#123;room.room_pillar&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>晚餐<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td3&quot;</span>&gt;</span>$&#123;room.room_dinner&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>电费<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td4&quot;</span>&gt;</span>$&#123;room.room_electric_fee&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>拆分<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td2&quot;</span>&gt;</span>$&#123;room.room_split&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>面积<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td3&quot;</span>&gt;</span>$&#123;room.room_area&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>灯光<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td4&quot;</span>&gt;</span>$&#123;room.room_lamplight&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>LED<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td2&quot;</span>&gt;</span>$&#123;room.room_LED&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td1&quot;</span>&gt;</span>桌数<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;room-td3&quot;</span>&gt;</span>$&#123;room.room_tables&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>hotelDetails.jsp - 详细信息<br>从 request 域中取 info 数据，jstl 标签访问其属性。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info-table&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>星级<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_star_level&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>装修时间<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_decorate_time&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>服务费<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_service_fee&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>定金<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_subscription&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>进场费<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_enter_fee&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>婚房化妆间<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_dressing_room&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>麦克风<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_microphone&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>投影仪<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_projector&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>桌布<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_tablecloth&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>电费<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_electric_charge&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>公交路线<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;3&quot;</span>&gt;</span>$&#123;info.info_bus&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>棋牌娱乐<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>$&#123;info.info_amusement&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>hotelDetails.jsp - 套餐信息<br>从 request 域中取 packageList 数据，jstl 标签遍历每个套餐信息。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pac-div4&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;$&#123;packageList&#125;&quot;</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;myPackage&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/package?methodName=selectPackageById&amp;packageId=$&#123;myPackage.package_id&#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pac-div5&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pac-div7&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;$&#123;myPackage.package_name&#125;&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/$&#123;myPackage.img.img_add&#125;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pac-div8&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size: 16px&quot;</span>&gt;</span>$&#123;myPackage.package_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pac-div9&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size: 25px; color: #f9326d; line-height: 52.8px&quot;</span>&gt;</span>￥$&#123;myPackage.package_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pac-div9&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size: 14px&quot;</span>&gt;</span>$&#123;myPackage.package_content&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pac-div10&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size: 14px&quot;</span>&gt;</span>销量：$&#123;myPackage.package_sales&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="10-商品详情"><a href="#10-商品详情" class="headerlink" title="10. 商品详情"></a>10. 商品详情</h3><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145408.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<h4 id="10-1-选择套餐类型"><a href="#10-1-选择套餐类型" class="headerlink" title="10.1 选择套餐类型"></a>10.1 选择套餐类型</h4><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145416.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">menuClick</span>(<span class="hljs-params">id</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;menuClick&quot;</span> + id);</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> check = $(<span class="hljs-string">&quot;#&quot;</span>+id).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;class&quot;</span>);</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (check != <span class="hljs-string">&quot;check&quot;</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">//将所有的选中取消</span></span><br><span class="language-javascript">                $(<span class="hljs-string">&quot;#menu li&quot;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;</span><br><span class="language-javascript">                    $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;class&quot;</span>,<span class="hljs-string">&quot;&quot;</span>);</span><br><span class="language-javascript">                &#125;);</span><br><span class="language-javascript">                <span class="hljs-comment">//选中点击的选项</span></span><br><span class="language-javascript">                $(<span class="hljs-string">&quot;#&quot;</span>+id).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;class&quot;</span>,<span class="hljs-string">&quot;check&quot;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-pro-list gods-pro-list0&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;menu&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;myPackage.package_menuA != null &amp;&amp; myPackage.package_menuB != null&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;menuA&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;check&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;menuClick(&#x27;menuA&#x27;)&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>A款<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;menuB&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;menuClick(&#x27;menuB&#x27;)&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>B款<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;myPackage.package_menuA != null &amp;&amp; myPackage.package_menuB == null&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;menuA&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;check&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>A款<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;myPackage.package_menuA == null &amp;&amp; myPackage.package_menuB != null&#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>  <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;menuB&quot;</span>  <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;check&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>B款<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="10-2-选择房间类型"><a href="#10-2-选择房间类型" class="headerlink" title="10.2 选择房间类型"></a>10.2 选择房间类型</h4><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145422.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">roomClick</span>(<span class="hljs-params">roomId</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;roomClick : &quot;</span> + roomId);</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> check = $(<span class="hljs-string">&quot;#&quot;</span>+roomId).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;class&quot;</span>,<span class="hljs-string">&quot;check&quot;</span>);</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (check != <span class="hljs-string">&quot;check&quot;</span>) &#123;</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;#room li&quot;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;</span><br><span class="language-javascript">                $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;class&quot;</span>,<span class="hljs-string">&quot;&quot;</span>);</span><br><span class="language-javascript">            &#125;);</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;#&quot;</span>+roomId).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;class&quot;</span>,<span class="hljs-string">&quot;check&quot;</span>)</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-pro-list gods-pro-list0 &quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;room&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;$&#123;roomList&#125;&quot;</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;room&quot;</span> <span class="hljs-attr">varStatus</span>=<span class="hljs-string">&quot;status&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;status.index == 0 &#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;$&#123;room.room_id&#125;&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;roomClick(&#x27;$&#123;room.room_id&#125;&#x27;)&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;check&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>$&#123;room.room_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">c:if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;$&#123;status.index != 0 &#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;$&#123;room.room_id&#125;&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;roomClick(&#x27;$&#123;room.room_id&#125;&#x27;)&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>$&#123;room.room_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">c:if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="10-3-加减数量"><a href="#10-3-加减数量" class="headerlink" title="10.3 加减数量"></a>10.3 加减数量</h4><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/image-20200522224928578.png" srcset="/img/loading.gif" lazyload alt="image-20200522224928578"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">reduce</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> count = $(<span class="hljs-string">&quot;#count&quot;</span>).<span class="hljs-title function_">val</span>();</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (count &gt;= <span class="hljs-number">2</span> &amp;&amp; count &lt;= <span class="hljs-number">99</span>) &#123;</span><br><span class="language-javascript">            count--;</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;#count&quot;</span>).<span class="hljs-title function_">val</span>(count);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">plus</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> count = $(<span class="hljs-string">&quot;#count&quot;</span>).<span class="hljs-title function_">val</span>();</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (count &gt;=<span class="hljs-number">0</span> &amp;&amp; count &lt;= <span class="hljs-number">98</span>) &#123;</span><br><span class="language-javascript">            count++;</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;#count&quot;</span>).<span class="hljs-title function_">val</span>(count);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <br><span class="hljs-tag">&lt;<span class="hljs-name">dl</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-pro-item layout_clear&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-pro-label gods-pro-clear2&quot;</span>&gt;</span>数量<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-pro-param gods-pro-primary layout_fl&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-counter&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;count&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-counter-text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;BuyCarNum&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> <span class="hljs-attr">maxlength</span>=<span class="hljs-string">&quot;3&quot;</span> <span class="hljs-attr">min</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-counter-btn&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-counter-push page_icon&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;加&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;plus()&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-counter-reduce page_icon&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;减&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;reduce()&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-counter-outs&quot;</span>&gt;</span>件<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gods-counter-num&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;stock&quot;</span>&gt;</span>(库存99件)<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="10-4-加入购物车"><a href="#10-4-加入购物车" class="headerlink" title="10.4 加入购物车"></a>10.4 加入购物车</h4><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145432.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">addCart</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> shoppingcart_time = <span class="hljs-title function_">getTime</span>();</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> shoppingcart_type = $(<span class="hljs-string">&quot;#menu li[class=&#x27;check&#x27;]&quot;</span>).<span class="hljs-title function_">text</span>();</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> shoppingcart_place = $(<span class="hljs-string">&quot;#room li[class=&#x27;check&#x27;]&quot;</span>).<span class="hljs-title function_">text</span>();</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> shoppingcart_count = $(<span class="hljs-string">&quot;#count&quot;</span>).<span class="hljs-title function_">val</span>();</span><br><span class="language-javascript">        $.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/cart&quot;</span>,&#123;</span><br><span class="language-javascript">            <span class="hljs-string">&quot;methodName&quot;</span>:<span class="hljs-string">&quot;addCart&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_time&quot;</span>:shoppingcart_time,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_name&quot;</span>:<span class="hljs-string">&quot;$&#123;myPackage.package_name&#125;&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_type&quot;</span>:shoppingcart_type,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_place&quot;</span>:shoppingcart_place,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_price&quot;</span>:<span class="hljs-string">&quot;$&#123;myPackage.package_price&#125;&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_count&quot;</span>:shoppingcart_count,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_img&quot;</span>:<span class="hljs-string">&quot;$&#123;myPackage.img.img_add&#125;&quot;</span>,</span><br><span class="language-javascript">            <span class="hljs-string">&quot;shoppingcart_hotelname&quot;</span>:<span class="hljs-string">&quot;$&#123;hotel.hotel_name&#125;&quot;</span></span><br><span class="language-javascript">        &#125;,<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (data.<span class="hljs-property">flag</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">//加入成功,跳转到购物车页面</span></span><br><span class="language-javascript">                location.<span class="hljs-property">href</span> = <span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/center?methodName=toShoppingCart&quot;</span>;</span><br><span class="language-javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">//加入失败，弹窗</span></span><br><span class="language-javascript">                <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;服务器被挤爆了...&quot;</span>);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;,<span class="hljs-string">&quot;json&quot;</span>);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h4 id="10-5-Java后端"><a href="#10-5-Java后端" class="headerlink" title="10.5 Java后端"></a>10.5 Java后端</h4><ul>
<li>CartServlet</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(name = &quot;CartServlet&quot;,urlPatterns = &quot;/cart&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CartServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseServlet</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">CartService</span> <span class="hljs-variable">cartService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CartServiceImpl</span>();<br><br>    <span class="hljs-meta">@MyResponseBody</span><br>    <span class="hljs-keyword">public</span> Map <span class="hljs-title function_">addCart</span><span class="hljs-params">(HttpServletRequest request,HttpServletResponse response)</span>&#123;<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;添加成功&quot;</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Cart</span> <span class="hljs-variable">cart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cart</span>();<br>            BeanUtils.populate(cart,request.getParameterMap());<br>            cart.setShoppingcart_id(CommonUtils.uuid());<br>            cart.setTb_user_user_tel(<span class="hljs-string">&quot;13260621887&quot;</span>);<br>            cartService.addCart(cart);<br>            flag = <span class="hljs-literal">true</span>;<br>            msg = <span class="hljs-string">&quot;添加成功&quot;</span>;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>            flag = <span class="hljs-literal">false</span>;<br>            msg = <span class="hljs-string">&quot;添加失败&quot;</span>;<br>        &#125;<br>        map.put(<span class="hljs-string">&quot;flag&quot;</span>,flag);<br>        map.put(<span class="hljs-string">&quot;msg&quot;</span>,msg);<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>CartDao</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CartDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CartDao</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCart</span><span class="hljs-params">(Cart cart)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>(JDBCUtil.getDataSource())<br>                .update(<span class="hljs-string">&quot;insert into tb_shoppingcart values(?,?,?,?,?,?,?,?,?,?)&quot;</span>,<br>                        cart.getShoppingcart_id(),<br>                        cart.getShoppingcart_time(),<br>                        cart.getShoppingcart_name(),<br>                        cart.getShoppingcart_type(),<br>                        cart.getShoppingcart_place(),<br>                        cart.getShoppingcart_price(),<br>                        cart.getShoppingcart_count(),<br>                        cart.getTb_user_user_tel(),<br>                        cart.getShoppingcart_img(),<br>                        cart.getShoppingcart_hotelname());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="11-我的购物车"><a href="#11-我的购物车" class="headerlink" title="11. 我的购物车"></a>11. 我的购物车</h3><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145441.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145447.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>我的购物车<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/css/wedding-3.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/css/wedding-2.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/js/jquery-3.1.1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">reduce</span>(<span class="hljs-params">cartId</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;reduce&quot;</span> + cartId)</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> count = $(<span class="hljs-string">&quot;#&quot;</span> + cartId + <span class="hljs-string">&quot;_count&quot;</span>).<span class="hljs-title function_">text</span>();</span><br><span class="language-javascript">            count--;</span><br><span class="language-javascript">            <span class="hljs-keyword">if</span> (count &gt;= <span class="hljs-number">1</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">//修改数据库</span></span><br><span class="language-javascript">                <span class="hljs-title function_">updateCart</span>(cartId, count);</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">plus</span>(<span class="hljs-params">cartId</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;plus&quot;</span> + cartId)</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> count = $(<span class="hljs-string">&quot;#&quot;</span> + cartId + <span class="hljs-string">&quot;_count&quot;</span>).<span class="hljs-title function_">text</span>();</span><br><span class="language-javascript">            count++;</span><br><span class="language-javascript">            <span class="hljs-comment">//修改数据库</span></span><br><span class="language-javascript">            <span class="hljs-title function_">updateCart</span>(cartId,count);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">setSubtotal</span>(<span class="hljs-params">cartId,count</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> price = $(<span class="hljs-string">&quot;#&quot;</span>+cartId+<span class="hljs-string">&quot;_price&quot;</span>).<span class="hljs-title function_">text</span>();</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> subtotal = count * price;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;subtotal:&quot;</span> + subtotal)</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;#&quot;</span>+cartId+<span class="hljs-string">&quot;_subtotal&quot;</span>).<span class="hljs-title function_">text</span>(subtotal);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">         * 设置总价</span></span><br><span class="hljs-comment"><span class="language-javascript">         */</span></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">setTotalPrice</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">///获取所有选中的复选框</span></span><br><span class="language-javascript">            <span class="hljs-comment">//获取选中的复选框对应的小计</span></span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> totalPrice = <span class="hljs-number">0</span>;</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;.ids:checked&quot;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> cartId = $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">val</span>();</span><br><span class="language-javascript">                <span class="hljs-comment">//选中的小计</span></span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> subtotal = $(<span class="hljs-string">&quot;#&quot;</span>+cartId+<span class="hljs-string">&quot;_subtotal&quot;</span>).<span class="hljs-title function_">text</span>();</span><br><span class="language-javascript">                totalPrice += <span class="hljs-title class_">Number</span>(subtotal);</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;totalSize : &quot;</span> + totalPrice);</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;#totalPrice&quot;</span>).<span class="hljs-title function_">text</span>(<span class="hljs-string">&quot;￥&quot;</span>+totalPrice);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">selectAll</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> all = $(<span class="hljs-string">&quot;#all&quot;</span>);</span><br><span class="language-javascript">            <span class="hljs-keyword">var</span> check = all.<span class="hljs-title function_">prop</span>(<span class="hljs-string">&quot;checked&quot;</span>);</span><br><span class="language-javascript">            $(<span class="hljs-string">&quot;.ids&quot;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">index</span>) &#123;</span><br><span class="language-javascript">                $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">prop</span>(<span class="hljs-string">&quot;checked&quot;</span>,check);</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">            <span class="hljs-comment">//设置总价</span></span><br><span class="language-javascript">            <span class="hljs-title function_">setTotalPrice</span>();</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateCart</span>(<span class="hljs-params">cartId,count</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;updateCart&quot;</span>)</span><br><span class="language-javascript">            $.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/cart?methodName=updateCart&quot;</span>,&#123;</span><br><span class="language-javascript">                <span class="hljs-string">&quot;shoppingcart_id&quot;</span>:cartId,</span><br><span class="language-javascript">                <span class="hljs-string">&quot;shoppingcart_count&quot;</span>:count</span><br><span class="language-javascript">            &#125;,<span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">flag</span>);</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (data.<span class="hljs-property">flag</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">123456</span>)</span><br><span class="language-javascript">                    <span class="hljs-comment">//设置数量</span></span><br><span class="language-javascript">                    $(<span class="hljs-string">&quot;#&quot;</span> + cartId + <span class="hljs-string">&quot;_count&quot;</span>).<span class="hljs-title function_">text</span>(count);</span><br><span class="language-javascript">                    <span class="hljs-comment">//设置小计:小计=数量*单价</span></span><br><span class="language-javascript">                    <span class="hljs-title function_">setSubtotal</span>(cartId,count);</span><br><span class="language-javascript">                    <span class="hljs-comment">//设置总价:总价=所有选中小计之和</span></span><br><span class="language-javascript">                    <span class="hljs-title function_">setTotalPrice</span>();</span><br><span class="language-javascript">                &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;服务器被挤爆了，修改失败！！！&quot;</span>);</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;,<span class="hljs-string">&quot;json&quot;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;public-navbar&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;public-toolbar&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hidden_active&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;page_Auser&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;us_fr&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layout_fl&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_ChildPage us_adjust_padding2 us2_PageUint2&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_ChildHead&quot;</span>&gt;</span>我的购物车<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_buycar&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_buycar_wrap&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">c:forEach</span> <span class="hljs-attr">items</span>=<span class="hljs-string">&quot;$&#123;cartList&#125;&quot;</span> <span class="hljs-attr">var</span>=<span class="hljs-string">&quot;cart&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layout_clear&quot;</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_buycar_check layout_fl&quot;</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>  <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ids&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;cart.shoppingcart_id&#125;&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;setTotalPrice()&quot;</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_unit_table layout_fl&quot;</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_order_line&quot;</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>$&#123;cart.shoppingcart_time&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>订单号：$&#123;cart.shoppingcart_id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>商品信息<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>套餐类型/婚宴场地<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>单价<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>数量<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>小计<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>操作<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span></span><br><span class="hljs-tag">                                                            <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/$&#123;cart.shoppingcart_img&#125;&quot;</span></span><br><span class="hljs-tag">                                                            <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:100px;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>$&#123;cart.shoppingcart_name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>套餐类型：$&#123;cart.shoppingcart_type&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span></span><br><span class="hljs-tag">                                                        <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>婚宴场地：$&#123;cart.shoppingcart_place&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:block&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">ins</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ins</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;$&#123;cart.shoppingcart_id&#125;_price&quot;</span>&gt;</span>$&#123;cart.shoppingcart_price&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                                                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><br>                                                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;amont_line&quot;</span>&gt;</span><br>                                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;amont_line_btn amont_line_reduce&quot;</span></span><br><span class="hljs-tag">                                                                      <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;reduce(&#x27;$&#123;cart.shoppingcart_id&#125;&#x27;)&quot;</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;amont_line_text&quot;</span></span><br><span class="hljs-tag">                                                                      <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;$&#123;cart.shoppingcart_id&#125;_count&quot;</span>&gt;</span>$&#123;cart.shoppingcart_count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;amont_line_btn amont_line_push&quot;</span></span><br><span class="hljs-tag">                                                                      <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;plus(&#x27;$&#123;cart.shoppingcart_id&#125;&#x27;)&quot;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><br>                                                        <span class="hljs-tag">&lt;<span class="hljs-name">em</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;keyword-pink&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;$&#123;cart.shoppingcart_id&#125;_subtotal&quot;</span>&gt;</span><br>                                                                $&#123;cart.shoppingcart_count * cart.shoppingcart_price&#125;<br>                                                        <span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span><br>                                                    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>移入收藏夹<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>/<span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">c:forEach</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_bottom_bar layout_clear&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_buycar_check layout_fl&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>  <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;all&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">&quot;selectAll()&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_buycar_state layout_fl&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>全选<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>清空购物车<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_buycar_buy layout_fr&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>已选择<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>件商品<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cos_span&quot;</span>&gt;</span>总价：<span class="hljs-tag">&lt;<span class="hljs-name">em</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;keyword-pink&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;totalPrice&quot;</span>&gt;</span>￥0.00<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;us_button&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;$&#123;pageContext.request.contextPath&#125;/payPage.html&quot;</span>&gt;</span>去结算<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>





<h3 id="20-页面效果"><a href="#20-页面效果" class="headerlink" title="20. 页面效果"></a>20. 页面效果</h3><p><img src="https://jy-imgs.oss-cn-beijing.aliyuncs.com/img/20230316145512.jpg" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述"></p>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/04-%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/" class="category-chain-item">04_网页技术</a>
  
  
    <span>></span>
    
  <a href="/categories/04-%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/07-Bootstrap/" class="category-chain-item">07_Bootstrap</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Bootstrap/">#Bootstrap</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>07-demo：婚礼汇</div>
      <div>https://janycode.github.io/2017/05/20/04_网页技术/07_Bootstrap/07-demo：婚礼汇/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Jerry(姜源)</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2017年5月20日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 姜源">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2017/05/22/04_%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/04_Servlet/16-Servlet%E9%80%9A%E7%94%A8%E7%BC%96%E7%A8%8B/" title="16-Servlet通用编程">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">16-Servlet通用编程</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2017/05/03/20_%E6%94%B6%E8%97%8F%E6%95%B4%E7%90%86/01_%E9%9D%A2%E8%AF%95%E9%A2%98/00-%E9%9D%A2%E8%AF%95%E9%A2%98%E6%9D%82%E9%A1%B9%E6%95%B4%E7%90%86%20(%E6%96%B0)/" title="00-面试题杂项整理（新）">
                        <span class="hidden-mobile">00-面试题杂项整理（新）</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="SOHUCS" sid='https://janycode.github.io/2017/05/20/04_%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/07_Bootstrap/07-demo%EF%BC%9A%E5%A9%9A%E7%A4%BC%E6%B1%87/'></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#SOHUCS', function() {
      Fluid.utils.createScript("https://changyan.sohu.com/upload/changyan.js", function() {
        window.changyan.api.config({"appid":"cyw5OHIcO","appkey":"fea3446b3df4b3f129f34da4cbc87e51"})
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://simple.blog.csdn.net" target="_blank" rel="nofollow noopener"><span>CSDN</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/janycode" target="_blank" rel="nofollow noopener"><span>GitHub</span></a> <i class="iconfont icon-love"></i> <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量(PV) 
        <span id="busuanzi_value_site_pv"></span>
         次，
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数(UV) 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

<!-- live2d 动画 -->
<script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>
<script>
    L2Dwidget.init({
        "model": {
            jsonPath: "https://unpkg.com/live2d-widget-model-haruto@1.0.5/assets/haruto.model.json",
            "scale": 1
        },
        "display": {
            "position": "right",
            "width": 100,
            "height": 200,
            "hOffset": 35,
            "vOffset": -85
        },
        "mobile": {
            "show": false,
            "scale": 0.1
        },
        "react": {
            "opacityDefault": 0.75,
            "opacityOnHover": 0.2
        }
    });
</script>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <!-- Baidu Analytics -->
    <script defer>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?bfff735c897eb60ea49b735096b20e47";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  

  

  

  

  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
